import{_ as i}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as c,o as u,c as k,a as n,b as s,d as a,w as o,e as p}from"./app.c5b3201b.js";const r={},d=n("h2",{id:"apiå¼€æ”¾å¹³å°",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#apiå¼€æ”¾å¹³å°","aria-hidden":"true"},"#"),s(" APIå¼€æ”¾å¹³å°")],-1),v=n("h2",{id:"å‰è¨€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å‰è¨€","aria-hidden":"true"},"#"),s(" å‰è¨€")],-1),m=n("p",null,[n("strong",null,"èƒŒæ™¯")],-1),g={href:"http://api.btstu.cn/",target:"_blank",rel:"noopener noreferrer"},b=p('<p><strong>åšä¸€ä¸ªAPIæ¥å£å¹³å°:</strong></p><ol><li>é˜²æ­¢æ”»å‡»ï¼ˆå®‰å…¨æ€§)</li><li>ä¸èƒ½éšä¾¿è°ƒç”¨(é™åˆ¶ã€å¼€é€š)</li><li>ç»Ÿè®¡è°ƒç”¨æ¬¡æ•°</li><li>è®¡è´¹</li><li>æµé‡ä¿æŠ¤</li><li>APIæ¥å…¥</li></ol><p><strong>é¡¹ç›®ä»‹ç»</strong></p><p>åšä¸€ä¸ªæä¾›APIæ¥å£è°ƒç”¨çš„å¹³å°ï¼Œç”¨æˆ·å¯ä»¥æ³¨å†Œç™»å½•ï¼Œå¼€é€šæ¥å£è°ƒç”¨æƒé™ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨æ¥å£ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨ä¼šè¿›è¡Œç»Ÿè®¡ã€‚ç®¡ç†å‘˜å¯ä»¥å‘å¸ƒæ¥å£ã€ä¸‹çº¿æ¥å£ã€æ¥å…¥æ¥å£ï¼Œä»¥åŠå¯è§†åŒ–æ¥å£çš„è°ƒç”¨æƒ…å†µã€æ•°æ®ã€‚</p><p><strong>ä¸šåŠ¡æµç¨‹</strong></p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247056.png" alt="image-20230112101821991" loading="lazy"></p><p><strong>æŠ€æœ¯é€‰å‹</strong></p><p><strong>å‰ç«¯ï¼š</strong></p><ul><li><p>Ant Design Pro</p></li><li><p>React</p></li><li><p>Ant Design Procomponents</p></li><li><p>Umi</p></li><li><p>Umi Request (Axiosçš„å°è£…)</p></li></ul><p><strong>åç«¯ï¼š</strong></p><ul><li>Java Spring Boot</li><li>Spring Boot Starter (SDKå¼€å‘)</li><li>Dubbo</li><li>Nacos</li><li>Spring Cloud Gateway (ç½‘å…³ã€é™æµã€æ—¥å¿—å®ç°)</li></ul><h2 id="ä¸€ã€é¡¹ç›®åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€é¡¹ç›®åˆå§‹åŒ–" aria-hidden="true">#</a> ä¸€ã€é¡¹ç›®åˆå§‹åŒ–</h2><hr><h3 id="_1ã€ant-design-pro" tabindex="-1"><a class="header-anchor" href="#_1ã€ant-design-pro" aria-hidden="true">#</a> 1ã€Ant Design Pro</h3><hr>',15),f={href:"https://pro.ant.design/zh-CN/docs/getting-started",target:"_blank",rel:"noopener noreferrer"},y=p(`<p><strong>åˆå§‹åŒ–</strong></p><blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## ä½¿ç”¨ npm</span>
<span class="token function">npm</span> i @ant-design/pro-cli <span class="token parameter variable">-g</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰“å¼€å°†è¦å­˜æ”¾é¡¹ç›®çš„æ–‡ä»¶å¤¹</p><blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pro create  é¡¹ç›®åç§°
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p><strong>é€‰æ‹©umiç‰ˆæœ¬</strong></p><blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>? ğŸ‚ ä½¿ç”¨ umi@4 è¿˜æ˜¯ umi@3 ? <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
â¯ umi@4
 umi@3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>é€‰æ‹©4ç‰ˆçš„</p><p><strong>å®‰è£…ä¾èµ–</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> æˆ–è€…  <span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å¯åŠ¨</strong></p><p>åœ¨<strong>package.json</strong>é‡Œé¢ ç‚¹å‡»<strong>start</strong></p><p>è¿™é‡Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªå‘ï¼Œç™»å½•é¡µé¢æ— æ³•ç™»å½• çŠ¶æ€ç 404</p>`,12),h={href:"https://github.com/ant-design/ant-design-pro/issues/10446",target:"_blank",rel:"noopener noreferrer"},w=n("p",null,[n("img",{src:"https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247059.png",alt:"image-20230112105451611",loading:"lazy"})],-1),I=n("p",null,[n("strong",null,"åˆ é™¤ä¸å¿…è¦çš„ä¸œè¥¿")],-1),q=n("p",null,"ç§»é™¤å›½é™…åŒ–",-1),_=n("p",null,"è¿è¡Œpackage.jsonä¸­çš„i18n-remove ç„¶åå‘ç°åˆæŠ¥é”™äº†..",-1),x=n("blockquote",null,[n("p",null,"è§£å†³æ–¹æ³•ï¼šæ‰§è¡Œ"),n("p",null,"yarn add eslint-config-prettier"),n("p",null,"yarn add eslint-plugin-unicorn"),n("p",null,"ç„¶åä¿®æ”¹node_modules/@umijs/lint/dist/config/eslint/index.js"),n("p",null,"// es2022: trueæŠŠè¿™ä¸ªæ³¨é‡Šæ‰å°±å¯ä»¥è§£å†³é—®é¢˜")],-1),R=n("p",null,[n("img",{src:"https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247065.png",alt:"image-20230112110408577",loading:"lazy"})],-1),S=n("p",null,"ç„¶ååˆ é™¤src/localesç›®å½•",-1),j=n("li",null,[n("p",null,"åˆ é™¤testsæµ‹è¯•")],-1),U=p('<h3 id="_2ã€åç«¯" tabindex="-1"><a class="header-anchor" href="#_2ã€åç«¯" aria-hidden="true">#</a> 2ã€åç«¯</h3><hr><h4 id="_1ã€åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#_1ã€åˆå§‹åŒ–" aria-hidden="true">#</a> 1ã€åˆå§‹åŒ–</h4><p><strong>ä½¿ç”¨SpringBoot é¡¹ç›®åˆå§‹æ¨¡æ¿</strong></p><p>Java SpringBoot é¡¹ç›®åˆå§‹æ¨¡æ¿ï¼Œæ•´åˆäº†å¸¸ç”¨æ¡†æ¶å’Œç¤ºä¾‹ä»£ç ï¼Œå¤§å®¶å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå¿«é€Ÿå¼€å‘è‡ªå·±çš„é¡¹ç›®ã€‚(springboot-init)</p><p><strong>æ¨¡æ¿åŠŸèƒ½</strong></p><ul><li>Spring Boot 2.7.0ï¼ˆè´¼æ–°ï¼‰</li><li>Spring MVC</li><li>MySQL é©±åŠ¨</li><li>MyBatis</li><li>MyBatis Plus</li><li>Spring Session Redis åˆ†å¸ƒå¼ç™»å½•</li><li>Spring AOP</li><li>Apache Commons Lang3 å·¥å…·ç±»</li><li>Lombok æ³¨è§£</li><li>Swagger + Knife4j æ¥å£æ–‡æ¡£</li><li>Spring Boot è°ƒè¯•å·¥å…·å’Œé¡¹ç›®å¤„ç†å™¨</li><li>å…¨å±€è¯·æ±‚å“åº”æ‹¦æˆªå™¨ï¼ˆè®°å½•æ—¥å¿—ï¼‰</li><li>å…¨å±€å¼‚å¸¸å¤„ç†å™¨</li><li>è‡ªå®šä¹‰é”™è¯¯ç </li><li>å°è£…é€šç”¨å“åº”ç±»</li><li>ç¤ºä¾‹ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æœç´¢åŠŸèƒ½</li><li>ç¤ºä¾‹å•å…ƒæµ‹è¯•ç±»</li><li>ç¤ºä¾‹ SQLï¼ˆç”¨æˆ·è¡¨ï¼‰</li></ul><p>éœ€è¦æ›´æ”¹yamlæ–‡ä»¶ä¸­çš„MySQLã€Redisçš„é…ç½®</p><p>è®¿é—® localhost:7529/api/doc.html å°±èƒ½åœ¨çº¿è°ƒè¯•æ¥å£äº†ï¼Œä¸éœ€è¦å‰ç«¯é…åˆå•¦~</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247051.png" alt="image-20230112141458799" loading="lazy"></p><h4 id="_2ã€æ•°æ®åº“è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#_2ã€æ•°æ®åº“è®¾è®¡" aria-hidden="true">#</a> 2ã€æ•°æ®åº“è®¾è®¡</h4><hr><p><strong>åŸºæœ¬ç»“æ„</strong></p><ul><li>id ç”¨æˆ·id</li><li>name åç§°</li><li>description æè¿°</li><li>url æ¥å£åœ°å€</li><li>request_header è¯·æ±‚å¤´</li><li>reponse_header å“åº”å¤´</li><li>status æ¥å£çŠ¶æ€ï¼ˆ0-å…³é—­ 1-å¼€å¯ï¼‰</li><li>method è¯·æ±‚ç±»å‹</li><li>user_id åˆ›å»ºäºº</li><li>create_time åˆ›å»ºæ—¶é—´</li><li>update_time æ›´æ–°æ—¶é—´</li><li>is_delete é€»è¾‘åˆ é™¤ ï¼ˆ0-æœªåˆ  ï¼Œ1-å·²åˆ ï¼‰</li></ul><p><strong>ä»£ç </strong></p>',15),C={href:"https://www.sqlfather.com/",target:"_blank",rel:"noopener noreferrer"},E=p('<p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247072.png" alt="image-20230112153403987" loading="lazy"></p><p>å¡«å¯¹åº”çš„æ•°æ®ï¼Œä¸€é”®ç”Ÿæˆå³å¯</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> api_platform<span class="token punctuation">;</span>\n\n<span class="token keyword">use</span> api_platform<span class="token punctuation">;</span>\n\n<span class="token comment">-- æ¥å£ä¿¡æ¯</span>\n<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span>\n<span class="token punctuation">(</span>\n<span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">&#39;ä¸»é”®&#39;</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;åç§°&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æè¿°&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ¥å£åœ°å€&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span> <span class="token keyword">text</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;è¯·æ±‚å¤´&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span> <span class="token keyword">text</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;å“åº”å¤´&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span> <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ¥å£çŠ¶æ€ï¼ˆ0-å…³é—­ï¼Œ1-å¼€å¯ï¼‰&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;è¯·æ±‚ç±»å‹&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;åˆ›å»ºäºº&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>update_time<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>\n<span class="token identifier"><span class="token punctuation">`</span>is_deleted<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ˜¯å¦åˆ é™¤(0-æœªåˆ , 1-å·²åˆ )&#39;</span>\n<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ¥å£ä¿¡æ¯&#39;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;å»–ç«‹è½©&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è„±é¢–è€Œå‡º&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.foster-larkin.co&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é¾™å˜‰æ‡¿&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç§¦å¤©ç£Š&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">1718083101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;æ›¹æ˜è¾‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ä¸¾ä¸€åä¸‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.tony-kiehn.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ä»»æ“è‹&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é™ˆå‡¯ç‘&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">28978</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;é‡‘ä¹é©¹&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é¦–å½“å…¶å†²&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.coleen-prosacco.net&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ¯›æµ©&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é™†è‡´è¿œ&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">208</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;å»–æ€&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ¥ä¹‹ä¸æ˜“&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.don-sipes.net&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ¢å½¬&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç™½å›æµ©&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">470</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;è‘£ç…œç¥º&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é•¿æ²»ä¹…å®‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.terry-turner.co&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è¦ƒç»é½&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;èƒ¡é›ªæ¾&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">611007</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;ä¾¯èªå¥&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç²¾å¿ƒè®¾è®¡&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.augustus-yost.info&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å‚…é¸¿ç…Š&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ½˜é¹é£&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;é­å¼˜æ–‡&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç©å¿½èŒå®ˆ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.guadalupe-beatty.biz&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ±Ÿæ¢“æ™¨&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é­æ€æ·¼&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">1162536022</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;äºè‹‘åš&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å„å¼å„æ ·&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.nolan-metz.net&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;éŸ¦æœ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é‡‘èƒ¤ç¥¥&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;å§šç‚«æ˜&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç¿»å¤©è¦†åœ°&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.jodie-schultz.info&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è®¸è¶Šå½¬&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ¯›æ™‹é¹&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">973</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;å­™é‘«é¹&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç»œç»ä¸ç»&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.liza-sporer.co&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å­™å½¬&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å‚…é¸¿ç…Š&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">30308</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;å”å±•é¹&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é“¤è€Œèµ°é™©&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.hayden-purdy.co&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ¨å“²ç€š&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é™†å‡¯ç‘&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">473462835</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;æ›¹æ“è‹&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;èµä¸ç»å£&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.phung-glover.org&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é‚±å¿—æ³½&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¼ å¥é›„&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">32155653</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;å¤çƒ¨éœ–&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å“­ç¬‘ä¸å¾—&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.augustine-funk.org&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å®‹èªå¥&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;éƒé¹æ¶›&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">3964</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;è‘£æµ©&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¯¹ç—‡ä¸‹è¯&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.erik-hamill.biz&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é»ç«‹æœ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å»–é¹¤è½©&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">2275</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;ç½—è£è½©&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å–œé—»ä¹è§&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.gia-hermann.biz&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;éŸ©ç…œåŸ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é˜è€€æ°&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">847</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;æ²ˆæ­£è±ª&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç»Ÿç­¹å…¼é¡¾&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.isabella-reinger.io&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é‚“å­è½©&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å»–ä¼Ÿè¯š&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">997378602</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;ä»»ç«‹æœ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å‡ºäººæ„æ–™&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.geoffrey-koss.name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è¦ƒæµ©ç„¶&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è§é›¨æ³½&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">403</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;å¼ ç‚«æ˜&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;åä¸è™šä¼ &#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.ellan-gleason.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é»æ­£è±ª&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;éŸ¦ç‚å½¬&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">35127293</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;æ–¹é›¨æ³½&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è¡£é£Ÿä½è¡Œ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.wilton-walsh.biz&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é»è¶Šæ³½&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç™½è¿œèˆª&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">62264</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>response_header<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;è¢å¤©ç¿Š&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å·åœŸé‡æ¥&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.lynetta-mclaughlin.info&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é‚¹ç† å½¤&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¶æ½‡ç„¶&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token number">9884455</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œå³å¯</p><h4 id="_3ã€ä½¿ç”¨mabatisxæ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_3ã€ä½¿ç”¨mabatisxæ’ä»¶" aria-hidden="true">#</a> 3ã€ä½¿ç”¨MabatisXæ’ä»¶</h4><p>ç”Ÿæˆdomainã€mapperã€service</p><p>æ‰“å¼€æ–°å»ºçš„è¡¨ï¼Œå³å‡»é€‰æ‹©MybatisX-Generator</p><p>å‹¾ä¸Šé©¼å³°</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247085.png" alt="image-20230112155202934" loading="lazy"></p><p>æ ¹æ®<strong>ç‰ˆæœ¬è·Ÿéœ€è¦æ‰“å‹¾</strong>ï¼Œç‚¹å‡»å®Œæˆ</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247653.png" alt="image-20230112161220300" loading="lazy"></p><p>æŸ¥çœ‹ç›®å½•</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247698.png" alt="image-20230112161257033" loading="lazy"></p><p>ç„¶åå°†å®ƒä»¬æ”¾åˆ°æˆ‘è‡ªå·±çš„è·¯å¾„ä¸‹</p><h4 id="_4ã€controller" tabindex="-1"><a class="header-anchor" href="#_4ã€controller" aria-hidden="true">#</a> 4ã€Controller</h4><p>æ¥ä¸‹æ¥åˆ°controllerå±‚</p><blockquote><p>æˆ‘ä»¬åªéœ€è¦å°†<strong>PostController</strong>å¤åˆ¶ä¸€ä»½æ”¹åä¸º<strong>InterfaceInfoController</strong>å³å¯,å› ä¸ºé€»è¾‘æ˜¯å·®ä¸å¤šï¼Œéƒ½æ˜¯è¿›è¡Œå¢åˆ æ”¹æŸ¥</p></blockquote><p>ç„¶åå°†postæ”¹æˆinterfaceInfoã€Postæ”¹æˆInterfaceInfo</p><p>æ ¹æ®æŠ¥é”™ä¿¡æ¯æˆ‘ä»¬æ¥è¡¥å……ä¿¡æ¯</p><h4 id="_5ã€dto" tabindex="-1"><a class="header-anchor" href="#_5ã€dto" aria-hidden="true">#</a> 5ã€DTO</h4><p>é¦–å…ˆå…ˆå¢åŠ DTOï¼Œåœ¨InterfaceInfoç±»ä»æ‹¿æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯åšæˆä¸‰ä¸ªDTOç±»ï¼ˆåˆ†åˆ«æ˜¯æ–°å¢ã€æŸ¥è¯¢ã€æ›´æ–°ï¼‰åˆ é™¤çš„è¯·æ±‚æˆ‘ä»¬å°è£…åœ¨commonåŒ…ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247736.png" alt="image-20230112184904561" loading="lazy"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>model<span class="token punctuation">.</span>dto<span class="token punctuation">.</span>interfaceinfo</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span>\n\n\n<span class="token doc-comment comment">/**\n * åˆ›å»ºè¯·æ±‚\n *\n * <span class="token keyword">@author</span> xuan\n */</span>\n<span class="token annotation punctuation">@Data</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterfaceInfoAddRequest</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>\n\n	<span class="token doc-comment comment">/**\n	 * åç§°\n	 */</span>\n	<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n\n	<span class="token doc-comment comment">/**\n	 * æè¿°\n	 */</span>\n	<span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>\n	\n  <span class="token comment">// ...</span>\n  <span class="token comment">// ...</span>\n  <span class="token comment">// ...</span>\n\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6ã€service" tabindex="-1"><a class="header-anchor" href="#_6ã€service" aria-hidden="true">#</a> 6ã€Service</h4><p>æ ¹æ®æŠ¥é”™å¯çŸ¥ serviceå±‚ç¼ºå°‘ä¸€ä¸ªæ–¹æ³•validInterfaceInfo</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**\n * <span class="token keyword">@author</span> xuan\n * <span class="token keyword">@description</span> é’ˆå¯¹è¡¨ã€interface_info(æ¥å£ä¿¡æ¯)ã€‘çš„æ•°æ®åº“æ“ä½œServiceå®ç°\n * <span class="token keyword">@createDate</span> 2023-01-12 16:11:19\n */</span>\n<span class="token annotation punctuation">@Service</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterfaceInfoServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">InterfaceInfoMapper</span><span class="token punctuation">,</span> <span class="token class-name">InterfaceInfo</span><span class="token punctuation">&gt;</span></span>\n		<span class="token keyword">implements</span> <span class="token class-name">InterfaceInfoService</span> <span class="token punctuation">{</span>\n\n	<span class="token annotation punctuation">@Override</span>\n	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">validInterfaceInfo</span><span class="token punctuation">(</span><span class="token class-name">InterfaceInfo</span> interfaceInfo<span class="token punctuation">,</span> <span class="token keyword">boolean</span> add<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n		<span class="token keyword">if</span> <span class="token punctuation">(</span>interfaceInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token punctuation">}</span>\n\n		<span class="token class-name">String</span> name <span class="token operator">=</span> interfaceInfo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token class-name">String</span> description <span class="token operator">=</span> interfaceInfo<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token class-name">String</span> url <span class="token operator">=</span> interfaceInfo<span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token class-name">String</span> requestHeader <span class="token operator">=</span> interfaceInfo<span class="token punctuation">.</span><span class="token function">getRequestHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token class-name">String</span> responseHeader <span class="token operator">=</span> interfaceInfo<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token class-name">Integer</span> status <span class="token operator">=</span> interfaceInfo<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token class-name">String</span> method <span class="token operator">=</span> interfaceInfo<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token class-name">Long</span> userId <span class="token operator">=</span> interfaceInfo<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n		<span class="token comment">// åˆ›å»ºæ—¶ï¼Œæ‰€æœ‰å‚æ•°å¿…é¡»éç©º</span>\n		<span class="token keyword">if</span> <span class="token punctuation">(</span>add<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isAnyBlank</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> description<span class="token punctuation">,</span> url<span class="token punctuation">,</span> requestHeader<span class="token punctuation">,</span> responseHeader<span class="token punctuation">,</span> method<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">anyNull</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n			<span class="token punctuation">}</span>\n		<span class="token punctuation">}</span>\n		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;åå­—è¿‡é•¿&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token punctuation">}</span>\n		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> description<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">512</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;æè¿°è¿‡é•¿&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n		<span class="token punctuation">}</span>\n	<span class="token punctuation">}</span>\n\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„å¤§é‡getter æ˜¯ä½¿ç”¨æ’ä»¶ <strong>GenerateAllSetter</strong> ç”Ÿæˆ macOSåœ¨å˜é‡ä¸Šæ‘ä½ option + Enter å³å¯</p><h3 id="_3ã€å‰ç«¯" tabindex="-1"><a class="header-anchor" href="#_3ã€å‰ç«¯" aria-hidden="true">#</a> 3ã€å‰ç«¯</h3><hr><h4 id="_1ã€é…ç½®æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_1ã€é…ç½®æ’ä»¶" aria-hidden="true">#</a> 1ã€é…ç½®æ’ä»¶</h4><p>ä¸ºäº†é¡¹ç›®æ›´åŠ è§„èŒƒ</p><blockquote><p>æœç´¢ <strong>eslint</strong> é€‰ä¸Šè‡ªåŠ¨è¯†åˆ«</p></blockquote><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247769.png" alt="image-20230112193957977" loading="lazy"></p><blockquote><p>æœç´¢<strong>prettier</strong> æ‰“âˆš ç¾åŒ–ä»£ç </p></blockquote><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247824.png" alt="image-20230112194107217" loading="lazy"></p><h4 id="_2ã€æ¥å£è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_2ã€æ¥å£è°ƒç”¨" aria-hidden="true">#</a> 2ã€æ¥å£è°ƒç”¨</h4><p>ä½¿ç”¨ <strong>oneapi</strong> æ’ä»¶è‡ªåŠ¨ç”Ÿæˆ</p><p>å¦‚æœè¦å‰ç«¯è‡ªåŠ¨ç”Ÿæˆï¼Œéœ€è¦å°†åç«¯çš„éµå¾ª<strong>openapi</strong>è§„èŒƒçš„<strong>json</strong>æ–‡æ¡£</p><blockquote><p>åç«¯çš„éµå¾ª<strong>openapi</strong>è§„èŒƒçš„<strong>json</strong>æ–‡æ¡£</p></blockquote><p>æ‰¾åˆ°æˆ‘ä»¬èµ·çš„åç«¯ä¸»é¡µ</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247037.png" alt="image-20230112195321863" loading="lazy"></p>',41),A={href:"http://localhost:7529/api/v3/api-docs",target:"_blank",rel:"noopener noreferrer"},T=p(`<p>å‘ç°å¦‚ä¸‹æ‰€ç¤º</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247090.png" alt="image-20230112195351679" loading="lazy"></p><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªurläº†</p><p>æ‰“å¼€configç›®å½•ä¸‹<strong>config.ts</strong> æ‰¾åˆ°<strong>openApi</strong> ä¿®æ”¹å¦‚ä¸‹</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  openAPI<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// {</span>
    <span class="token comment">//   requestLibPath: &quot;import { request } from &#39;@umijs/max&#39;&quot;,</span>
    <span class="token comment">//   // æˆ–è€…ä½¿ç”¨åœ¨çº¿çš„ç‰ˆæœ¬</span>
    <span class="token comment">//   // schemaPath: &quot;https://gw.alipayobjects.com/os/antfincdn/M%24jrzTTYJN/oneapi.json&quot;</span>
    <span class="token comment">//   schemaPath: join(__dirname, &#39;oneapi.json&#39;),</span>
    <span class="token comment">//   mock: false,</span>
    <span class="token comment">// },</span>
    <span class="token punctuation">{</span>
      requestLibPath<span class="token operator">:</span> <span class="token string">&quot;import { request } from &#39;@umijs/max&#39;&quot;</span><span class="token punctuation">,</span>
      schemaPath<span class="token operator">:</span> <span class="token string">&#39;http://localhost:7529/api/v3/api-docs&#39;</span><span class="token punctuation">,</span>
      projectName<span class="token operator">:</span> <span class="token string">&#39;api-platform-backend&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½ç”¨</p><blockquote><p>æ‰¾åˆ°<strong>package.json</strong>,æ‰§è¡Œ<strong>openapi</strong>å‘½ä»¤</p></blockquote><p>æ‰§è¡ŒæˆåŠŸï¼Œæˆ‘ä»¬å»<strong>service</strong>çœ‹ä¸€ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247139.png" alt="image-20230112195813202" loading="lazy"></p><p>ç”±äºæˆ‘ä»¬æœ‰åç«¯ ï¼Œåº”è¯·æ±‚çœŸå®ç¯å¢ƒï¼Œæ‰€ä»¥ç›´æ¥ç”¨<strong>devæ¨¡å¼</strong>è¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> run start:dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯ä»¥å°†é¡¹ç›®ä¸­çš„<strong>requestErrorConfig.ts</strong>æ”¹ä¸º<strong>requestConfig.ts</strong></p><p>ç„¶ååœ¨<strong>app.tsx</strong> æ‰¾åˆ° requesté…ç½®ï¼Œå°†å…¶ä¿®æ”¹æˆæˆ‘ä»¬æ”¹çš„</p><p>å†æ‰“å¼€<strong>requestConfig.ts</strong></p><p>ä¿®æ”¹åå­—ï¼Œå¹¶è®¾ç½®ä¸€ä¸‹åç«¯åœ°å€</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247202.png" alt="image-20230112200749537" loading="lazy"></p><p><strong>æµ‹è¯•ä¸€ä¸‹</strong></p><p>ä½¿ç”¨å®ƒæç¤ºè´¦æˆ·å¯†ç ç™»å½•ï¼Œå¤±è´¥äº†</p><p>æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹å‘ç°æ˜¯<strong>å‰åç«¯æ¥å£å®šä¹‰ä¸ä¸€è‡´</strong></p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247271.png" alt="image-20230112201646377" loading="lazy"></p><h4 id="_3ã€ä¿®æ”¹ç™»å½•çš„æ¥å£" tabindex="-1"><a class="header-anchor" href="#_3ã€ä¿®æ”¹ç™»å½•çš„æ¥å£" aria-hidden="true">#</a> 3ã€ä¿®æ”¹ç™»å½•çš„æ¥å£</h4><p>æ‰¾åˆ°<strong>src/pages/User/Login/index.tsx</strong>ä¸‹çš„<strong>handleSubmit</strong></p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>UserLoginRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç™»å½•</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">userLoginUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>values <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> urlParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">.</span>searchParams<span class="token punctuation">;</span>
        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>urlParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;redirect&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> defaultLoginFailureMessage <span class="token operator">=</span> intl<span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">&#39;pages.login.failure&#39;</span><span class="token punctuation">,</span>
        defaultMessage<span class="token operator">:</span> <span class="token string">&#39;ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•ï¼&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>defaultLoginFailureMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç çš„å­—æ®µå’Œæˆ‘ä»¬åç«¯ä¸€æ ·</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProFormText</span></span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userAccount<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">fieldProps</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
    size<span class="token operator">:</span> <span class="token string">&#39;large&#39;</span><span class="token punctuation">,</span>
      prefix<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserOutlined</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">placeholder</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>intl<span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">&#39;pages.login.username.placeholder&#39;</span><span class="token punctuation">,</span>
    defaultMessage<span class="token operator">:</span> <span class="token string">&#39;ç”¨æˆ·å: admin or user&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">rules</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span>
          <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pages.login.username.required<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">defaultMessage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·è¾“å…¥ç”¨æˆ·å!<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›ç™»å½•é¡µé¢ï¼Œè¿›è¡Œç™»å½•</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247324.png" alt="image-20230112202314036" loading="lazy"></p><p>è¯·æ±‚æˆåŠŸä½†æ˜¯æ²¡è·³è½¬</p><p>ä¸ºä»€ä¹ˆæ²¡è·³è½¬ï¼Ÿå› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®°å½•ç”¨æˆ·çš„<strong>ç™»å½•æ€</strong>ï¼Œä¸çŸ¥é“å®ƒæ˜¯å¦ç™»å½•æˆåŠŸ</p><p><strong>è®¾ç½®ç”¨æˆ·çš„ç™»å½•æ€</strong></p><p>å›åˆ°<strong>app.tsx</strong></p><p>æ‰¾åˆ°**getInitialState()**è¿™ä¸ªæ–¹æ³•</p><p>è¿™ä¸ªæ–¹æ³•å½“æˆ‘ä»¬é¦–æ¬¡è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œè·å–ç”¨æˆ·çš„ä¿¡æ¯ï¼Œè·å–å½“å‰å…¨å±€çš„ä¸€äº›çŠ¶æ€ï¼Œå¯ä»¥æŠŠå®ƒå½“æˆå…¨å±€å˜é‡</p><p>æˆ‘ä»¬å…ˆæ‰¾åˆ°<strong>typings.d.ts</strong></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// æœ€åé¢æ·»åŠ </span>
<span class="token doc-comment comment">/**
 * å…¨å±€çŠ¶æ€ç±»å‹
 */</span>
<span class="token keyword">interface</span> <span class="token class-name">InitialState</span> <span class="token punctuation">{</span>
  loginUser<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>UserVO<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›**getInitialState()**å°†å®ƒæ”¹ä¸º</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getInitialState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>InitialState<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// å½“é¡µé¢é¦–æ¬¡åŠ è½½æ—¶ï¼Œè·å–è¦å…¨å±€ä¿å­˜çš„ä¿¡æ¯æ¯”å¦‚ç”¨æˆ·ä¿¡æ¯</span>
  <span class="token keyword">const</span> state<span class="token operator">:</span> InitialState <span class="token operator">=</span> <span class="token punctuation">{</span>
    loginUser<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getLoginUserUsingGET</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>loginUser <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>loginPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›<strong>src/pages/User/Login/index.tsx</strong>ä¸‹çš„<strong>handleSubmit</strong></p><p>è®¾ç½®ç™»å½•çŠ¶æ€</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>UserLoginRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç™»å½•</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">userLoginUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>values <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> urlParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">.</span>searchParams<span class="token punctuation">;</span>
        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>urlParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;redirect&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setInitialState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          loginUser<span class="token operator">:</span> res<span class="token punctuation">.</span>data
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> defaultLoginFailureMessage <span class="token operator">=</span> intl<span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">&#39;pages.login.failure&#39;</span><span class="token punctuation">,</span>
        defaultMessage<span class="token operator">:</span> <span class="token string">&#39;ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•ï¼&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>defaultLoginFailureMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247806.png" alt="image-20230113103454564" loading="lazy"></p><p>æˆåŠŸè¿›å…¥</p><p><strong>Butï¼Œ æœ‰bugï¼Œæˆ‘ä»¬åˆ·æ–°ä¸€ä¸‹å‘ç°åˆè¦é‡æ–°ç™»å½•ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</strong></p><p>æˆ‘ä»¬æ¨æµ‹æ˜¯å‰ç«¯å‘åç«¯å‘é€è¯·æ±‚çš„æ—¶å€™æ²¡æœ‰å¸¦ä¸Š<strong>cookie</strong>ï¼ï¼ï¼</p><p>æ‰¾åˆ°<strong>requestConfig.ts</strong></p><p>æ·»åŠ </p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>withCredentials<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> requestConfig<span class="token operator">:</span> RequestConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> <span class="token string">&#39;http://localhost:7529&#39;</span><span class="token punctuation">,</span>
  withCredentials<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ·æ–°æµ‹è¯•ä¸€ä¸‹ é—®é¢˜è§£å†³</p><h4 id="_4ã€æ³¨é”€" tabindex="-1"><a class="header-anchor" href="#_4ã€æ³¨é”€" aria-hidden="true">#</a> 4ã€æ³¨é”€</h4><p>å’Œç™»å½•å·®ä¸å¤šï¼ŒåŒç†</p><p>å…¨å±€æœç´¢logout</p><p>å‘ç°åœ¨<strong>src/components/RightContent/AvatarDropdown.tsx</strong>ä¸­æœ‰loginOut() å°†å…¶æ”¹æˆæˆ‘ä»¬çš„åç«¯æ–¹æ³•</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token keyword">const</span> onMenuClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>event<span class="token operator">:</span> MenuInfo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> key <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#39;logout&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">flushSync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setInitialState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>s<span class="token punctuation">,</span> currentUser<span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">userLogoutUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/account/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>setInitialState<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è‡ªåŠ¨ç”Ÿæˆçš„å¥½å¤„</strong></p><p>å¦‚æœæˆ‘ä»¬åç«¯çš„å®ä½“ç±»ä¿®æ”¹äº†,æˆ‘ä»¬å¯ä»¥ç›´æ¥è¿è¡Œ <strong>openapi</strong> æ¥ç›´æ¥æ›´æ–°</p><h4 id="_5ã€ç®¡ç†æƒé™" tabindex="-1"><a class="header-anchor" href="#_5ã€ç®¡ç†æƒé™" aria-hidden="true">#</a> 5ã€ç®¡ç†æƒé™</h4><p>æ˜¯å¦ä¸ºç®¡ç†å‘˜</p><p>æ‰“å¼€<strong>access.ts</strong></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@see</span> https://umijs.org/zh-CN/plugins/plugin-access
 * */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">access</span><span class="token punctuation">(</span>initialState<span class="token operator">:</span> <span class="token punctuation">{</span> currentUser<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>CurrentUser <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> currentUser <span class="token punctuation">}</span> <span class="token operator">=</span> initialState <span class="token operator">??</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    canAdmin<span class="token operator">:</span> currentUser <span class="token operator">&amp;&amp;</span> currentUser<span class="token punctuation">.</span>access <span class="token operator">===</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

å°†canAdminæ”¹æˆ
canAdmin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘ç°å‰ç«¯ç®¡ç†ç•Œé¢å‡ºæ¥äº†ï¼Œæ‰€ä»¥é€»è¾‘å°±æ˜¯åœ¨è¿™é‡Œæ§åˆ¶çš„</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247869.png" alt="image-20230113104939414" loading="lazy"></p><p>æ‰€ä»¥ä»£ç ä¿®æ”¹å¦‚ä¸‹</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">access</span><span class="token punctuation">(</span>initialState<span class="token operator">:</span> InitialState <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> loginUser <span class="token punctuation">}</span> <span class="token operator">=</span> initialState <span class="token operator">??</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    canUser<span class="token operator">:</span> loginUser<span class="token punctuation">,</span>
    canAdmin<span class="token operator">:</span> loginUser<span class="token operator">?.</span>userRole <span class="token operator">===</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6ã€è¡¨æ ¼é¡µé¢" tabindex="-1"><a class="header-anchor" href="#_6ã€è¡¨æ ¼é¡µé¢" aria-hidden="true">#</a> 6ã€è¡¨æ ¼é¡µé¢</h4><p>æ‰¾åˆ°<strong>src/pages/TableList/index.tsx</strong></p><p>æ‰¾åˆ°<strong>columns</strong></p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247903.png" alt="image-20230113112228199" loading="lazy"></p><p>æ¢æˆæˆ‘ä»¬è‡ªå·±çš„</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">const</span> columns<span class="token operator">:</span> ProColumns<span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;index&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;æ¥å£åç§°&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;æè¿°&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;textarea&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;è¯·æ±‚æ–¹æ³•&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;method&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;è¯·æ±‚å¤´&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;requestHeader&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;textarea&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;å“åº”å¤´&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;responseHeader&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;textarea&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;çŠ¶æ€&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;status&#39;</span><span class="token punctuation">,</span>
      hideInForm<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      valueEnum<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          text<span class="token operator">:</span> <span class="token string">&#39;å…³é—­&#39;</span><span class="token punctuation">,</span>
          status<span class="token operator">:</span> <span class="token string">&#39;Default&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          text<span class="token operator">:</span> <span class="token string">&#39;å¼€å¯&#39;</span><span class="token punctuation">,</span>
          status<span class="token operator">:</span> <span class="token string">&#39;Processing&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;createTime&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;dateTime&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;updateTime&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;dateTime&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;æ“ä½œ&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;option&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;option&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
          <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>config<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">handleUpdateModalVisible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setCurrentRow</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          é…ç½®
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subscribeAlert<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://procomponents.ant.design/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          è®¢é˜…è­¦æŠ¥
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŠ è½½å‡ºæ¥äº†</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247953.png" alt="image-20230113113509859" loading="lazy"></p><p>ä½†æ˜¯æ²¡æœ‰æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒæœ‰æ•°æ®</p><p>å‘ä¸‹æ‰¾ï¼Œå‘ç°æœ‰ä¸€ä¸ª<strong>request</strong>æˆ‘ä»¬éœ€è¦å°†ä»–æ”¹æˆè‡ªå·±çš„listInterfaceInfoByPageUsingGET è¿™æ ·å°±æœ‰æ•°æ®äº†</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247990.png" alt="image-20230113113932612" loading="lazy"></p><p>åˆ·æ–°æŸ¥çœ‹é¡µé¢</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247038.png" alt="image-20230113114748766" loading="lazy"></p><p>æ— æ³•åŠ è½½ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°æ•°æ®å·²ç»æœ‰äº†</p><p>å¯¹äºè¿™ç§é”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥</p><ul><li>ä½ çš„è¯·æ±‚å‚æ•°å’Œä»–çš„è¯·æ±‚å‚æ•°æ˜¯å¦ä¸€è‡´</li><li>ä½ çš„å“åº”å€¼å’Œä»–è¦æ±‚çš„å“åº”å€¼æ˜¯å¦ä¸€è‡´</li></ul><p>æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å®Œå…¨æ›¿æ¢</p><p>æŸ¥çœ‹<strong>request</strong>çš„è¯·æ±‚å‚æ•°</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>request<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>params<span class="token operator">:</span> <span class="token constant">U</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  pageSize<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  current<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  keyword<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> sort<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> SortOrder<span class="token operator">&gt;</span><span class="token punctuation">,</span> filter<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> React<span class="token punctuation">.</span>ReactText<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Partial<span class="token operator">&lt;</span>RequestData<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨<strong>request</strong>åœ¨ç‚¹å‡»<strong>RequestData</strong> æŸ¥çœ‹å“åº”å‚æ•°</p><div class="language-type line-numbers-mode" data-ext="type"><pre class="language-type"><code>export type RequestData&lt;T&gt; = {
    data: T[] | undefined;
    success?: boolean;
    total?: number;
} &amp; Record&lt;string, any&gt;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥åˆšåˆšç®€å•æ›¿æ¢è¯·æ±‚æ–¹æ³•çš„ä»£ç æˆ‘ä»¬é‡æ–°å†™</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>			request<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span>
         params<span class="token operator">:</span> <span class="token punctuation">{</span>
         pageSize<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
         current<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
         keyword<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> sort<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> SortOrder<span class="token operator">&gt;</span><span class="token punctuation">,</span>  filter<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> React<span class="token punctuation">.</span>ReactText<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">listInterfaceInfoByPageUsingGET</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>params <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
              data<span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>records <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              success<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              total<span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
              data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              success<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ·æ–°é¡µé¢ï¼Œæ˜¾ç¤ºæˆåŠŸ</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247331.png" alt="image-20230113121556718" loading="lazy"></p><h2 id="äºŒã€åŸºç¡€å¢åˆ æ”¹æŸ¥" tabindex="-1"><a class="header-anchor" href="#äºŒã€åŸºç¡€å¢åˆ æ”¹æŸ¥" aria-hidden="true">#</a> äºŒã€åŸºç¡€å¢åˆ æ”¹æŸ¥</h2><hr><h3 id="_1ã€ä¿®æ”¹è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_1ã€ä¿®æ”¹è·¯ç”±" aria-hidden="true">#</a> 1ã€ä¿®æ”¹è·¯ç”±</h3><hr><p>æ‰“å¼€<strong>config</strong>åŒ…æ‰¾åˆ° <strong>routes.ts</strong></p><p>å°†åŸæ¥pagesä¸‹çš„<strong>TableList</strong>è¡¨å•åç§°æ”¹ä¸ºæˆ‘ä»¬çš„<strong>interfaceInfo</strong>ï¼Œå†æŠŠæ¥å£ç®¡ç†é¡µé¢é…ç½®åˆ°ç®¡ç†å‘˜é¡µé¢ä¸‹</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;æ¥å£ç®¡ç†&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;table&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/admin/interface_info&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&#39;./InterfaceInfo&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span>
    layout<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;login&#39;</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/user/login&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> <span class="token string">&#39;./User/Login&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/welcome&#39;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#39;welcome&#39;</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> <span class="token string">&#39;smile&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token string">&#39;./Welcome&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/admin&#39;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> <span class="token string">&#39;crown&#39;</span><span class="token punctuation">,</span>
    access<span class="token operator">:</span> <span class="token string">&#39;canAdmin&#39;</span><span class="token punctuation">,</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/admin&#39;</span><span class="token punctuation">,</span>
        redirect<span class="token operator">:</span> <span class="token string">&#39;/admin/sub-page&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/admin/sub-page&#39;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&#39;sub-page&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> <span class="token string">&#39;./Admin&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;æ¥å£ç®¡ç†&#39;</span><span class="token punctuation">,</span>
        icon<span class="token operator">:</span> <span class="token string">&#39;table&#39;</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token string">&#39;/admin/interface_info&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> <span class="token string">&#39;./InterfaceInfo&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">&#39;/welcome&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span>
    layout<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token string">&#39;./404&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247400.png" alt="image-20230113145422228" loading="lazy"></p><h3 id="_2ã€æ–°å¢æ¥å£ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_2ã€æ–°å¢æ¥å£ä¿¡æ¯" aria-hidden="true">#</a> 2ã€æ–°å¢æ¥å£ä¿¡æ¯</h3><hr><h4 id="_1-è¡¨å•æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_1-è¡¨å•æ¨¡å—" aria-hidden="true">#</a> 1ï¼‰è¡¨å•æ¨¡å—</h4><p><strong>interfaceInfo</strong>ä¸­çš„<strong>index.tsx</strong>æ‰¾åˆ°æ–°å»ºçš„Button</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247432.png" alt="image-20230113153334776" loading="lazy"></p><p>æˆ‘ä»¬ç‚¹å‡»æ–°å»ºçš„æ—¶å€™ï¼Œä»–ä¼šæ‰“å¼€ä¸€ä¸ªæ¨¡æ€æ¡†ã€‚å¾€ä¸‹æ‰¾ï¼Œå‘ç°å®ƒå·²ç»ç»™æˆ‘ä»¬æä¾›äº†è¿™ä¸ªç»„ä»¶ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦é‡æ–°å†™</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247546.png" alt="image-20230113153512970" loading="lazy"></p><p>æˆ‘ä»¬å¯ä»¥å°±åƒæ›´æ–°æ¨¡æ€æ¡†ä¸€æ ·æ–°å»ºä¸€ä¸ªCreateModal.tsx</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247804.png" alt="image-20230113153639726" loading="lazy"></p><p>æ¥ä¸‹æ¥ä¿®æ”¹ä»UpdateFormä¸­ç²˜è´´çš„<strong>CreateModal.tsx</strong>çš„ä»£ç </p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ProColumns<span class="token punctuation">,</span> ProTable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;@umijs/max&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  columns<span class="token operator">:</span> ProColumns<span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function-variable function">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">onSubmit</span><span class="token operator">:</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  open<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> CreateModal<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> columns<span class="token punctuation">,</span> open<span class="token punctuation">,</span> onCancel <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>open<span class="token punctuation">}</span></span> <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> onCancel<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProTable</span></span> <span class="token attr-name">columns</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> CreateModal<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¿™é‡Œæˆ‘ä»¬å¤ç”¨äº†indexä¸­çš„columns</strong> è¿™é‡Œæˆ‘é¡ºä¾¿æŠŠå–æ¶ˆä¹Ÿå†™äº†</p><p>åœ¨<strong>index.tsx</strong>ä¸­ä½¿ç”¨</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token comment">/**
   * @en-US Pop-up window of new window
   * @zh-CN æ–°å»ºçª—å£çš„å¼¹çª—
   *  */</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>createModalOpen<span class="token punctuation">,</span> handleModalOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
 	<span class="token keyword">const</span> columns<span class="token operator">:</span> ProColumns<span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;index&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token comment">// ...</span>
  <span class="token punctuation">]</span>

	<span class="token comment">// ...</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CreateModal</span></span>
    <span class="token attr-name">columns</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span></span>
    <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleModalOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>createModalOpen<span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ä¸€ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247927.png" alt="image-20230113164234500" loading="lazy"></p><p>emmmm... è¿™æ˜¯ä»€ä¹ˆç©æ„??</p><p>æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£å¯çŸ¥ï¼Œè¿™æ˜¯ProTableçš„é»˜è®¤type æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™å®ƒæŒ‡å®šä¸€ä¸ªformçš„type</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">const</span> CreateModal<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> columns<span class="token punctuation">,</span> open<span class="token punctuation">,</span> onCancel <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>open<span class="token punctuation">}</span></span> <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> onCancel<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProTable</span></span> <span class="token attr-name">columns</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;form&#39;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æµ‹è¯•ä¸€ä¸‹å°±æ­£å¸¸å•¦~</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247967.png" alt="image-20230113164846052" loading="lazy"></p><p>å‘ç°åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´æˆ‘ä»¬å¹¶ä¸éœ€è¦ã€‚å¢åŠ hideInFormå±æ€§</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;createTime&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;dateTime&#39;</span><span class="token punctuation">,</span>
      hideInForm<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;updateTime&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;dateTime&#39;</span><span class="token punctuation">,</span>
      hideInForm<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-è¯·æ±‚åç«¯" tabindex="-1"><a class="header-anchor" href="#_2-è¯·æ±‚åç«¯" aria-hidden="true">#</a> 2ï¼‰è¯·æ±‚åç«¯</h4><p><strong>å…ˆç®€å•å¤„ç†ä¸€ä¸‹è¯·æ±‚æŠ¥é”™çš„æƒ…å†µ</strong></p><p>æ‰¾åˆ°src/requestConfig.ts ä¿®æ”¹ä¸€ä¸‹å“åº”æ‹¦æˆªå™¨</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>  <span class="token comment">// å“åº”æ‹¦æˆªå™¨</span>
  responseInterceptors<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ‹¦æˆªå“åº”æ•°æ®ï¼Œè¿›è¡Œä¸ªæ€§åŒ–å¤„ç†</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> response <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> ResponseStructure<span class="token punctuation">;</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> response<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†åœ¨interfaceinfo/index.tsxä¸­æ–°å¢è¯·æ±‚åç«¯çš„æ–¹æ³•</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token keyword">const</span> <span class="token function-variable function">handleAddInterfaceInfo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>fields<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfoAddRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hide <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token string">&#39;æ­£åœ¨æ·»åŠ &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">addInterfaceInfoUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>fields <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;åˆ›å»ºæˆåŠŸ!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// å…³é—­Modal</span>
      <span class="token function">handleModalOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;åˆ›å»ºå¤±è´¥!&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CreateModal</span></span>
  <span class="token attr-name">columns</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span></span>
  <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleModalOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleAddInterfaceInfo</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>createModalOpen<span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†ä¿®æ”¹CreateModal.tsx</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">const</span> CreateModal<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> columns<span class="token punctuation">,</span> open<span class="token punctuation">,</span> onCancel<span class="token punctuation">,</span> onSubmit <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;æ–°å»ºæ¥å£&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>open<span class="token punctuation">}</span></span> <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> onCancel<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProTable</span></span> <span class="token attr-name">columns</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;form&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> onSubmit<span class="token operator">?.</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•æ·»åŠ æˆåŠŸ</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247023.png" alt="image-20230113183349785" loading="lazy"></p><h3 id="_3ã€ç¼–è¾‘æ¥å£ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_3ã€ç¼–è¾‘æ¥å£ä¿¡æ¯" aria-hidden="true">#</a> 3ã€ç¼–è¾‘æ¥å£ä¿¡æ¯</h3><hr>`,135),P=n("p",{null:""},"å…ˆæŠŠModalçš„footerå¹²æ‰ footer=",-1),O=p(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token operator">&lt;</span>Modal title<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;æ›´æ–°æ¥å£&#39;</span><span class="token punctuation">}</span> footer<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span> open<span class="token operator">=</span><span class="token punctuation">{</span>open<span class="token punctuation">}</span> onCancel<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> onCancel<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
		  <span class="token comment">// ...</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-è¡¨å•æ¨¡å—-1" tabindex="-1"><a class="header-anchor" href="#_1-è¡¨å•æ¨¡å—-1" aria-hidden="true">#</a> 1ï¼‰è¡¨å•æ¨¡å—</h4><p>æ–°å»ºæ–‡ä»¶src/pages/InterfaceInfo/components/UpdateModal.tsx</p>`,3),B={href:"https://procomponents.ant.design/components/table##%E9%80%9A%E8%BF%87-formref-%E6%9D%A5%E6%93%8D%E4%BD%9C%E6%9F%A5%E8%AF%A2%E8%A1%A8%E5%8D%95",target:"_blank",rel:"noopener noreferrer"},M=p(`<div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>useEffect<span class="token punctuation">,</span> useRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ProColumns<span class="token punctuation">,</span> ProFormInstance<span class="token punctuation">,</span> ProTable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;@umijs/max&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token punctuation">;</span>
  columns<span class="token operator">:</span> ProColumns<span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfoUpdateRequest<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function-variable function">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">onSubmit</span><span class="token operator">:</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfoUpdateRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  open<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> UpdateModal<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> columns<span class="token punctuation">,</span> open<span class="token punctuation">,</span> onCancel<span class="token punctuation">,</span> onSubmit <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>

  <span class="token keyword">const</span> formRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>ProFormInstance<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>formRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      formRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">setFieldsValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;æ›´æ–°æ¥å£&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span> <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>open<span class="token punctuation">}</span></span> <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> onCancel<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProTable</span></span>
        <span class="token attr-name">columns</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span></span>
        <span class="token attr-name">formRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>formRef<span class="token punctuation">}</span></span>
        <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;form&#39;</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> onSubmit<span class="token operator">?.</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token comment">// è®¾ç½®é»˜è®¤å€¼</span>
        <span class="token attr-name">form</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> initialValues<span class="token operator">:</span> value <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> UpdateModal<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-è¯·æ±‚åç«¯-1" tabindex="-1"><a class="header-anchor" href="#_2-è¯·æ±‚åç«¯-1" aria-hidden="true">#</a> 2ï¼‰è¯·æ±‚åç«¯</h4><p>åœ¨interfaceinfo/index.tsxä¸­æ–°å¢è¯·æ±‚åç«¯çš„æ–¹æ³•</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token comment">/**
   * @en-US Update InterfaceInfo
   * @zh-CN æ›´æ–°æ¥å£ä¿¡æ¯
   *
   * @param updateValue
   */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleUpdateInterfaceInfo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>updateValue<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfoUpdateRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hide <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token string">&#39;æ­£åœ¨æ›´æ–°&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateInterfaceInfoUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>updateValue <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">handleUpdateModalOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;æ›´æ–°æˆåŠŸ!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;æ›´æ–°å¤±è´¥!&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>      



<span class="token comment">// è¿™é‡Œçš„&lt;UpdateModal/&gt;ä»£ç æ˜¯åœ¨åŸæœ‰çš„ &lt;UpdateForm/&gt; åŸºç¡€ä¸Šé¢æ”¹çš„</span>
<span class="token operator">&lt;</span>UpdateModal
        value<span class="token operator">=</span><span class="token punctuation">{</span>currentRow <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span>
        open<span class="token operator">=</span><span class="token punctuation">{</span>updateModalOpen<span class="token punctuation">}</span>
        onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> success <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">handleUpdateInterfaceInfo</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">handleUpdateModalOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setCurrentRow</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>actionRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              actionRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
        onCancel<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">handleUpdateModalOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>showDetail<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setCurrentRow</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡ºé”™äº†ï¼ŒçŒœæµ‹æ˜¯Ant Design Proçš„é—®é¢˜ï¼ŒçŒœé”™äº†ï¼Œå…¶å®æ˜¯columnsä¸­çš„idçš„typeä¸ºindexçš„åŸå› ã€‚å¹¶æ²¡æœ‰idå­—æ®µï¼Œæ‰€ä»¥æˆ‘æ‰‹åŠ¨ç»™ä¸€ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247452.png" alt="image-20230113222955554" loading="lazy"></p><p>ä¿®æ”¹ä»£ç å¦‚ä¸‹</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token comment">/**
   * @en-US Update InterfaceInfo
   * @zh-CN æ›´æ–°æ¥å£ä¿¡æ¯
   *
   * @param fields
   */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleUpdateInterfaceInfo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>fields<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfoUpdateRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hide <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token string">&#39;æ­£åœ¨æ›´æ–°&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>currentRow<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateInterfaceInfoUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// å› ä¸ºcolumnsä¸­çš„id valueTypeä¸ºindex ä¸ä¼šä¼ é€’ æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨èµ‹å€¼id</span>
        id<span class="token operator">:</span> currentRow<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        <span class="token operator">...</span>fields<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">handleUpdateModalOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;æ›´æ–°æˆåŠŸ!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ·æ–°é¡µé¢</span>
        actionRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;æ›´æ–°å¤±è´¥!&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•æ›´æ–°æˆåŠŸ~</p><h3 id="_4ã€åˆ é™¤æ¥å£ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_4ã€åˆ é™¤æ¥å£ä¿¡æ¯" aria-hidden="true">#</a> 4ã€åˆ é™¤æ¥å£ä¿¡æ¯</h3><hr><p><strong>åˆ é™¤æŒ‰é’®</strong></p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token comment">// åœ¨columnsä¸­æ·»åŠ åˆ é™¤æŒ‰é’®	</span>
<span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;æ“ä½œ&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;option&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;option&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
          <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>config<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">handleUpdateModalOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setCurrentRow</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          ç¼–è¾‘
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
          <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">handleRemoveInterfaceInfo</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          åˆ é™¤
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è°ƒç”¨æ–¹æ³•</strong></p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token keyword">const</span> <span class="token function-variable function">handleRemoveInterfaceInfo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>record<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hide <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token string">&#39;æ­£åœ¨åˆ é™¤&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>record<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">deleteInterfaceInfoUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> record<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;åˆ é™¤æˆåŠŸ!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// åˆ·æ–°é¡µé¢</span>
      actionRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;åˆ é™¤å¤±è´¥!&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•åˆ é™¤æˆåŠŸ~</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247498.png" alt="image-20230114154218713" loading="lazy"></p><h2 id="ä¸‰ã€apiå¼€å‘" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€apiå¼€å‘" aria-hidden="true">#</a> ä¸‰ã€APIå¼€å‘</h2><hr><h3 id="_1ã€æ¨¡æ‹Ÿæ¥å£" tabindex="-1"><a class="header-anchor" href="#_1ã€æ¨¡æ‹Ÿæ¥å£" aria-hidden="true">#</a> 1ã€æ¨¡æ‹Ÿæ¥å£</h3><hr><p><strong>åˆ›å»ºé¡¹ç›®</strong></p><p>å¿«é€Ÿåˆ›å»ºä¸€ä¸ªspring Booté¡¹ç›® å‹¾é€‰SpringWebã€Lombokã€Spring Boot DevTools</p><p><strong>æä¾›ä¸‰ä¸ªæ¨¡æ‹Ÿæ¥å£</strong></p><p>æ¥å£å¤§ä½“å†…å®¹</p><ol><li>GET æ¥å£</li><li>POST æ¥å£ï¼ˆurlä¼ å‚ï¼‰</li><li>POSTæ¥å£ï¼ˆRestfulï¼‰</li></ol><p>ç®€å•çš„é¡¹ç›®ç»“æ„</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247545.png" alt="image-20230114233348076" loading="lazy"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * æ¨¡æ‹Ÿæ¥å£
 * 
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/1/14
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/name&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NameController</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{name}&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameByGet</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;å‘é€GETè¯·æ±‚ ä½ çš„åå­—æ˜¯ï¼š&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameByPost</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;å‘é€POSTè¯·æ±‚ ä½ çš„åå­—æ˜¯ï¼š&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameByPostWithJson</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;å‘é€POSTè¯·æ±‚ JSONä¸­ä½ çš„åå­—æ˜¯ï¼š&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>application.ymlé…ç½®ä¸€ä¸‹ç«¯å£ã€ç„¶åæŒ‡å®šä¸€ä¸‹å…¨å±€æ¥å£çš„åœ°å€</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8123</span>
  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
    <span class="token key atrule">context-path</span><span class="token punctuation">:</span> /api
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€è°ƒç”¨æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2ã€è°ƒç”¨æ¥å£" aria-hidden="true">#</a> 2ã€è°ƒç”¨æ¥å£</h3><hr><p><strong>å‡ ç§HTTPçš„è°ƒç”¨æ–¹å¼ï¼š</strong></p><ol><li>HttpClient</li><li>RestTemplate</li><li>ç¬¬ä¸‰æ–¹åº“ï¼ˆOKHttpï¼ŒHutoolï¼‰</li></ol>`,35),D=n("strong",null,"Hutool",-1),F={href:"https://hutool.cn/docs/##/",target:"_blank",rel:"noopener noreferrer"},L=p(`<p>mavenä¸­æ·»åŠ </p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.8.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹æ–‡æ¡£ä¸­çš„Httpè¯·æ±‚ç›¸å…³ç”¨æ³• ç¼–å†™XuanApiClientç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>client</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>json<span class="token punctuation">.</span></span><span class="token class-name">JSONUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * è°ƒç”¨APIä½¿ç”¨
 *
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/1/15
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XuanApiClient</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameByGet</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">HttpUtil</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8123/api/name/&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameByPost</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// å¯ä»¥å•ç‹¬ä¼ å…¥httpå‚æ•°ï¼Œè¿™æ ·å‚æ•°ä¼šè‡ªåŠ¨åšURLç¼–ç ï¼Œæ‹¼æ¥åœ¨URLä¸­</span>
		<span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> paramMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		paramMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">HttpUtil</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8123/api/name&quot;</span><span class="token punctuation">,</span> paramMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameByPostWithJson</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">HttpResponse</span> response <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8123/api/name/user&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;response = &quot;</span> <span class="token operator">+</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;status = &quot;</span> <span class="token operator">+</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token string">&quot;fail&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºæµ‹è¯•ç±»è°ƒç”¨æµ‹è¯•</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247609.png" alt="image-20230115162508894" loading="lazy"></p><h2 id="å››ã€apiç­¾åè®¤è¯" tabindex="-1"><a class="header-anchor" href="#å››ã€apiç­¾åè®¤è¯" aria-hidden="true">#</a> å››ã€APIç­¾åè®¤è¯</h2><hr><p><strong>æœ¬è´¨ï¼š</strong></p><ol><li>ç­¾å‘ç­¾å</li><li>ä½¿ç”¨ç­¾åï¼ˆæ ¡éªŒç­¾åï¼‰</li></ol><p><strong>ä¸ºä»€ä¹ˆéœ€è¦</strong></p><p>ä¿è¯å®‰å…¨æ€§ï¼Œä¸èƒ½éšä¾¿ä¸€ä¸ªäººå°±å¯ä»¥è°ƒç”¨</p><p><strong>æ€ä¹ˆå®ç°</strong></p><ul><li><strong>accessKey</strong> è°ƒç”¨çš„æ ‡è¯†ï¼ˆå¤æ‚ï¼Œæ— åºï¼Œæ— è§„å¾‹ï¼‰</li><li><strong>secretKey</strong> å¯†é’¥ ï¼ˆå¤æ‚ï¼Œæ— åºï¼Œæ— è§„å¾‹ï¼‰</li></ul><p>ç±»ä¼¼<strong>ç”¨æˆ·å</strong>å’Œ<strong>å¯†ç </strong>ï¼ŒåŒºåˆ«ï¼šaccessKeyã€secretKeyæ˜¯<strong>æ— çŠ¶æ€</strong>çš„</p><p>åƒä¸‡ä¸èƒ½æŠŠå¯†é’¥ç›´æ¥åœ¨æœåŠ¡å™¨é—´è¿›è¡Œä¼ é€’ï¼Œæœ‰å¯èƒ½è¢«æ‹¦æˆª</p><p>åŠ å¯†çœ‹ç¬¬äºŒç‚¹</p><h3 id="_1ã€ä¿®æ”¹æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#_1ã€ä¿®æ”¹æ•°æ®åº“" aria-hidden="true">#</a> 1ã€ä¿®æ”¹æ•°æ®åº“</h3><hr><p>ç”±äºæˆ‘ä»¬çš„<strong>userè¡¨</strong>é‡Œé¢æ²¡æœ‰access_keyã€secret_key æ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹æ•°æ®åº“è¡¨</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token keyword">user</span>
<span class="token punctuation">(</span>
    id            <span class="token keyword">bigint</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">&#39;id&#39;</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    user_name     <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span>                           <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;ç”¨æˆ·æ˜µç§°&#39;</span><span class="token punctuation">,</span>
    user_account  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span>                           <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;è´¦å·&#39;</span><span class="token punctuation">,</span>
    user_avatar   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>                          <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;ç”¨æˆ·å¤´åƒ&#39;</span><span class="token punctuation">,</span>
    gender        <span class="token keyword">tinyint</span>                                <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ€§åˆ«&#39;</span><span class="token punctuation">,</span>
    user_role     <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&#39;user&#39;</span>            <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;ç”¨æˆ·è§’è‰²ï¼šuser / admin&#39;</span><span class="token punctuation">,</span>
    user_password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span>                           <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;å¯†ç &#39;</span><span class="token punctuation">,</span>
    access_key    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span>                           <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;access_key&#39;</span><span class="token punctuation">,</span>
    secret_key    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span>                           <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;secret_key&#39;</span><span class="token punctuation">,</span>
    create_time   <span class="token keyword">datetime</span>     <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>
    update_time   <span class="token keyword">datetime</span>     <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>
    is_delete     <span class="token keyword">tinyint</span>      <span class="token keyword">default</span> <span class="token number">0</span>                 <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ˜¯å¦åˆ é™¤&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">constraint</span> uni_user_account
        <span class="token keyword">unique</span> <span class="token punctuation">(</span>user_account<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;ç”¨æˆ·&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›´æ¥dropæ‰ä¹‹å‰çš„tableé‡æ–°å»ºè¡¨ï¼Œæ’å…¥ä¸€æ¡æµ‹è¯•æ•°æ®ã€‚</p><p>æ ‡å‡†çš„è¯ åº”è¯¥æ–°å»ºä¸€ä¸ªè¡¨ ä¸»è¦å­—æ®µä¸ºæ¥å£idã€ä½¿ç”¨ç”¨æˆ·idã€access_keyã€secret_keyç­‰ç­‰</p><h3 id="_2ã€åŠ å¯†" tabindex="-1"><a class="header-anchor" href="#_2ã€åŠ å¯†" aria-hidden="true">#</a> 2ã€åŠ å¯†</h3><hr><h4 id="_1ã€åŠ å¯†æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_1ã€åŠ å¯†æ–¹å¼" aria-hidden="true">#</a> 1ã€åŠ å¯†æ–¹å¼</h4><p>å°†accessKeyã€secretKeyæ”¾åœ¨Headeré‡Œæ˜æ–‡ä¼ é€’å®‰å…¨å—</p><p>ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„<strong>è¯·æ±‚å¯èƒ½è¢«äººæ‹¦æˆª</strong>ï¼Œè€Œæˆ‘ä»¬æŠŠå¯†ç æ”¾è¿›è¯·æ±‚å¤´é‡Œé¢ï¼Œå¯èƒ½ä¼šè¢«åˆ«äººè·å–</p><blockquote><p>ä¸€èˆ¬æ˜¯æ ¹æ®å¯†é’¥ï¼Œç”Ÿæˆ<strong>ç­¾åsign</strong></p></blockquote><p><strong>åŠ å¯†æ–¹å¼</strong></p><ol><li><p>â€‹ å¯¹ç§°åŠ å¯†</p></li><li><p>â€‹ éå¯¹ç§°åŠ å¯†</p></li><li><p>â€‹ md5 ç­¾åï¼ˆä¸å¯è§£å¯†ï¼‰</p></li></ol><p><strong>ç­¾åçš„åšæ³•</strong></p><p>å‡å¦‚ ï¼Œæˆ‘ä»¬æœ‰ç”¨æˆ·å‚æ•°ï¼Œæˆ‘ä»¬ç”¨å¯†é’¥ä¸ä»–æ‹¼æ¥ï¼Œç”¨ç­¾åç®—æ³•å¾—åˆ°ä¸€ä¸ªä¸å¯è§£å¯†çš„å€¼</p><p>â€‹ <strong>ç”¨æˆ·å‚æ•° + å¯†é’¥ =&gt; ç­¾åç”Ÿæˆç®—æ³•ï¼ˆMD5,HMac,Sha1) =&gt; ä¸å¯è§£å¯†çš„å€¼</strong></p><p>ä¾‹å­ï¼š xuan + abc =&gt; 7e7b9583aa0bc3e834fe8bcaebda38b5ï¼ˆè¿™é‡Œæ˜¯æˆ‘éšä¾¿è¾“çš„ï¼Œå¾—åˆ°çš„å€¼æ˜¯éšæœºçš„ï¼‰</p><p>æ€ä¹ˆçŸ¥é“ç­¾åå¯¹ä¸å¯¹ï¼Ÿ</p><p>æœåŠ¡ç«¯ç”¨ä¸€æ¨¡ä¸€æ ·çš„å‚æ•°å’Œç®—æ³•å»ç”Ÿæˆç­¾åï¼Œåªè¦å’Œç”¨æˆ·ä¼ çš„ä¸€è‡´ï¼Œå°±è¡¨ç¤ºå¯†é’¥ä¸€è‡´</p><p><strong>æ€ä¹ˆé˜²é‡æ”¾ï¼Ÿ</strong></p><p>åŠ nonceéšæœºæ•° åªèƒ½ç”¨ä¸€æ¬¡</p><p>æœåŠ¡ç«¯è¦ä¿å­˜ç”¨è¿‡çš„éšæœºæ•°</p><p>åŠ timestamp æ—¶é—´æˆ³ï¼Œæ ¡éªŒå®ƒçš„æœ‰æ•ˆæœŸ</p><p>ç»¼ä¸Šæ‰€å±</p><p><strong>ä¼ é€’çš„å‚æ•°</strong></p><ol><li>accessKey</li><li>sign ï¼ˆç”±accessKey(æˆ–è€…ä½¿ç”¨ç”¨æˆ·è¯·æ±‚å‚æ•°bodyç­‰)ã€secretKeyåŠ å¯†è€Œæ¥ï¼‰</li><li>nonceéšæœºæ•°</li><li>timestamp</li><li>bodyï¼ˆç”¨æˆ·è¯·æ±‚å‚æ•° å¯è¦å¯ä¸è¦ï¼‰</li></ol><p><strong>APIç­¾åè®¤è¯æ˜¯ä¸€ä¸ªå¾ˆçµæ´»çš„è®¾è®¡ï¼Œå…·ä½“è¦æœ‰å“ªäº›å‚æ•°ï¼Œå°½é‡æœåŠ¡ç«¯è°ƒç”¨ï¼Œå‚æ•°åå¦‚ä½•è¦æ ¹æ®åœºæ™¯æ¥ã€‚</strong></p><h4 id="_2ã€åŠ å¯†ä»£ç " tabindex="-1"><a class="header-anchor" href="#_2ã€åŠ å¯†ä»£ç " aria-hidden="true">#</a> 2ã€åŠ å¯†ä»£ç </h4><p>æˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨äº†bodyã€å’ŒsecretKeyè¿›è¡ŒåŠ å¯†</p><p>å…ˆåˆ›å»ºä¸€ä¸ªåŠ å¯†ç­¾åç±»SignUtil.java</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>digest<span class="token punctuation">.</span></span><span class="token class-name">DigestUtil</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * ç­¾åå·¥å…·ç±»
 *
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/1/15
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SignUtil</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getSign</span><span class="token punctuation">(</span><span class="token class-name">String</span> body<span class="token punctuation">,</span> <span class="token class-name">String</span> secretKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> content <span class="token operator">=</span> body <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> secretKey<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">DigestUtil</span><span class="token punctuation">.</span><span class="token function">md5Hex</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨Clientç±»ä¸­æ–°å¢æ„é€ Headerçš„æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XuanApiClient</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> accessKey<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> secretKey<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">XuanApiClient</span><span class="token punctuation">(</span><span class="token class-name">String</span> accessKey<span class="token punctuation">,</span> <span class="token class-name">String</span> secretKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>accessKey <span class="token operator">=</span> accessKey<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>secretKey <span class="token operator">=</span> secretKey<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
  
	<span class="token comment">// ...</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameByPostWithJson</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">HttpResponse</span> response <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8123/api/name/user&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">addHeaders</span><span class="token punctuation">(</span><span class="token function">getHeaders</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;response = &quot;</span> <span class="token operator">+</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;status = &quot;</span> <span class="token operator">+</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token string">&quot;fail&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token class-name">String</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnsupportedEncodingException</span> <span class="token punctuation">{</span>
		<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> header <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		header<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;accessKey&quot;</span><span class="token punctuation">,</span> accessKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		header<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;sign&quot;</span><span class="token punctuation">,</span> <span class="token class-name">SignUtil</span><span class="token punctuation">.</span><span class="token function">getSign</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> secretKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// é˜²æ­¢ä¸­æ–‡ä¹±ç </span>
		header<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		header<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;nonce&quot;</span><span class="token punctuation">,</span> <span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomNumbers</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		header<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;timestamp&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> header<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è°ƒç”¨APIçš„æ—¶å€™åŠ å¯†ä»£ç å·²ç»å†™å¥½äº†ï¼Œæ˜¾ç„¶æˆ‘ä»¬åœ¨APIä¸­éœ€è¦ç”¨åŒæ ·çš„æ–¹æ³•æ¥éªŒè¯åŠ å¯†ã€‚è¿™é‡Œä»¥æºå¸¦JSON bodyçš„POSTè¯·æ±‚ä¸ºä¾‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">NumberUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StrUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">SignUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * æ¨¡æ‹Ÿæ¥å£
 *
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/1/14
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/name&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NameController</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameByPostWithJson</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnsupportedEncodingException</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> accessKey <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;accessKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// é˜²æ­¢ä¸­æ–‡ä¹±ç </span>
		<span class="token class-name">String</span> body <span class="token operator">=</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> sign <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;sign&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> nonce <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;nonce&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> timestamp <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;timestamp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">boolean</span> hasBlank <span class="token operator">=</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">hasBlank</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">,</span> body<span class="token punctuation">,</span> sign<span class="token punctuation">,</span> nonce<span class="token punctuation">,</span> timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰ç©º</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hasBlank<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">&quot;æ— æƒé™&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// TODO ä½¿ç”¨accessKeyå»æ•°æ®åº“æŸ¥è¯¢secretKey</span>
		<span class="token comment">// å‡è®¾æŸ¥åˆ°çš„secretæ˜¯abc è¿›è¡ŒåŠ å¯†å¾—åˆ°sign</span>
		<span class="token class-name">String</span> secretKey <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> sign1 <span class="token operator">=</span> <span class="token class-name">SignUtil</span><span class="token punctuation">.</span><span class="token function">getSign</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>sign<span class="token punctuation">,</span> sign1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">&quot;æ— æƒé™&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// TODO åˆ¤æ–­éšæœºæ•°nonce</span>
		<span class="token comment">// æ—¶é—´æˆ³æ˜¯å¦ä¸ºæ•°å­—</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">isNumber</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">&quot;æ— æƒé™&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// äº”åˆ†é’Ÿå†…çš„è¯·æ±‚æœ‰æ•ˆ</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">parseLong</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">&quot;æ— æƒé™&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token string">&quot;å‘é€POSTè¯·æ±‚ JSONä¸­ä½ çš„åå­—æ˜¯ï¼š&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿›è¡Œæµ‹è¯•secretKey = &quot;abc&quot; å¯ä»¥æ­£ç¡®è®¿é—®ï¼Œå½“secreté”™è¯¯æ—¶è¿”å›æ— æƒé™ï½</p><p>â€‹</p><h2 id="äº”ã€å¼€å‘ä¸€ä¸ªsdk-starter" tabindex="-1"><a class="header-anchor" href="#äº”ã€å¼€å‘ä¸€ä¸ªsdk-starter" aria-hidden="true">#</a> äº”ã€å¼€å‘ä¸€ä¸ªSDKï¼ˆstarterï¼‰</h2><hr><p>ç†æƒ³æƒ…å†µï¼šå¼€å‘è€…åªéœ€è¦å…³å¿ƒè°ƒç”¨å“ªäº›æ¥å£ã€ä¼ é€’å“ªäº›å‚æ•°ã€‚å°±è·Ÿè°ƒç”¨è‡ªå·±å†™çš„ä»£ç ä¸€æ ·ç®€å•ã€‚</p><blockquote><p>å¼€å‘starterçš„å¥½å¤„ï¼šå¼€å‘è€…å¼•å…¥ä¹‹åï¼Œå¯ä»¥ç›´æ¥åœ¨application.ymlä¸­å†™é…ç½®ï¼Œè‡ªåŠ¨åˆ›å»ºå®¢æˆ·ç«¯</p></blockquote><h3 id="_1ã€æ–°å»ºé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_1ã€æ–°å»ºé¡¹ç›®" aria-hidden="true">#</a> 1ã€æ–°å»ºé¡¹ç›®</h3><p>åˆ›å»ºä¸€ä¸ªxuanapi-client-sdkçš„springbooté¡¹ç›® å‹¾é€‰lombokã€Spring Configuration Processorï¼ˆä½œç”¨ï¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®çš„ä»£ç æç¤ºï¼‰</p>`,61),H=p(`<p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247696.png" alt="image-20230116142827466" loading="lazy"></p><h3 id="_2ã€ç¼–å†™é…ç½®ç±»" tabindex="-1"><a class="header-anchor" href="#_2ã€ç¼–å†™é…ç½®ç±»" aria-hidden="true">#</a> 2ã€ç¼–å†™é…ç½®ç±»</h3><p>æˆ‘ä»¬ä¸éœ€è¦spring bootå¯åŠ¨ç±»ï¼Œå°†å…¶åˆ å»ã€‚</p><p>ç„¶åå°†ä¹‹å‰ç¼–å†™å¥½çš„clientã€utilã€modelç²˜è´´è¿‡æ¥</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247742.png" alt="image-20230116153646366" loading="lazy"></p><p>å†æ–°å»ºé…ç½®ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ComponentScan</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;xuan.api.client&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XuanApiClientConfig</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> accessKey<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> secretKey<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">XuanApiClient</span> <span class="token function">xuanApiClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">XuanApiClient</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">,</span> secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€æŒ‡å®šé…ç½®ç±»" tabindex="-1"><a class="header-anchor" href="#_3ã€æŒ‡å®šé…ç½®ç±»" aria-hidden="true">#</a> 3ã€æŒ‡å®šé…ç½®ç±»</h3><p>æ–°å»ºresources/META-INF/spring.factorieså¹¶æŒ‡å®š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">## spring boot starter</span>
<span class="token key attr-name">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="token punctuation">=</span><span class="token value attr-value">com.xuan.XuanApiClientConfig</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247951.png" alt="image-20230116153954227" loading="lazy"></p><h3 id="_4ã€å‘å¸ƒstarter" tabindex="-1"><a class="header-anchor" href="#_4ã€å‘å¸ƒstarter" aria-hidden="true">#</a> 4ã€å‘å¸ƒstarter</h3><p>åŒå‡»Maven lifecycleä¸‹çš„installæˆ–è€…å‘½ä»¤è¡Œmvn install</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247209.png" alt="image-20230116154259164" loading="lazy"></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Installing /Users/xuan/Desktop/project/api-platform/xuanapi-client-sdk/target/xuanapi-client-sdk-0.0.1.jar to /Users/xuan/.m2/repository/com/xuan/xuanapi-client-sdk/0.0.1/xuanapi-client-sdk-0.0.1.jar
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Installing /Users/xuan/Desktop/project/api-platform/xuanapi-client-sdk/pom.xml to /Users/xuan/.m2/repository/com/xuan/xuanapi-client-sdk/0.0.1/xuanapi-client-sdk-0.0.1.pom
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_5ã€æµ‹è¯•" aria-hidden="true">#</a> 5ã€æµ‹è¯•</h3><p><strong>å¼•å…¥ä¾èµ–</strong></p><p>å›åˆ°xuan-Interfaceé¡¹ç›®ï¼ŒæŠŠä¹‹å‰çš„clientã€utilã€modelå…¨éƒ¨åˆ æ‰ã€‚ç„¶ååœ¨pomä¸­å¼•å…¥æˆ‘ä»¬åˆšåˆšåˆ¶ä½œå¥½çš„starter</p>`,18),N=p(`<div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--è‡ªå·±åˆ¶ä½œçš„starter--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.xuan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>xuanapi-client-sdk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é…ç½®ä¿¡æ¯</strong></p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247314.png" alt="image-20230116155915000" loading="lazy"></p><p>æˆ‘ä»¬åœ¨ymlæ–‡ä»¶ä¸­é…ç½®çš„æ—¶å€™æœ‰æç¤ºå°±æ˜¯ä¹‹å‰å¼•å…¥çš„Spring Configuration Processorå‘æŒ¥çš„ä½œç”¨ã€‚æ‰“å¼€ä¾èµ–æºç åˆ†æå¯å¾—æ˜¯è¿™ä¸ªjsonæ–‡ä»¶çš„ä½œç”¨</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247595.png" alt="image-20230116160142141" loading="lazy"></p><p>åœ¨æµ‹è¯•ç±»ä½¿ç”¨@Resourceæ³¨å…¥XuanApiClientè¿›è¡Œæµ‹è¯•</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247760.png" alt="image-20230116160643683" loading="lazy"></p><p>ymlä¸­secretä¸æ­£ç¡®ä¹Ÿä¼šè¿”å› &quot;æ— æƒé™&quot;</p><h2 id="å…­ã€æ¥å£å‘å¸ƒ-ä¸‹çº¿" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ¥å£å‘å¸ƒ-ä¸‹çº¿" aria-hidden="true">#</a> å…­ã€æ¥å£å‘å¸ƒ/ä¸‹çº¿</h2><hr><p>è¿™ä¸ªåŠŸèƒ½é¦–å…ˆæ˜¯ä»…ç®¡ç†å‘˜ä½¿ç”¨çš„</p><p><strong>å‘å¸ƒæ¥å£</strong></p><ol><li>æ ¡éªŒè¯¥æ¥å£æ˜¯å¦å­˜åœ¨</li><li>åˆ¤æ–­æ¥å£æ˜¯å¦å¯ä»¥è¢«è°ƒç”¨</li><li>ä¿®æ”¹æ•°æ®åº“æ¥å£å­—æ®µä¸º1</li></ol><p><strong>ä¸‹çº¿æ¥å£</strong></p><ol><li>æ ¡éªŒè¯¥æ¥å£æ˜¯å¦å­˜åœ¨</li><li>ä¿®æ”¹æ•°æ®åº“æ¥å£å­—æ®µä¸º 0</li></ol><h3 id="_1ã€åç«¯" tabindex="-1"><a class="header-anchor" href="#_1ã€åç«¯" aria-hidden="true">#</a> 1ã€åç«¯</h3><hr>`,17),z=p(`<li><p><strong>é€šç”¨è¯·æ±‚ç±»</strong></p><p>ä¸Šä¸‹çº¿éƒ½æ˜¯é€šè¿‡idæ¥æ§åˆ¶çš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * é€šè¿‡idå‘é€è¯·æ±‚
 *
 * <span class="token keyword">@author</span> xuan
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IdRequest</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * id
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>æšä¸¾ç±»</strong></p><p>ä½¿ç”¨æšä¸¾ç±»æ¥è¡¨ç¤ºä¸Šçº¿/ä¸‹çº¿çŠ¶æ€</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>model<span class="token punctuation">.</span>enums</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * æ¥å£çŠ¶æ€æšä¸¾
 *
 * <span class="token keyword">@author</span> xuan
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">InterfaceInfoStatusEnum</span> <span class="token punctuation">{</span>

    <span class="token function">OFFLINE</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‹çº¿&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">ONLINE</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šçº¿&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> text<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token class-name">InterfaceInfoStatusEnum</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> text<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     *
     * <span class="token keyword">@return</span> è·å–å€¼åˆ—è¡¨
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> text<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),G=n("p",null,[n("strong",null,"åœ¨controlleré‡Œç¼–å†™ä¸Šä¸‹çº¿ä»£ç ")],-1),K=p(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * APIä¿¡æ¯æ¥å£
 *
 * <span class="token keyword">@author</span> xuan
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/interfaceInfo&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterfaceInfoController</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">InterfaceInfoService</span> interfaceInfoService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">XuanApiClient</span> xuanApiClient<span class="token punctuation">;</span>

	<span class="token doc-comment comment">/**
	 * ä¸Šçº¿æ¥å£
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">idRequest</span> æºå¸¦id
	 * <span class="token keyword">@return</span> æ˜¯å¦ä¸Šçº¿æˆåŠŸ
	 */</span>
	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/online&quot;</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@AuthCheck</span><span class="token punctuation">(</span>mustRole <span class="token operator">=</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">onlineInterfaceInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">IdRequest</span> idRequest<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnsupportedEncodingException</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>idRequest <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> idRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// åˆ¤æ–­æ¥å£æ˜¯å¦å­˜åœ¨</span>
		<span class="token keyword">long</span> id <span class="token operator">=</span> idRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">InterfaceInfo</span> oldInterfaceInfo <span class="token operator">=</span> interfaceInfoService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>oldInterfaceInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// åˆ¤æ–­æ¥å£æ˜¯å¦èƒ½ä½¿ç”¨</span>
		<span class="token comment">// TODO æ ¹æ®æµ‹è¯•åœ°å€æ¥è°ƒç”¨</span>
		<span class="token comment">// è¿™é‡Œæˆ‘å…ˆç”¨å›ºå®šçš„æ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼Œåé¢æ¥æ”¹</span>
		<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span>User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span>User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;MARS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> name <span class="token operator">=</span> xuanApiClient<span class="token punctuation">.</span><span class="token function">getNameByPostWithJson</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;æ¥å£éªŒè¯å¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// æ›´æ–°æ•°æ®åº“</span>
		<span class="token class-name">InterfaceInfo</span> interfaceInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InterfaceInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		interfaceInfo<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		interfaceInfo<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">InterfaceInfoStatusEnum</span><span class="token punctuation">.</span><span class="token constant">ONLINE</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">boolean</span> isSuccessful <span class="token operator">=</span> interfaceInfoService<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>interfaceInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>isSuccessful<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * ä¸‹çº¿æ¥å£
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">idRequest</span> æºå¸¦id
	 * <span class="token keyword">@return</span> æ˜¯å¦ä¸‹çº¿æˆåŠŸ
	 */</span>
	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/offline&quot;</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@AuthCheck</span><span class="token punctuation">(</span>mustRole <span class="token operator">=</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">offlineInterfaceInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">IdRequest</span> idRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>idRequest <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> idRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// åˆ¤æ–­æ¥å£æ˜¯å¦å­˜åœ¨</span>
		<span class="token keyword">long</span> id <span class="token operator">=</span> idRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">InterfaceInfo</span> oldInterfaceInfo <span class="token operator">=</span> interfaceInfoService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>oldInterfaceInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// æ›´æ–°æ•°æ®åº“</span>
		<span class="token class-name">InterfaceInfo</span> interfaceInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InterfaceInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		interfaceInfo<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		interfaceInfo<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">InterfaceInfoStatusEnum</span><span class="token punctuation">.</span><span class="token constant">OFFLINE</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">boolean</span> isSuccessful <span class="token operator">=</span> interfaceInfoService<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>interfaceInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>isSuccessful<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),W=p(`<li><p><strong>æƒé™æ§åˆ¶</strong></p><p>è¿™é‡Œæ·»åŠ æƒé™æ ¡éªŒï¼Œè¿™é‡Œç”¨åˆ°**@AuthCheck(mustRole = &quot;admin&quot;)**çš„åˆ‡é¢æ³¨è§£ï¼Œå¯¹åº”çš„å®ç°æ–¹æ³•åœ¨aop/AuthInterceptor</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * æƒé™æ ¡éªŒ
 *
 * <span class="token keyword">@author</span> xuan
 */</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AuthCheck</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æœ‰ä»»ä½•ä¸€ä¸ªè§’è‰²
     *
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">anyRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * å¿…é¡»æœ‰æŸä¸ªè§’è‰²
     *
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token class-name">String</span> <span class="token function">mustRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>aop/AuthInterceptor.java</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>aop</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span></span><span class="token class-name">CollectionUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">ErrorCode</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>exception<span class="token punctuation">.</span></span><span class="token class-name">BusinessException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>model<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">UserService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AuthCheck</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">ProceedingJoinPoint</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Around</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Aspect</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">RequestAttributes</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">RequestContextHolder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestAttributes</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span></span><span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * æƒé™æ ¡éªŒ AOP
 *
 * <span class="token keyword">@author</span> xuan
 */</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthInterceptor</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æ‰§è¡Œæ‹¦æˆª
     *
     * <span class="token keyword">@param</span> <span class="token parameter">joinPoint</span>
     * <span class="token keyword">@param</span> <span class="token parameter">authCheck</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(authCheck)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">doInterceptor</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">AuthCheck</span> authCheck<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> anyRole <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>authCheck<span class="token punctuation">.</span><span class="token function">anyRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token operator">::</span><span class="token function">isNotBlank</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> mustRole <span class="token operator">=</span> authCheck<span class="token punctuation">.</span><span class="token function">mustRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RequestAttributes</span> requestAttributes <span class="token operator">=</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">currentRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">)</span> requestAttributes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å½“å‰ç™»å½•ç”¨æˆ·</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getLoginUser</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‹¥æœ‰ä»»æ„æƒé™å³é€šè¿‡</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>anyRole<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> userRole <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getUserRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>anyRole<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>userRole<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NO_AUTH_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// å¿…é¡»æœ‰æ‰€æœ‰æƒé™æ‰é€šè¿‡</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>mustRole<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> userRole <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getUserRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mustRole<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>userRole<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NO_AUTH_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// é€šè¿‡æƒé™æ ¡éªŒï¼Œæ”¾è¡Œ</span>
        <span class="token keyword">return</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>userService.getLoginUser(request)</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token doc-comment comment">/**
	 * è·å–å½“å‰ç™»å½•ç”¨æˆ·
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">request</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getLoginUser</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// å…ˆåˆ¤æ–­æ˜¯å¦å·²ç™»å½•</span>
		<span class="token class-name">Object</span> userObj <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token constant">USER_LOGIN_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">User</span> currentUser <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> userObj<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>currentUser <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> currentUser<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_LOGIN_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// ä»æ•°æ®åº“æŸ¥è¯¢ï¼ˆè¿½æ±‚æ€§èƒ½çš„è¯å¯ä»¥æ³¨é‡Šï¼Œç›´æ¥èµ°ç¼“å­˜ï¼‰</span>
		<span class="token keyword">long</span> userId <span class="token operator">=</span> currentUser<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		currentUser <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>currentUser <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_LOGIN_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> currentUser<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,1),V=n("h3",{id:"_2ã€å‰ç«¯",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2ã€å‰ç«¯","aria-hidden":"true"},"#"),s(" 2ã€å‰ç«¯")],-1),Q=n("hr",null,null,-1),X=n("h4",{id:"_1ã€æ·»åŠ å‘å¸ƒæŒ‰é’®å’Œä¸‹çº¿æŒ‰é’®",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1ã€æ·»åŠ å‘å¸ƒæŒ‰é’®å’Œä¸‹çº¿æŒ‰é’®","aria-hidden":"true"},"#"),s(" 1ã€æ·»åŠ å‘å¸ƒæŒ‰é’®å’Œä¸‹çº¿æŒ‰é’®")],-1),J={href:"https://ant.design/components/button-cn",target:"_blank",rel:"noopener noreferrer"},Y=p(`<p>å‘å¸ƒ/ä¸‹çº¿åšæˆä¸€ä¸ªæŒ‰é’®ã€‚é€šè¿‡statusæ¥åŠ¨æ€åˆ¤æ–­</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;æ“ä½œ&#39;</span><span class="token punctuation">,</span>
      dataIndex<span class="token operator">:</span> <span class="token string">&#39;option&#39;</span><span class="token punctuation">,</span>
      valueType<span class="token operator">:</span> <span class="token string">&#39;option&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
          <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>config<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;link&quot;</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">handleUpdateModalOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setCurrentRow</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          ç¼–è¾‘
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
        record<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
            <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>online<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">}</span></span>
            <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">handleOnlineInterface</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token plain-text">
            å‘å¸ƒ
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
            <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>offline<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;text&#39;</span><span class="token punctuation">}</span></span>
            <span class="token comment">// danger={true}</span>
            <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">handleOfflineInterface</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token plain-text">
            ä¸‹çº¿
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
          <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">type</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;text&#39;</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">danger</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">handleRemoveInterfaceInfo</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          åˆ é™¤
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247820.png" alt="image-20230117142012585" loading="lazy"></p><h4 id="_2ã€ç¼–å†™å‘å¸ƒ-ä¸‹çº¿çš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_2ã€ç¼–å†™å‘å¸ƒ-ä¸‹çº¿çš„æ–¹æ³•" aria-hidden="true">#</a> 2ã€ç¼–å†™å‘å¸ƒ/ä¸‹çº¿çš„æ–¹æ³•</h4>`,5),$={href:"http://localhost:7529/api/v3/api-docs%E5%A4%8D%E5%88%B6json%E5%88%B0config/oneapi.json",target:"_blank",rel:"noopener noreferrer"},Z=p(`<p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247855.png" alt="image-20230117121821846" loading="lazy"></p><p>æ–°å¢æ–¹æ³•</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token comment">/**
   * @en-US Online Interface
   * @zh-CN å‘å¸ƒæ¥å£
   *
   * @param fields
   */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleOnlineInterface</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>fields<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>IdRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hide <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token string">&#39;æ­£åœ¨å‘å¸ƒ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">onlineInterfaceInfoUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>fields <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;å‘å¸ƒæˆåŠŸ!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ·æ–°é¡µé¢</span>
        actionRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;å‘å¸ƒå¤±è´¥!&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * @en-US Offline Interface
   * @zh-CN ä¸‹çº¿æ¥å£
   *
   * @param fields
   */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleOfflineInterface</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>fields<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>IdRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hide <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token string">&#39;æ­£åœ¨ä¸‹çº¿&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">offlineInterfaceInfoUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>fields <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸‹çº¿æˆåŠŸ!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ·æ–°é¡µé¢</span>
        actionRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸‹çº¿å¤±è´¥!&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç½‘é¡µè¿›è¡Œæµ‹è¯•æ²¡æœ‰é—®é¢˜~</p><h2 id="ä¸ƒã€ç”¨æˆ·ä¸»é¡µ" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€ç”¨æˆ·ä¸»é¡µ" aria-hidden="true">#</a> ä¸ƒã€ç”¨æˆ·ä¸»é¡µ</h2><hr><p>å‰ç«¯æµè§ˆæ¥å£ï¼ŒæŸ¥çœ‹æ¥å£æ–‡æ¡£ï¼Œç”³è¯·ç­¾åï¼ˆæ³¨å†Œï¼‰</p><h4 id="_1ã€æµè§ˆæ¥å£" tabindex="-1"><a class="header-anchor" href="#_1ã€æµè§ˆæ¥å£" aria-hidden="true">#</a> 1ã€æµè§ˆæ¥å£</h4><hr><p>åœ¨src/pagesç›®å½•ä¸‹æ–°å»ºIndexç›®å½•å¹¶æŠŠWelcome.tsxæ‹–å…¥å…¶ä¸­æ”¹åä¸ºindex.tsx</p><p><strong>é…ç½®è·¯ç”±</strong></p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247905.png" alt="image-20230118113613886" loading="lazy"></p><p>æµ‹è¯•ä¸€ä¸‹ ä¸»é¡µèƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œæ¥ä¸‹æ¥å†æ¥ç¼–å†™é¡µé¢</p><p><strong>ç¼–å†™é¡µé¢</strong></p>`,14),nn={href:"https://ant.design/components/list-cn",target:"_blank",rel:"noopener noreferrer"},sn=p(`<div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PageContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> List<span class="token punctuation">,</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> listInterfaceInfoByPageUsingGET <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/services/api-platform-backend/interfaceInfoController&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Index<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>list<span class="token punctuation">,</span> setList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>total<span class="token punctuation">,</span> setTotal<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">loadData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>current <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> pageSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">listInterfaceInfoByPageUsingGET</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        current<span class="token punctuation">,</span>
        pageSize<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setList</span><span class="token punctuation">(</span>res<span class="token operator">?.</span>data<span class="token operator">?.</span>records <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setTotal</span><span class="token punctuation">(</span>res<span class="token operator">?.</span>data<span class="token operator">?.</span>total <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;è¯·æ±‚å¤±è´¥,&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
	
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageContainer</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;ä¸»é¡µ&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      &lt;List
        className=&quot;interfaceInfo-list&quot;
        loading=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span><span class="token plain-text">
        itemLayout=&quot;horizontal&quot;
        dataSource=</span><span class="token punctuation">{</span>list<span class="token punctuation">}</span><span class="token plain-text">
        pagination=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          showSizeChanger<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          total<span class="token operator">:</span> total<span class="token punctuation">,</span>
          <span class="token function">showTotal</span><span class="token punctuation">(</span>total<span class="token punctuation">,</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>range<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> / </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">onChange</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">loadData</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
        renderItem=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">actions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-more<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŸ¥çœ‹è¯¦æƒ…</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item.Meta</span></span>
              <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://ant.design<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
              <span class="token attr-name">description</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>description<span class="token punctuation">}</span></span>
            <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>method<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      /&gt;
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PageContainer</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247954.png" alt="image-20230118140557053" loading="lazy"></p><h4 id="_2ã€æŸ¥çœ‹æ¥å£æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_2ã€æŸ¥çœ‹æ¥å£æ–‡æ¡£" aria-hidden="true">#</a> 2ã€æŸ¥çœ‹æ¥å£æ–‡æ¡£</h4><hr>`,5),an=n("li",null,[n("p",null,[n("strong",null,"æ–°å»ºæ–‡ä»¶")]),n("p",null,"åœ¨pagesä¸‹æ–°å»º InterfaceInfo/index.tsx")],-1),tn=n("p",null,[n("strong",null,"é…ç½®åŠ¨æ€è·¯ç”±")],-1),pn={href:"https://umijs.org/docs/guides/routes",target:"_blank",rel:"noopener noreferrer"},en=p(`<div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token punctuation">{</span>
    <span class="token comment">// åŠ¨æ€è·¯ç”±</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/interface_info/:id&#39;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#39;interface info&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token string">&#39;./InterfaceInfo&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// ä¸åœ¨èœå•é¡µæ˜¾ç¤º</span>
    hideInMenu<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247220.png" alt="image-20230118152720709" loading="lazy"></p>`,2),on=p(`<li><p><strong>ä¿®æ”¹è·³è½¬</strong></p><p>ç‚¹å‡»é¡µé¢å³å¯æŸ¥çœ‹è¯¦æƒ…</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247412.png" alt="image-20230118152832702" loading="lazy"></p><p>ä¸»é¡µä»£ç ç‰‡æ®µä¿®æ”¹</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageContainer</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;æ¥å£å¼€æ”¾å¹³å°&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      &lt;List
        className=&quot;interfaceInfo-list&quot;
        loading=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span><span class="token plain-text">
        itemLayout=&quot;horizontal&quot;
        dataSource=</span><span class="token punctuation">{</span>list<span class="token punctuation">}</span><span class="token plain-text">
        pagination=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          showSizeChanger<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          total<span class="token operator">:</span> total<span class="token punctuation">,</span>
          <span class="token function">showTotal</span><span class="token punctuation">(</span>total<span class="token punctuation">,</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>range<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> / </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">onChange</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">loadData</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
        // ä¿®æ”¹çš„åœ°æ–¹
        renderItem=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> infoLink <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/interface_info/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span>
              <span class="token attr-name">actions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-more<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>infoLink<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                  æŸ¥çœ‹è¯¦æƒ…
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
            <span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item.Meta</span></span>
                <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>infoLink<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                <span class="token attr-name">description</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>description<span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>method<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
      /&gt;
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PageContainer</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ç¼–å†™InterfaceInfo/index.tsx</strong></p><p>è¿™é‡Œéœ€è¦æŸ¥çœ‹Ant Designä¸­çš„Card å’Œ Descriptions ç»„ä»¶ å·²ç»umiä¸­åŠ¨æ€è·¯ç”±å¦‚ä½•è·å–è·¯å¾„ä¸­çš„id</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247547.png" alt="image-20230118153556403" loading="lazy"></p><p>å¦‚å®˜æ–¹æ–‡æ¡£æ‰€ç¤ºï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨useParams()</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PageContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Badge<span class="token punctuation">,</span> Card<span class="token punctuation">,</span> Descriptions<span class="token punctuation">,</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getInterfaceInfoByIdUsingGET <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/services/api-platform-backend/interfaceInfoController&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&quot;moment&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> InterfaceInfo<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">loadData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;æ— æ•°æ®ï¼Œè¯·é‡è¯•&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getInterfaceInfoByIdUsingGET</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setData</span><span class="token punctuation">(</span>res<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;è¯·æ±‚å¤±è´¥,&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageContainer</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;æ¥å£è¯¦æƒ…&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">loading</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>data <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">column</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span> <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bordered</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æè¿°<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ¥å£çŠ¶æ€<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Badge</span></span> <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;å…³é—­&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">status</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
              <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Badge</span></span> <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;å¯ç”¨&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">status</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;processing&#39;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
              <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚åœ°å€<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>url<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚æ–¹æ³•<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>method<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚å¤´<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>requestHeader<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å“åº”å¤´<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>responseHeader<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åˆ›å»ºæ—¶é—´<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token function">moment</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>createTime<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;yyyy-MM-DD HH:mm:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ›´æ–°æ—¶é—´<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token function">moment</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>updateTime<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;yyyy-MM-DD HH:mm:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ¥å£ä¸å­˜åœ¨</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PageContainer</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> InterfaceInfo<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>æ•ˆæœå¦‚ä¸‹</strong></p><p>ç‚¹å‡»åè·³è½¬è¯¦æƒ…</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247635.png" alt="image-20230118153729873" loading="lazy"></p></li>`,3),cn=p(`<h4 id="_3ã€ç”³è¯·ç­¾å" tabindex="-1"><a class="header-anchor" href="#_3ã€ç”³è¯·ç­¾å" aria-hidden="true">#</a> 3ã€ç”³è¯·ç­¾å</h4><hr><p><strong>æ³¨å†Œç”¨æˆ·çš„æ—¶å€™å°±ç»™ä»–åˆ†é…ä¸€ä¸ªç­¾å</strong></p><p>å…ˆåœ¨Userç±»å’ŒUserMapper.xmlä¸­åŠ ä¸€ä¸‹accessKeyã€secretKeyçš„å­—æ®µ</p><p>æ›´æ–°æ³¨å†Œæ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">userRegister</span><span class="token punctuation">(</span><span class="token class-name">String</span> userAccount<span class="token punctuation">,</span> <span class="token class-name">String</span> userPassword<span class="token punctuation">,</span> <span class="token class-name">String</span> checkPassword<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 1. æ ¡éªŒ</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isAnyBlank</span><span class="token punctuation">(</span>userAccount<span class="token punctuation">,</span> userPassword<span class="token punctuation">,</span> checkPassword<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;å‚æ•°ä¸ºç©º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userAccount<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”¨æˆ·è´¦å·è¿‡çŸ­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userPassword<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">8</span> <span class="token operator">||</span> checkPassword<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”¨æˆ·å¯†ç è¿‡çŸ­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// å¯†ç å’Œæ ¡éªŒå¯†ç ç›¸åŒ</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>userPassword<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>checkPassword<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">synchronized</span> <span class="token punctuation">(</span>userAccount<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// è´¦æˆ·ä¸èƒ½é‡å¤</span>
			<span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> lambdaQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			lambdaQueryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getUserAccount</span><span class="token punctuation">,</span> userAccount<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">long</span> count <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectCount</span><span class="token punctuation">(</span>lambdaQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;è´¦å·é‡å¤&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 2. åŠ å¯†</span>
			<span class="token class-name">String</span> encryptPassword <span class="token operator">=</span> <span class="token class-name">DigestUtils</span><span class="token punctuation">.</span><span class="token function">md5DigestAsHex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SALT</span> <span class="token operator">+</span> userPassword<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 3. åˆ†é…accessKeyã€secretKey</span>
			<span class="token class-name">String</span> accessKey <span class="token operator">=</span> <span class="token string">&quot;cli_&quot;</span> <span class="token operator">+</span> <span class="token class-name">DigestUtil</span><span class="token punctuation">.</span><span class="token function">md5Hex</span><span class="token punctuation">(</span><span class="token constant">SALT</span> <span class="token operator">+</span> userAccount <span class="token operator">+</span> <span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomNumbers</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> secretKey <span class="token operator">=</span> <span class="token class-name">DigestUtil</span><span class="token punctuation">.</span><span class="token function">md5Hex</span><span class="token punctuation">(</span><span class="token constant">SALT</span> <span class="token operator">+</span> userAccount <span class="token operator">+</span> <span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomNumbers</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 4. æ’å…¥æ•°æ®</span>
			<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			user<span class="token punctuation">.</span><span class="token function">setUserAccount</span><span class="token punctuation">(</span>userAccount<span class="token punctuation">)</span><span class="token punctuation">;</span>
			user<span class="token punctuation">.</span><span class="token function">setUserPassword</span><span class="token punctuation">(</span>encryptPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>
			user<span class="token punctuation">.</span><span class="token function">setAccessKey</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
			user<span class="token punctuation">.</span><span class="token function">setSecretKey</span><span class="token punctuation">(</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">boolean</span> saveResult <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>saveResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;æ³¨å†Œå¤±è´¥ï¼Œæ•°æ®åº“é”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),ln={href:"http://localhost:7529/api/doc.html%E6%B3%A8%E5%86%8C%E3%80%82",target:"_blank",rel:"noopener noreferrer"},un=n("p",null,[n("img",{src:"https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247676.png",alt:"image-20230118174821662",loading:"lazy"})],-1),kn=n("p",null,[n("strong",null,"æ›´æ¢ç­¾å")],-1),rn=n("p",null,"æ‰©å±•ï¼šç”¨æˆ·å¯ä»¥ç”³è¯·æ›´æ¢ç­¾å",-1),dn=n("h2",{id:"å…«ã€åœ¨çº¿è°ƒç”¨",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å…«ã€åœ¨çº¿è°ƒç”¨","aria-hidden":"true"},"#"),s(" å…«ã€åœ¨çº¿è°ƒç”¨")],-1),vn=n("hr",null,null,-1),mn=n("p",null,"å‘ç°å°‘äº†ä¸€ä¸ªã€Œè¯·æ±‚å‚æ•°ã€å­—æ®µ...ç°åœ¨ç»™è¡¥ä¸Š",-1),gn=n("p",null,"æ•°æ®åº“ã€åç«¯ã€å‰ç«¯éƒ½éœ€è¦è¡¥ä¸Šã€‚ ä¸åšè¿‡å¤šé˜è¿°",-1),bn=p(`<h3 id="_1ã€å‰ç«¯ç®€å•æ ·å¼" tabindex="-1"><a class="header-anchor" href="#_1ã€å‰ç«¯ç®€å•æ ·å¼" aria-hidden="true">#</a> 1ã€å‰ç«¯ç®€å•æ ·å¼</h3><hr><p>è¿™é‡Œæˆ‘æ‹¿äº†Ant Designå®˜ç½‘ä¾‹å­æ”¹äº†ä¸€ä¸‹</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;åœ¨çº¿è°ƒç”¨&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span>
    <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basic<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">layout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;vertical&#39;</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">onFinish</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onFinish<span class="token punctuation">}</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span>
      <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚å‚æ•°<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>requestParams<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input.TextArea</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">htmlType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        è°ƒç”¨
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247787.png" alt="image-20230119102254234" loading="lazy"></p><h3 id="_2ã€ä¿®æ”¹åç«¯" tabindex="-1"><a class="header-anchor" href="#_2ã€ä¿®æ”¹åç«¯" aria-hidden="true">#</a> 2ã€ä¿®æ”¹åç«¯</h3><hr><p>è¿™é‡Œæˆ‘ä»¬å…¶å®æœ‰ä¸¤ç§æ–¹æ¡ˆ</p><ul><li>èµ°åç«¯è°ƒç”¨</li><li>ç›´æ¥è¯·æ±‚æ¨¡æ‹Ÿæ¥å£</li></ul><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247831.png" alt="image-20230119102921966" loading="lazy"></p><p>è¿™é‡Œç”¨ç¬¬ä¸€ç§æµæ–¹æ¡ˆï¼Œæ›´å®‰å…¨æ›´è§„èŒƒã€‚æ¨¡æ‹Ÿæ¥å£çš„åœ°å€å°±ä¸ç”¨æš´éœ²å‡ºæ¥</p><p>å¤§æ¦‚æµç¨‹å¦‚ä¸‹</p><ol><li><p>å‰ç«¯å°†ç”¨æˆ·è¾“å…¥çš„è¯·æ±‚å‚æ•°å’Œè¦æµ‹è¯•çš„æ¥å£ idå‘ç»™å¹³å°åç«¯</p></li><li><p>è°ƒç”¨å‰æ ¡éªŒ</p></li><li><p>å¹³å°åç«¯å»è°ƒç”¨æ¨¡æ‹Ÿæ¥å£</p></li></ol><p><strong>æ–°å¢DTOç±»</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>model<span class="token punctuation">.</span>dto<span class="token punctuation">.</span>interfaceinfo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * è°ƒç”¨æ¥å£å‚æ•°
 *
 * <span class="token keyword">@author</span> xuan
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InvokeInterfaceRequest</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

	<span class="token doc-comment comment">/**
	 * ä¸»é”®
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

	<span class="token doc-comment comment">/**
	 * è¯·æ±‚å‚æ•°
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> requestParams<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>controllerç±»æ–°å¢æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
	 * åœ¨çº¿è°ƒç”¨æ¥å£
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">invokeInterfaceRequest</span> æºå¸¦idã€è¯·æ±‚å‚æ•°
	 * <span class="token keyword">@return</span> data
	 */</span>
	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/invoke&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">invokeInterface</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">InvokeInterfaceRequest</span> invokeInterfaceRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnsupportedEncodingException</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>invokeInterfaceRequest <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> invokeInterfaceRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// åˆ¤æ–­æ¥å£æ˜¯å¦å­˜åœ¨</span>
		<span class="token keyword">long</span> id <span class="token operator">=</span> invokeInterfaceRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">InterfaceInfo</span> interfaceInfo <span class="token operator">=</span> interfaceInfoService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>interfaceInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>interfaceInfo<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">InterfaceInfoStatusEnum</span><span class="token punctuation">.</span><span class="token constant">ONLINE</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_ERROR</span><span class="token punctuation">,</span> <span class="token string">&quot;æ¥å£æœªä¸Šçº¿&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// å¾—åˆ°å½“å‰ç”¨æˆ·</span>
		<span class="token class-name">User</span> loginUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getLoginUser</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> accessKey <span class="token operator">=</span> loginUser<span class="token punctuation">.</span><span class="token function">getAccessKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> secretKey <span class="token operator">=</span> loginUser<span class="token punctuation">.</span><span class="token function">getSecretKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">XuanApiClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XuanApiClient</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">,</span> secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// å…ˆå†™æ­»è¯·æ±‚</span>
		<span class="token class-name">String</span> userRequestParams <span class="token operator">=</span> invokeInterfaceRequest<span class="token punctuation">.</span><span class="token function">getRequestParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span>User</span> user <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>userRequestParams<span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span>User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">getNameByPostWithJson</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€ä¿®æ”¹å‰ç«¯" tabindex="-1"><a class="header-anchor" href="#_3ã€ä¿®æ”¹å‰ç«¯" aria-hidden="true">#</a> 3ã€ä¿®æ”¹å‰ç«¯</h3><hr><p>Ant Designä¸­ Formç»„ä»¶ onFinishï¼š æäº¤è¡¨å•ä¸”æ•°æ®éªŒè¯æˆåŠŸåå›è°ƒäº‹ä»¶</p><p>æ‰€ä»¥æˆ‘ä»¬æ¥ç¼–å†™onFinishæ–¹æ³•</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code>  <span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>requestData<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InvokeInterfaceRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;æ— æ•°æ®ï¼Œè¯·é‡è¯•&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">invokeInterfaceUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>requestData<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setResData</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨æˆåŠŸ!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;è¯·æ±‚å¤±è´¥,&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†ä¿®æ”¹ä¸€ä¸‹æ ·å¼</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PageContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Badge<span class="token punctuation">,</span> Card<span class="token punctuation">,</span> Descriptions<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> Divider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  getInterfaceInfoByIdUsingGET<span class="token punctuation">,</span>
  invokeInterfaceUsingPOST<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/services/api-platform-backend/interfaceInfoController&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> InterfaceInfo<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>InterfaceInfo<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>resData<span class="token punctuation">,</span> setResData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">loadData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;æ— æ•°æ®ï¼Œè¯·é‡è¯•&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getInterfaceInfoByIdUsingGET</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setData</span><span class="token punctuation">(</span>res<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;è¯·æ±‚å¤±è´¥,&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onFinish</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>requestData<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>InvokeInterfaceRequest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;æ— æ•°æ®ï¼Œè¯·é‡è¯•&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">invokeInterfaceUsingPOST</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>requestData<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setResData</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨æˆåŠŸ!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;è¯·æ±‚å¤±è´¥,&#39;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageContainer</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;æ¥å£è¯¦æƒ…&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>data <span class="token operator">?</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">loading</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">column</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span> <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bordered</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æè¿°<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ¥å£çŠ¶æ€<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Badge</span></span> <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;å…³é—­&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">status</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Badge</span></span> <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;å¯ç”¨&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">status</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;processing&#39;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚åœ°å€<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>url<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚æ–¹æ³•<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>method<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚å¤´<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>requestHeader<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚å‚æ•°<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>requestParams<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å“åº”å¤´<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>responseHeader<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åˆ›å»ºæ—¶é—´<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token function">moment</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>createTime<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;yyyy-MM-DD HH:mm:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Descriptions.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ›´æ–°æ—¶é—´<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token function">moment</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>updateTime<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;yyyy-MM-DD HH:mm:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Descriptions</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Divider</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;åœ¨çº¿è°ƒç”¨&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">layout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;vertical&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">onFinish</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onFinish<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·æ±‚å‚æ•°<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>requestParams<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input.TextArea</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">htmlType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                  è°ƒç”¨
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>resData <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;è°ƒç”¨ç»“æœ&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>resData<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
        <span class="token string">&#39;æ¥å£ä¸å­˜åœ¨&#39;</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PageContainer</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> InterfaceInfo<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•å¦‚ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247907.png" alt="image-20230119113714929" loading="lazy"></p><h3 id="_4ã€todo" tabindex="-1"><a class="header-anchor" href="#_4ã€todo" aria-hidden="true">#</a> 4ã€TODO</h3><hr><ul><li>åˆ¤æ–­è¯¥æ¥å£æ˜¯å¦å¯ä»¥è°ƒç”¨æ—¶ç”±å›ºå®šæ–¹æ³•åæ”¹ä¸ºæ ¹æ®æµ‹è¯•åœ°å€æ¥è°ƒç”¨</li><li>ç”¨æˆ·æµ‹è¯•æ¥å£å›ºå®šæ–¹æ³•åæ”¹ä¸ºæ ¹æ®æµ‹è¯•åœ°å€æ¥è°ƒç”¨</li><li>æ¨¡æ‹Ÿæ¥å›—æ”¹ä¸ºä»æ•°æ®åº“æ ¡éªŒaccessKeyã€secretKey</li></ul><h2 id="ä¹ã€æ¥å£è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡" tabindex="-1"><a class="header-anchor" href="#ä¹ã€æ¥å£è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡" aria-hidden="true">#</a> ä¹ã€æ¥å£è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡</h2><hr><p><strong>éœ€æ±‚</strong></p><ol><li>ç”¨æˆ·æ¯æ¬¡è°ƒç”¨æ¥å£æˆåŠŸï¼Œæ¬¡æ•°+1</li><li>ç»™ç”¨æˆ·åˆ†é…æˆ–è€…ç”¨æˆ·è‡ªä¸»ç”³è¯·è°ƒç”¨æ¬¡æ•°</li></ol><p><strong>ä¸šåŠ¡æµç¨‹</strong></p><ol><li>ç”¨æˆ·è°ƒç”¨æ¥å£ï¼ˆä¹‹å‰å·²å®Œæˆï¼‰</li><li>ä¿®æ”¹æ•°æ®åº“ï¼Œè°ƒç”¨æ¬¡æ•°+1</li></ol><h3 id="_1ã€è®¾è®¡åº“è¡¨" tabindex="-1"><a class="header-anchor" href="#_1ã€è®¾è®¡åº“è¡¨" aria-hidden="true">#</a> 1ã€è®¾è®¡åº“è¡¨</h3><p>å“ªä¸ªç”¨æˆ·ï¼Ÿå“ªä¸ªæ¥å£ï¼Ÿ ç”¨æˆ·=&gt;æ¥å£ï¼ˆå¤šå¯¹å¤šï¼‰</p><p><strong>ç”¨æˆ·è°ƒç”¨æ¥å£å…³ç³»è¡¨</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> api_platform<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">\`</span>user_interface_info<span class="token punctuation">\`</span></span>
<span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">&#39;ä¸»é”®&#39;</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>user_id<span class="token punctuation">\`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;è°ƒç”¨ç”¨æˆ·Id&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>interface_info_id<span class="token punctuation">\`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ¥å£Id&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>total_num<span class="token punctuation">\`</span></span> <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ€»è°ƒç”¨æ¬¡æ•°&#39;</span><span class="token punctuation">,</span>
	  <span class="token identifier"><span class="token punctuation">\`</span>left_num<span class="token punctuation">\`</span></span> <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;å‰©ä½™è°ƒç”¨æ¬¡æ•°&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>status<span class="token punctuation">\`</span></span> <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;0-æ­£å¸¸ ï¼Œ1-ç¦ç”¨&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>create_time<span class="token punctuation">\`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>update_time<span class="token punctuation">\`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">\`</span>is_delete<span class="token punctuation">\`</span></span> <span class="token keyword">tinyint</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ˜¯å¦åˆ é™¤(0-æœªåˆ , 1-å·²åˆ )&#39;</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;ç”¨æˆ·è°ƒç”¨æ¥å£å…³ç³»è¡¨&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œsqlè¯­å¥</p><p><strong>ä½¿ç”¨MybatisXæ’ä»¶</strong></p><p>ç”Ÿæˆuser_interface_infoè¡¨çš„ä»£ç </p>`,42),fn=p(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ç”¨æˆ·è°ƒç”¨æ¥å£å…³ç³»è¡¨
 * @TableName user_interface_info
 */</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span>value <span class="token operator">=</span><span class="token string">&quot;user_interface_info&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInterfaceInfo</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * ä¸»é”®
     */</span>
    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token doc-comment comment">/**
     * æ˜¯å¦åˆ é™¤(0-æœªåˆ , 1-å·²åˆ )
     */</span>
    <span class="token annotation punctuation">@TableLogic</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> isDelete<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€åŸºç¡€å¢åˆ æ”¹æŸ¥" tabindex="-1"><a class="header-anchor" href="#_2ã€åŸºç¡€å¢åˆ æ”¹æŸ¥" aria-hidden="true">#</a> 2ã€åŸºç¡€å¢åˆ æ”¹æŸ¥</h3><p>å…ˆéœ€è¦åœ¨dtoä¸­åˆ›å»ºç±»</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247969.png" alt="image-20230123172908757" loading="lazy"></p><p>å†å¤åˆ¶ä¹‹å‰çš„controlleræ”¹åæ›¿æ¢</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * APIä¿¡æ¯æ¥å£
 *
 * <span class="token keyword">@author</span> xuan
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/userInterfaceInfo&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInterfaceInfoController</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">UserInterfaceInfoService</span> userInterfaceInfoService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

	<span class="token comment">// region å¢åˆ æ”¹æŸ¥</span>

	<span class="token doc-comment comment">/**
	 * åˆ›å»º
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">userInterfaceInfoAddRequest</span>
	 * <span class="token keyword">@param</span> <span class="token parameter">request</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/add&quot;</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@AuthCheck</span><span class="token punctuation">(</span>mustRole <span class="token operator">=</span> <span class="token class-name">UserConstant</span><span class="token punctuation">.</span><span class="token constant">ADMIN_ROLE</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token function">addUserInterfaceInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">UserInterfaceInfoAddRequest</span> userInterfaceInfoAddRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userInterfaceInfoAddRequest <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">UserInterfaceInfo</span> userInterfaceInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>userInterfaceInfoAddRequest<span class="token punctuation">,</span> userInterfaceInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// æ ¡éªŒ</span>
		userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">validUserInterfaceInfo</span><span class="token punctuation">(</span>userInterfaceInfo<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// è®¾ç½®å½“å‰ç”¨æˆ·id</span>
		<span class="token class-name">User</span> loginUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getLoginUser</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		userInterfaceInfo<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>loginUser<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">boolean</span> result <span class="token operator">=</span> userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>userInterfaceInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">OPERATION_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">long</span> newUserInterfaceInfoId <span class="token operator">=</span> userInterfaceInfo<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>newUserInterfaceInfoId<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * åˆ é™¤
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">deleteRequest</span>
	 * <span class="token keyword">@param</span> <span class="token parameter">request</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">deleteUserInterfaceInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">DeleteRequest</span> deleteRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>deleteRequest <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> deleteRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getLoginUser</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">long</span> id <span class="token operator">=</span> deleteRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span>
		<span class="token class-name">UserInterfaceInfo</span> oldUserInterfaceInfo <span class="token operator">=</span> userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>oldUserInterfaceInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// ä»…æœ¬äººæˆ–ç®¡ç†å‘˜å¯åˆ é™¤</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>oldUserInterfaceInfo<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>userService<span class="token punctuation">.</span><span class="token function">isAdmin</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NO_AUTH_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">boolean</span> b <span class="token operator">=</span> userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">removeById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * æ›´æ–°
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">userInterfaceInfoUpdateRequest</span>
	 * <span class="token keyword">@param</span> <span class="token parameter">request</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateUserInterfaceInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">UserInterfaceInfoUpdateRequest</span> userInterfaceInfoUpdateRequest<span class="token punctuation">,</span>
	                                                     <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userInterfaceInfoUpdateRequest <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> userInterfaceInfoUpdateRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">UserInterfaceInfo</span> userInterfaceInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>userInterfaceInfoUpdateRequest<span class="token punctuation">,</span> userInterfaceInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// å‚æ•°æ ¡éªŒ</span>
		userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">validUserInterfaceInfo</span><span class="token punctuation">(</span>userInterfaceInfo<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getLoginUser</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">long</span> id <span class="token operator">=</span> userInterfaceInfoUpdateRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span>
		<span class="token class-name">UserInterfaceInfo</span> oldUserInterfaceInfo <span class="token operator">=</span> userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>oldUserInterfaceInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// ä»…æœ¬äººæˆ–ç®¡ç†å‘˜å¯ä¿®æ”¹</span>
		userService<span class="token punctuation">.</span><span class="token function">isAdmin</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>oldUserInterfaceInfo<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>userService<span class="token punctuation">.</span><span class="token function">isAdmin</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NO_AUTH_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">boolean</span> result <span class="token operator">=</span> userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>userInterfaceInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * æ ¹æ® id è·å–
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">id</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/get&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserInterfaceInfoById</span><span class="token punctuation">(</span><span class="token keyword">long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">UserInterfaceInfo</span> userInterfaceInfo <span class="token operator">=</span> userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>userInterfaceInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * è·å–åˆ—è¡¨ï¼ˆä»…ç®¡ç†å‘˜å¯ä½¿ç”¨ï¼‰
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">userInterfaceInfoQueryRequest</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token annotation punctuation">@AuthCheck</span><span class="token punctuation">(</span>mustRole <span class="token operator">=</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/list&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">listUserInterfaceInfo</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfoQueryRequest</span> userInterfaceInfoQueryRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">UserInterfaceInfo</span> userInterfaceInfoQuery <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userInterfaceInfoQueryRequest <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>userInterfaceInfoQueryRequest<span class="token punctuation">,</span> userInterfaceInfoQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>userInterfaceInfoQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> userInterfaceInfoList <span class="token operator">=</span> userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>userInterfaceInfoList<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * åˆ†é¡µè·å–åˆ—è¡¨
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">userInterfaceInfoQueryRequest</span>
	 * <span class="token keyword">@param</span> <span class="token parameter">request</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/list/page&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Page</span><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">listUserInterfaceInfoByPage</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfoQueryRequest</span> userInterfaceInfoQueryRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userInterfaceInfoQueryRequest <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">UserInterfaceInfo</span> userInterfaceInfoQuery <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>userInterfaceInfoQueryRequest<span class="token punctuation">,</span> userInterfaceInfoQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">long</span> current <span class="token operator">=</span> userInterfaceInfoQueryRequest<span class="token punctuation">.</span><span class="token function">getCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">long</span> size <span class="token operator">=</span> userInterfaceInfoQueryRequest<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> sortField <span class="token operator">=</span> userInterfaceInfoQueryRequest<span class="token punctuation">.</span><span class="token function">getSortField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> sortOrder <span class="token operator">=</span> userInterfaceInfoQueryRequest<span class="token punctuation">.</span><span class="token function">getSortOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// é™åˆ¶çˆ¬è™«</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>userInterfaceInfoQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
		queryWrapper<span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>sortField<span class="token punctuation">)</span><span class="token punctuation">,</span>
				sortOrder<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">CommonConstant</span><span class="token punctuation">.</span><span class="token constant">SORT_ORDER_ASC</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sortField<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> userInterfaceInfoPage <span class="token operator">=</span> userInterfaceInfoService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">,</span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>userInterfaceInfoPage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡" tabindex="-1"><a class="header-anchor" href="#_3ã€è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡" aria-hidden="true">#</a> 3ã€è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡</h3><p>ç”¨æˆ·æ¯æ¬¡è°ƒç”¨æ¥å£æˆåŠŸï¼Œæ¬¡æ•°+1ï¼ˆservice)</p><p><strong>ç¼–å†™æ–¹æ³•</strong></p><p>åœ¨<strong>service</strong>å±‚çš„<strong>UserInterfaceInfoService</strong>ç¼–å†™æ–¹æ³•</p><p>è¿™é‡Œåªæ˜¯è¿‡æµç¨‹ï¼Œå®é™…åº”è¯¥å¤šæ ¡éªŒ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">invokeInterfaceCount</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> interfaceInfoId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> interfaceInfoId <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">LambdaUpdateWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> updateWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaUpdateWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		updateWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getUserId</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getInterfaceInfoId</span><span class="token punctuation">,</span> interfaceInfoId<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getLeftNum</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">setSql</span><span class="token punctuation">(</span><span class="token string">&quot;left_num = left_num -1, total_num = total_num + 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>updateWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12),yn=p('<p>æ¥å£æµ‹è¯•æˆåŠŸ</p><h3 id="_4ã€é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4ã€é—®é¢˜" aria-hidden="true">#</a> 4ã€é—®é¢˜</h3><p>å¦‚æœæ¯ä¸ªæ¥å£çš„æ–¹æ³•éƒ½å†™è°ƒç”¨æ¬¡æ•°+1ï¼Œæ˜¯ä¸æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Ÿ</p><p>è‡´å‘½é—®é¢˜ï¼šæ¥å£å¼€å‘è€…éœ€è¦è‡ªå·±å»æ·»åŠ ç»Ÿè®¡ä»£ç </p><p>å°±æƒ³åˆ°å¯ä»¥ä½¿ç”¨AOPã€ç½‘å…³</p><p><strong>é€»è¾‘å›¾</strong></p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247272.png" alt="image-20230126112301389" loading="lazy"></p><p><strong>AOPåˆ‡é¢çš„ä¼˜ç‚¹</strong>ï¼šç‹¬ç«‹äºæ¥å£ï¼Œåœ¨æ¯ä¸ªæ¥å£è°ƒç”¨åç»Ÿè®¡æ¬¡æ•°+1 <strong>AOPåˆ‡é¢çš„ç¼ºç‚¹</strong>ï¼šåªå­˜åœ¨äºå•ä¸ªé¡¹ç›®ä¸­ï¼Œå¦‚æœæ¯ä¸ªå›¢é˜Ÿéƒ½è¦å¼€å‘è‡ªå·±çš„æ¨¡æ‹Ÿæ¥å£ï¼Œé‚£ä¹ˆéƒ½è¦å†™ä¸€ä¸ªåˆ‡é¢</p><p>æ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬åœ¨è¿™ä¸ªé¡¹ç›®é€‰æ‹©ä½¿ç”¨<strong>ç½‘å…³</strong></p><h2 id="åã€ç½‘å…³" tabindex="-1"><a class="header-anchor" href="#åã€ç½‘å…³" aria-hidden="true">#</a> åã€ç½‘å…³</h2><hr><p>ä»€ä¹ˆæ˜¯ç½‘å…³ï¼Ÿç†è§£æˆç«è½¦ç«™çš„æ£€ç¥¨å£ï¼Œ<strong>ç»Ÿä¸€</strong> æ£€ç¥¨</p><p><strong>ç½‘å…³ä¼˜ç‚¹</strong>ï¼š ç»Ÿä¸€è¿›è¡Œæ“ä½œï¼Œå»å¤„ç†ä¸€äº›é—®é¢˜</p><h3 id="_1ã€ç½‘å…³ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_1ã€ç½‘å…³ä½œç”¨" aria-hidden="true">#</a> 1ã€ç½‘å…³ä½œç”¨</h3><hr><ol><li>è·¯ç”±</li><li>è´Ÿè½½å‡è¡¡</li><li>ç»Ÿä¸€é‰´æƒ</li><li>ç»Ÿä¸€å¤„ç†è·¨åŸŸ</li><li>ç»Ÿä¸€ä¸šåŠ¡å¤„ç†ï¼ˆç¼“å­˜ï¼‰</li><li>è®¿é—®æ§åˆ¶</li><li>å‘å¸ƒæ§åˆ¶</li><li>æµé‡æŸ“è‰²</li><li>ç»Ÿä¸€æ¥å£ä¿æŠ¤ <ol><li>é™åˆ¶è¯·æ±‚</li><li>ä¿¡æ¯è„±æ•</li><li>é™çº§ï¼ˆç†”æ–­ï¼‰</li><li>é™æµ å­¦ä¹ ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œå­¦ä¹ éœ²æ¡¶ç®—æ³•ï¼Œå­¦ä¹ ä¸€ä¸‹RedislimitHandler</li><li>è¶…æ—¶æ—¶é—´</li><li>é‡è¯•ï¼ˆä¸šåŠ¡ä¿æŠ¤ï¼‰</li></ol></li><li>ç»Ÿä¸€æ—¥å¿—</li><li>ç»Ÿä¸€æ–‡æ¡£</li></ol><h3 id="_2ã€å…·ä½“ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_2ã€å…·ä½“ä½œç”¨" aria-hidden="true">#</a> 2ã€å…·ä½“ä½œç”¨</h3><hr><p><strong>è·¯ç”±</strong></p><p>èµ·åˆ°è½¬å‘çš„ä½œç”¨ï¼Œæ¯”å¦‚æœ‰æ¥å£Aå’Œæ¥å£B,ç½‘å…³ä¼šè®°å½•è¿™äº›ä¿¡æ¯ï¼Œæ ¹æ®ç”¨æˆ·è®¿é—®çš„åœ°å€å’Œå‚æ•°ï¼Œè½¬å‘è¯·æ±‚åˆ°å¯¹åº”çš„æ¥å£ï¼ˆæœåŠ¡å™¨/é›†ç¾¤ï¼‰</p><p>ç”¨æˆ·aè°ƒç”¨æ¥å£A</p><p>/a =&gt; æ¥å£A /b =&gt; æ¥å£B</p>',22),hn={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##gateway-request-predicates-factories",target:"_blank",rel:"noopener noreferrer"},wn=n("p",null,[n("strong",null,"è´Ÿè½½å‡è¡¡")],-1),In=n("p",null,"åœ¨è·¯ç”±çš„åŸºç¡€ä¸Šå¯ä»¥è½¬å‘åˆ°æŸä¸€ä¸ªæœåŠ¡å™¨",-1),qn=n("p",null,"/c => æœåŠ¡A/ é›†ç¾¤Aï¼ˆéšæœºè½¬å‘åˆ°å…¶ä¸­çš„æŸä¸€ä¸ªæœºå™¨ï¼‰",-1),_n=n("p",null,"uriä»å›ºå®šåœ°å€æ”¹æˆb:xx",-1),xn=n("p",null,[n("strong",null,"ç»Ÿä¸€é‰´æƒ")],-1),Rn=n("p",null,"åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¿›è¡Œæ“ä½œï¼Œæ— è®ºè®¿é—®ä»€ä¹ˆæ¥å£ï¼Œæˆ‘éƒ½ç»Ÿä¸€å»åˆ¤æ–­æƒé™ï¼Œä¸ç”¨é‡å¤å†™",-1),Sn=n("p",null,[n("strong",null,"ç»Ÿä¸€å¤„ç†è·¨åŸŸ")],-1),jn=n("p",null,"ç½‘å…³ç»Ÿä¸€å¤„ç†è·¨åŸŸï¼Œä¸ç”¨åœ¨æ¯ä¸ªé¡¹ç›®å•ç‹¬å¤„ç†",-1),Un={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##cors-configuration",target:"_blank",rel:"noopener noreferrer"},Cn=n("p",null,[n("strong",null,"ç»Ÿä¸€ä¸šåŠ¡å¤„ç†")],-1),En=n("p",null,"æŠŠæ¯ä¸ªé¡¹ç›®ä¸­éƒ½è¦åšçš„é€šç”¨é€»è¾‘æ”¾åˆ°ä¸Šå±‚ï¼ˆç½‘å…³ï¼‰ï¼Œç»Ÿä¸€å¤„ç†ï¼Œæ¯”å¦‚æœ¬é¡¹ç›®çš„æ¬¡æ•°ç»Ÿè®¡",-1),An=n("p",null,[n("strong",null,"è®¿é—®æ§åˆ¶")],-1),Tn=n("p",null,"é»‘ç™½åå•ï¼Œæ¯”å¦‚é™åˆ¶DDOS IP",-1),Pn=n("p",null,[n("strong",null,"å‘å¸ƒæ§åˆ¶")],-1),On=n("p",null,"ç°åº¦å‘å¸ƒï¼Œæ¯”å¦‚ä¸Šçº¿æ–°æ¥å£ï¼Œå…ˆç»™æ–°æ¥å£åˆ†é… 20%æµé‡ï¼Œè€æ¥å£80% ,å†æ…¢æ…¢è°ƒæ•´æ¯”ä¾‹",-1),Bn={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-weight-route-predicate-factory",target:"_blank",rel:"noopener noreferrer"},Mn=n("p",null,[n("strong",null,"æµé‡æŸ“è‰²")],-1),Dn=n("p",null,"åŒºåˆ†ç”¨æˆ·æ¥æº",-1),Fn={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-addrequestheader-gatewayfilter-factory",target:"_blank",rel:"noopener noreferrer"},Ln=n("strong",null,"å…¨å±€æŸ“è‰²",-1),Hn={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##default-filters",target:"_blank",rel:"noopener noreferrer"},Nn=n("p",null,[n("strong",null,"æ¥å£ä¿æŠ¤")],-1),zn=n("p",null,"é™åˆ¶è¯·æ±‚",-1),Gn={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##requestheadersiz-gatewayfilter-factory",target:"_blank",rel:"noopener noreferrer"},Kn=n("p",null,"ä¿¡æ¯è„±æ•",-1),Wn={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-removerequestheader-gatewayfilter-factory",target:"_blank",rel:"noopener noreferrer"},Vn=n("p",null,"é™çº§ï¼ˆç†”æ–­ï¼‰ è¿›è¡Œå…œåº•",-1),Qn={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##fallback-headers",target:"_blank",rel:"noopener noreferrer"},Xn=n("p",null,"é™æµ",-1),Jn={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-requestratelimiter-gatewayfilter-factory",target:"_blank",rel:"noopener noreferrer"},Yn=n("p",null,"è¶…æ—¶æ—¶é—´ è¶…æ—¶å°±ä¸­æ–­",-1),$n={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##http-timeouts-configuration",target:"_blank",rel:"noopener noreferrer"},Zn=n("p",null,"é‡è¯•ï¼ˆä¸šåŠ¡ä¿æŠ¤ï¼‰ï¼š",-1),ns={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-retry-gatewayfilter-factory",target:"_blank",rel:"noopener noreferrer"},ss=n("p",null,[n("strong",null,"ç»Ÿä¸€æ—¥å¿—")],-1),as=n("p",null,"ç»Ÿä¸€çš„è¯·æ±‚ï¼Œå“åº”ä¿¡æ¯è®°å½•",-1),ts=n("p",null,[n("strong",null,"ç»Ÿä¸€æ–‡æ¡£")],-1),ps=n("p",null,"å°†ä¸‹æ¸¸é¡¹ç›®çš„æ–‡æ¡£è¿›è¡Œèšåˆï¼Œåœ¨ä¸€ä¸ªé¡µé¢ç»Ÿä¸€æŸ¥çœ‹",-1),es={href:"https://doc.xiaominfo.com/docs/middleware-sources/aggregation-introduction",target:"_blank",rel:"noopener noreferrer"},os=n("p",null,[n("strong",null,"ç½‘å…³çš„åˆ†ç±»")],-1),cs=n("ul",null,[n("li",null,"**å…¨å±€ç½‘å…³ï¼ˆæ¥å…¥å±‚ç½‘å…³ï¼‰**ä½œç”¨æ˜¯è´Ÿè½½å‡è¡¡ã€è¯·æ±‚æ—¥å¿—ç­‰ï¼Œä¸å’Œä¸šåŠ¡é€»è¾‘ç»‘å®š"),n("li",null,"**ä¸šåŠ¡ç½‘å…³ï¼ˆå¾®æœåŠ¡ç½‘å…³ï¼‰**ä¼šæœ‰ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œä½œç”¨æ˜¯å°†è¯·æ±‚è½¬å‘åˆ°ä¸åŒçš„ä¸šåŠ¡/é¡¹ç›®/æ¥å£/æœåŠ¡")],-1),ls={href:"https://blog.csdn.net/qq_21040559/article/details/122961395",target:"_blank",rel:"noopener noreferrer"},is=n("p",null,[n("strong",null,"å®ç°")],-1),us=n("ol",null,[n("li",null,[n("strong",null,"Nginx"),s(" ï¼ˆå…¨å±€ç½‘å…³ï¼‰ï¼Œ"),n("strong",null,"Kongç½‘å…³"),s("ï¼ˆAPIç½‘å…³ï¼‰ï¼Œ "),n("strong",null,"ç¼–ç¨‹æˆæœ¬ç›¸å¯¹è¾ƒé«˜")]),n("li",null,[n("strong",null,"Spring Cloud Gateway"),s("ï¼ˆå–ä»£äº†Zuulï¼‰æ€§èƒ½é«˜ å¯ä»¥ç”¨javaä»£ç æ¥å†™é€»è¾‘ é€‚äºå­¦ä¹ ")])],-1),ks={href:"https://zhuanlan.zhihu.com/p/500587132",target:"_blank",rel:"noopener noreferrer"},rs=n("h2",{id:"åä¸€ã€spring-cloud-gateway",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#åä¸€ã€spring-cloud-gateway","aria-hidden":"true"},"#"),s(" åä¸€ã€Spring Cloud Gateway")],-1),ds=n("hr",null,null,-1),vs=n("p",null,"å…¨éƒ¨å†…å®¹åŸºæœ¬æ¥è‡ªå®˜ç½‘",-1),ms={href:"https://spring.io/projects/spring-cloud-gateway",target:"_blank",rel:"noopener noreferrer"},gs={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference//html/",target:"_blank",rel:"noopener noreferrer"},bs=p(`<p><strong>æ–°å»ºé¡¹ç›®</strong></p><p>åœ¨IDEAä¸­æ–°å»ºé¡¹ç›® å‹¾é€‰Gatewayã€Lombok</p><p>å‚è€ƒå®˜ç½‘get startedä¸­çš„å®ä¾‹ä»£ç </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemogatewayApplication</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">customRouteLocator</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;path_route&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/get&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;host_route&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">host</span><span class="token punctuation">(</span><span class="token string">&quot;*.myhost.org&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;rewrite_route&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">host</span><span class="token punctuation">(</span><span class="token string">&quot;*.rewrite.org&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-&gt;</span> f<span class="token punctuation">.</span><span class="token function">rewritePath</span><span class="token punctuation">(</span><span class="token string">&quot;/foo/(?&lt;segment&gt;.*)&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/\${segment}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;hystrix_route&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">host</span><span class="token punctuation">(</span><span class="token string">&quot;*.hystrix.org&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-&gt;</span> f<span class="token punctuation">.</span><span class="token function">hystrix</span><span class="token punctuation">(</span>c <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;slowcmd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;hystrix_fallback_route&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">host</span><span class="token punctuation">(</span><span class="token string">&quot;*.hystrixfallback.org&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-&gt;</span> f<span class="token punctuation">.</span><span class="token function">hystrix</span><span class="token punctuation">(</span>c <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;slowcmd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFallbackUri</span><span class="token punctuation">(</span><span class="token string">&quot;forward:/hystrixfallback&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;limit_route&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r
				<span class="token punctuation">.</span><span class="token function">host</span><span class="token punctuation">(</span><span class="token string">&quot;*.limited.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/anything/**&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-&gt;</span> f<span class="token punctuation">.</span><span class="token function">requestRateLimiter</span><span class="token punctuation">(</span>c <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">setRateLimiter</span><span class="token punctuation">(</span><span class="token function">redisRateLimiter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–å†™ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span></span><span class="token class-name">RouteLocator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span>builder<span class="token punctuation">.</span></span><span class="token class-name">RouteLocatorBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XuanapiGatewayApplication</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">XuanapiGatewayApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">customRouteLocator</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;to_baidu&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/baidu&quot;</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.baidu.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ç™¾åº¦æˆåŠŸ</p><h3 id="_1ã€æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_1ã€æ ¸å¿ƒæ¦‚å¿µ" aria-hidden="true">#</a> 1ã€æ ¸å¿ƒæ¦‚å¿µ</h3><hr>`,9),fs={id:"_1ã€glossary",tabindex:"-1"},ys=n("a",{class:"header-anchor",href:"#_1ã€glossary","aria-hidden":"true"},"#",-1),hs={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##glossary",target:"_blank",rel:"noopener noreferrer"},ws=n("p",null,"å®˜æ–¹æ–‡æ¡£å¦‚ä¸‹",-1),Is=n("li",null,[n("strong",null,"Route"),s(": The basic building block of the gateway. It is defined by an ID, a destination URI, a collection of predicates, and a collection of filters. A route is matched if the aggregate predicate is true.")],-1),qs=n("strong",null,"Predicate",-1),_s={href:"https://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html",target:"_blank",rel:"noopener noreferrer"},xs={href:"https://docs.spring.io/spring/docs/5.0.x/javadoc-api/org/springframework/web/server/ServerWebExchange.html",target:"_blank",rel:"noopener noreferrer"},Rs=n("code",null,"ServerWebExchange",-1),Ss=n("strong",null,"Filter",-1),js={href:"https://github.com/spring-cloud/spring-cloud-gateway/tree/main/spring-cloud-gateway-server/src/main/java/org/springframework/cloud/gateway/filter/GatewayFilter.java",target:"_blank",rel:"noopener noreferrer"},Us=n("code",null,"GatewayFilter",-1),Cs=p(`<ol><li><p>è·¯ç”±ï¼ˆæ ¹æ®ä»€ä¹ˆæ¡ä»¶ï¼Œè½¬å‘åˆ°å“ªé‡Œï¼‰</p></li><li><p>æ–­è¨€ï¼ˆä¸€ç»„è§„åˆ™ï¼Œæ¡ä»¶ï¼Œç”¨æ¥ç¡®å®šå¦‚ä½•è½¬å‘è·¯ç”±ï¼‰</p></li><li><p>è¿‡æ»¤å™¨ï¼šå¯¹è¯·æ±‚è¿›è¡Œä¸€ç³»åˆ—çš„å¤„ç†ï¼Œæ¯”å¦‚æ·»åŠ è¯·æ±‚å¤´ï¼Œæ·»åŠ è¯·æ±‚å‚æ•°</p></li></ol><h4 id="_2ã€è¯·æ±‚æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2ã€è¯·æ±‚æµç¨‹" aria-hidden="true">#</a> 2ã€è¯·æ±‚æµç¨‹</h4><ol><li>å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚</li><li>Handler Mapping ï¼šæ ¹æ®æ–­è¨€ï¼Œå»å°†è¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„è·¯ç”±</li><li>Web Handlerï¼šå¤„ç†è¯·æ±‚ï¼ˆä¸€å±‚å±‚ç»è¿‡è¿‡æ»¤å™¨ï¼‰</li><li>å®é™…è°ƒç”¨æœåŠ¡</li></ol><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247477.png" alt="image-20230131144724778" loading="lazy"></p><h3 id="_2ã€ä¸¤ç§é…ç½®æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2ã€ä¸¤ç§é…ç½®æ–¹å¼" aria-hidden="true">#</a> 2ã€ä¸¤ç§é…ç½®æ–¹å¼</h3><hr><ol><li><p>é…ç½®å¼ ï¼ˆæ–¹ä¾¿ï¼Œè§„èŒƒï¼‰èƒ½ç”¨å°±ç”¨</p><ol><li><p>ç®€åŒ–ç‰ˆ</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> after_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Cookie=mycookie<span class="token punctuation">,</span>mycookievalue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å…¨ç§°</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> after_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cookie
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> mycookie
            <span class="token key atrule">regexp</span><span class="token punctuation">:</span> mycookievalue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>ç¼–ç¨‹å¼ ï¼ˆçµæ´»ï¼Œç›¸å¯¹éº»çƒ¦ï¼‰</p></li></ol><h3 id="_3ã€è·¯ç”±çš„å„ç§æ–­è¨€" tabindex="-1"><a class="header-anchor" href="#_3ã€è·¯ç”±çš„å„ç§æ–­è¨€" aria-hidden="true">#</a> 3ã€è·¯ç”±çš„å„ç§æ–­è¨€</h3><hr>`,9),Es={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##gateway-request-predicates-factories",target:"_blank",rel:"noopener noreferrer"},As=p(`<p><strong>ç›®å½•</strong></p><ol><li>After åœ¨xxæ—¶é—´ä¹‹å</li><li>Before åœ¨xxæ—¶é—´ä¹‹å‰</li><li>Between åœ¨xxæ—¶é—´ä¹‹é—´</li><li>è¯·æ±‚ç±»åˆ«</li><li>è¯·æ±‚å¤´ï¼ˆåŒ…å«Cookie)</li><li>æŸ¥æ¶§å‚æ•°</li><li>å®¢æˆ·ç«¯åœ°å€</li><li><strong>æƒé‡</strong></li></ol><p><strong>The After Route Predicate Factory</strong></p><p>å½“å‰æ—¶é—´åœ¨è¿™ä¸ªæ—¶é—´<strong>ä¹‹å</strong>ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> after_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> After=2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>20T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Before Route Predicate Factory</strong></p><p>å½“å‰æ—¶é—´åœ¨è¿™ä¸ªæ—¶é—´<strong>ä¹‹å‰</strong>ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> before_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Before=2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>20T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Between Route Predicate Factory</strong></p><p>å½“å‰æ—¶é—´åœ¨è¿™ä¸ªæ—¶é—´<strong>ä¹‹é—´</strong>ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> between_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Between=2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>20T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span><span class="token punctuation">,</span> 2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>21T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Cookie Route Predicate Factory</strong></p><p>å¦‚æœä½ çš„<strong>è¯·æ±‚å¤´cookie</strong>çš„æ˜¯<strong>chocolate</strong>ï¼Œå®ƒçš„å€¼æ˜¯<strong>ch.p</strong>ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> cookie_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Cookie=chocolate<span class="token punctuation">,</span> ch.p
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Header Route Predicate Factory</strong></p><p>å¦‚æœä½ çš„<strong>è¯·æ±‚å¤´</strong>åŒ…å«<strong>X-Request-Id</strong>è¿™æ ·ä¸€ä¸ªè¯·æ±‚å¤´ï¼Œå¹¶ä¸”ï¼Œå®ƒçš„å€¼ç¬¦åˆ<strong>æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™</strong>ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> header_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Header=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Id<span class="token punctuation">,</span> \\d+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Host Route Predicate Factory</strong></p>`,18),Ts=n("strong",null,"è®¿é—®",-1),Ps={href:"http://anotherhost.org",target:"_blank",rel:"noopener noreferrer"},Os=n("strong",null,"åŸŸå",-1),Bs=p(`<div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> host_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Host=<span class="token important">**.somehost.org</span><span class="token punctuation">,</span><span class="token important">**.anotherhost.org</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Method Route Predicate Factory</strong></p><p>å¦‚æœä½ çš„<strong>è¯·æ±‚ç±»åˆ«</strong>æ˜¯è¿™ä¸ª<strong>GET</strong>ã€<strong>POST</strong>ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> method_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Method=GET<span class="token punctuation">,</span>POST

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Path Route Predicate Factory</strong></p><p>å¦‚æœä½ çš„<strong>è®¿é—®çš„åœ°å€</strong>æ˜¯ä»¥è¿™äº›**/red/{segment},/blue/{segment}**è·¯å¾„ä½œä¸ºå‰ç¼€ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> path_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Path=/red/<span class="token punctuation">{</span>segment<span class="token punctuation">}</span><span class="token punctuation">,</span>/blue/<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Query Route Predicate Factory</strong></p><p>æ ¹æ®<strong>æŸ¥è¯¢æ¡ä»¶</strong>ï¼Œæ¯”å¦‚red greet greenï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> query_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Query=red<span class="token punctuation">,</span> gree.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The RemoteAddr Route Predicate Factory</strong></p><p>æ ¹æ®<strong>è¿œç¨‹åœ°å€</strong>ï¼Œæ¯”å¦‚ä½ çš„ç”¨æˆ·çš„ipåœ°å€æ˜¯192.168.1.1/24ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> remoteaddr_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> RemoteAddr=192.168.1.1/24
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Weight Route Predicate Factory</strong></p><p>æ ¹æ®ä½ è®¾ç½®çš„<strong>æƒé‡</strong>ï¼Œç»™ä½ æŠŠåŒä¸€ä¸ªè®¿é—®çš„åœ°å€ï¼Œé‡å®šåˆ°ä¸åŒçš„æœåŠ¡ï¼Œè½»æ¾å®ç°å‘å¸ƒæ§åˆ¶</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> weight_high
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//weighthigh.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Weight=group1<span class="token punctuation">,</span> <span class="token number">8</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> weight_low
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//weightlow.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Weight=group1<span class="token punctuation">,</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The XForwarded Remote Addr Route Predicate Factory</strong></p><p>ä»è¯·æ±‚å¤´ä¸­å¦‚æœæ‹¿åˆ°XForwardedè¿™ä¸ª<strong>è¯·æ±‚å¤´çš„åœ°å€</strong>192.168.1.1/24 å°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> xforwarded_remoteaddr_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> XForwardedRemoteAddr=192.168.1.1/24
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4ã€è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#_4ã€è¿‡æ»¤å™¨" aria-hidden="true">#</a> 4ã€è¿‡æ»¤å™¨</h3><hr>`,21),Ms=n("strong",null,"å®˜ç½‘æ–‡æ¡£",-1),Ds={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##gatewayfilter-factories",target:"_blank",rel:"noopener noreferrer"},Fs=p(`<p><strong>åŸºæœ¬åŠŸèƒ½</strong>ï¼šå¯¹è¯·æ±‚å¤´ã€è¯·æ±‚å‚æ•°ã€å“åº”å¤´çš„å¢åˆ æ”¹æŸ¥ 1.æ·»åŠ æ¸…æ±‚å¤´ 2.æ·»åŠ è¯·æ±‚å‚æ•° 3.æ·»åŠ å“åº”å¤´ 4.é™çº§ 5.é™æµ 6.é‡è¯•</p><p><strong>The <code>AddRequestHeader</code> <code>GatewayFilter</code> Factory</strong></p><p>å¢åŠ è¯·æ±‚å¤´ ï¼ˆå¯ä»¥ç”¨ä½œæµé‡æŸ“è‰²ï¼‰</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> add_request_header_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> AddRequestHeader=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>red<span class="token punctuation">,</span> blue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨xuan-apiåšæµ‹è¯•</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8090</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> name_api_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8123</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/<span class="token important">**</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> AddRequestHeader=color<span class="token punctuation">,</span> blue
            <span class="token punctuation">-</span> AddRequestParameter=name<span class="token punctuation">,</span> mars
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),Ls={href:"http://localhost:8090/api/name/xuan",target:"_blank",rel:"noopener noreferrer"},Hs=p(`<p>å¾—åˆ°ç»“æœå¦‚ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247537.png" alt="image-20230131162105385" loading="lazy"></p><p><strong>The <code>AddRequestParameter</code> <code>GatewayFilter</code> Factory</strong></p><p>å¢åŠ è¯·æ±‚å‚æ•°</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> add_request_parameter_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> AddRequestParameter=red<span class="token punctuation">,</span> blue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The <code>AddResponseHeader</code> <code>GatewayFilter</code> Factory</strong></p><p>æ·»åŠ å“åº”å¤´</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> add_response_header_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> AddResponseHeader=X<span class="token punctuation">-</span>Response<span class="token punctuation">-</span>Red<span class="token punctuation">,</span> Blue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The <code>DedupeResponseHeader</code> <code>GatewayFilter</code> Factory</strong></p><p>å¦‚æœå“åº”å¤´ä¸­æœ‰é‡å¤çš„ï¼Œå»é‡</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> dedupe_response_header_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> DedupeResponseHeader=Access<span class="token punctuation">-</span>Control<span class="token punctuation">-</span>Allow<span class="token punctuation">-</span>Credentials Access<span class="token punctuation">-</span>Control<span class="token punctuation">-</span>Allow<span class="token punctuation">-</span>Origin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿ç•™ç­–ç•¥ï¼Œç¬¬ä¸€ï¼Œæœ€åï¼Œéšæœº</p><p>The <code>DedupeResponseHeader</code> filter also accepts an optional <code>strategy</code> parameter. The accepted values are <code>RETAIN_FIRST</code> (default), <code>RETAIN_LAST</code>, and <code>RETAIN_UNIQUE</code>.</p><p><strong>Spring Cloud CircuitBreaker GatewayFilter Factory</strong></p><p>é™çº§</p><p>éœ€è¦å¼•å…¥<strong>spring-cloud-starter-circuitbreaker-reactor-resilience4j</strong>åŒ…</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-circuitbreaker-reactor-resilience4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> circuitbreaker_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//backing<span class="token punctuation">-</span>service<span class="token punctuation">:</span><span class="token number">8088</span>
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Path=/consumingServiceEndpoint
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> CircuitBreaker
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> myCircuitBreaker
            <span class="token key atrule">fallbackUri</span><span class="token punctuation">:</span> forward<span class="token punctuation">:</span>/inCaseOfFailureUseThis
        <span class="token punctuation">-</span> RewritePath=/consumingServiceEndpoint<span class="token punctuation">,</span> /backingServiceEndpoint
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The <code>FallbackHeaders</code> <code>GatewayFilter</code> Factory</strong></p><p>é™çº§å¤„ç†å™¨ï¼Œå†™ä¸€ä¸‹é™çº§è§„åˆ™</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> ingredients
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//ingredients
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Path=//ingredients/<span class="token important">**</span>
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> CircuitBreaker
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> fetchIngredients
            <span class="token key atrule">fallbackUri</span><span class="token punctuation">:</span> forward<span class="token punctuation">:</span>/fallback
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> ingredients<span class="token punctuation">-</span>fallback
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9994</span>
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Path=/fallback
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> FallbackHeaders
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token key atrule">executionExceptionTypeHeaderName</span><span class="token punctuation">:</span> Test<span class="token punctuation">-</span>Header
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The <code>MapRequestHeader</code> <code>GatewayFilter</code> Factory</strong></p><p>å¦‚æœä½ çš„<strong>è¯·æ±‚å¤´</strong>é‡Œé¢æœ‰<strong>Blue</strong>ï¼Œä¼šæŠŠ<strong>Blue</strong>çš„å€¼ç»™<strong>X-Request-Red</strong>ï¼Œç›¸å½“äºåšäº†æ˜ å°„</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> map_request_header_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> MapRequestHeader=Blue<span class="token punctuation">,</span> X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Red
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The <code>PrefixPath</code> <code>GatewayFilter</code> Factory</strong></p><p>å‰ç¼€å¤„ç†å™¨</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> prefixpath_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> PrefixPath=/mypath
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¼šå°†/mypathä½œä¸ºæ‰€æœ‰åŒ¹é…è¯·æ±‚çš„è·¯å¾„çš„å‰ç¼€ã€‚å› æ­¤ï¼Œå¯¹/helloçš„è¯·æ±‚å°†å‘é€åˆ°/mypath/helloã€‚</p><p><strong>The <code>PreserveHostHeader</code> <code>GatewayFilter</code> Factoryatewayfilter-factory)</strong></p><p>è¯·æ±‚å¤´è½¬å‘çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™<strong>hostå€¼</strong>ä¼šå˜ï¼Œè¿™ä¸ªå¯ä»¥ä¿è¯ä¸å˜</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> preserve_host_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> PreserveHostHeader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The <code>RequestRateLimiter</code> <code>GatewayFilter</code> Factory</strong></p><p>é™æµ</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247586.png" alt="image-20230131175738299" loading="lazy"></p><p>ä¸€èˆ¬ä¼šä½¿ç”¨redis+ä»¤ç‰Œæ¡¶ç®—æ³•</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> requestratelimiter_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> RequestRateLimiter
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token key atrule">redis-rate-limiter.replenishRate</span><span class="token punctuation">:</span> <span class="token number">10</span>
            <span class="token key atrule">redis-rate-limiter.burstCapacity</span><span class="token punctuation">:</span> <span class="token number">20</span>
            <span class="token key atrule">redis-rate-limiter.requestedTokens</span><span class="token punctuation">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code>RequestHeaderSize</code> <code>GatewayFilter</code> Factory</strong></p><p>é™åˆ¶è¯·æ±‚å¤´å¤§å° <strong>è¯·æ±‚ä¿æŠ¤</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> requestheadersize_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> RequestHeaderSize=1000B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The RemoveRequestHeader Gateway Filter Factory</strong></p><p>ç§»é™¤è¯·æ±‚å¤´ ï¼ˆè„±æ•ï¼‰</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> removerequestheader_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> RemoveRequestHeader=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Foo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This removes the <code>X-Request-Foo</code> header before it is sent downstream.</p><p><strong>The <code>RewritePath</code> <code>GatewayFilter</code> Factory</strong></p><p>æ”¹å†™ç‰¹æ®Šçš„è¯·æ±‚å‚æ•°</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> rewritepath_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Path=/red/<span class="token important">**</span>
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> RewritePath=/red/<span class="token punctuation">?</span>(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">&gt;</span>.<span class="token important">*)</span><span class="token punctuation">,</span> /$\\<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>The Retry <code>GatewayFilter</code> Factory</strong></p><p>è‡ªåŠ¨å¸®ä½ é‡è¯•æ¥å£ï¼Œé™çº§é‡è¯•</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> retry_test
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8080/flakey
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Host=<span class="token important">*.retry.com</span>
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Retry
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
            <span class="token key atrule">statuses</span><span class="token punctuation">:</span> BAD_GATEWAY
            <span class="token key atrule">methods</span><span class="token punctuation">:</span> GET<span class="token punctuation">,</span>POST
            <span class="token key atrule">backoff</span><span class="token punctuation">:</span>
              <span class="token key atrule">firstBackoff</span><span class="token punctuation">:</span> 10ms
              <span class="token key atrule">maxBackoff</span><span class="token punctuation">:</span> 50ms
              <span class="token key atrule">factor</span><span class="token punctuation">:</span> <span class="token number">2</span>
              <span class="token key atrule">basedOnPreviousValue</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Default Filters</strong></p><p>é»˜è®¤è¿‡æ»¤å™¨ å¯ä»¥ç”¨ä½œå…¨å±€æŸ“è‰²</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">default-filters</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> AddResponseHeader=X<span class="token punctuation">-</span>Response<span class="token punctuation">-</span>Default<span class="token punctuation">-</span>Red<span class="token punctuation">,</span> Default<span class="token punctuation">-</span>Blue
      <span class="token punctuation">-</span> PrefixPath=/httpbin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5ã€å…¶ä»–é…ç½®" tabindex="-1"><a class="header-anchor" href="#_5ã€å…¶ä»–é…ç½®" aria-hidden="true">#</a> 5ã€å…¶ä»–é…ç½®</h3><hr><h4 id="_1ã€å…¨å±€è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#_1ã€å…¨å±€è¿‡æ»¤å™¨" aria-hidden="true">#</a> 1ã€å…¨å±€è¿‡æ»¤å™¨</h4><p>Global Filters</p><p>å®šä¹‰è¿‡æ»¤å™¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">GlobalFilter</span> <span class="token function">customFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CustomGlobalFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;custom global filter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2ã€http-timeouts-configuration" tabindex="-1"><a class="header-anchor" href="#_2ã€http-timeouts-configuration" aria-hidden="true">#</a> 2ã€Http timeouts configuration</h4><p>Global timeouts</p><p>é…ç½®httpè¶…æ—¶</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">httpclient</span><span class="token punctuation">:</span>
        <span class="token key atrule">connect-timeout</span><span class="token punctuation">:</span> <span class="token number">1000</span>
        <span class="token key atrule">response-timeout</span><span class="token punctuation">:</span> 5s

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€cors-configuration" tabindex="-1"><a class="header-anchor" href="#_3ã€cors-configuration" aria-hidden="true">#</a> 3ã€CORS Configuration</h4><p>è·¨åŸŸé…ç½®</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">globalcors</span><span class="token punctuation">:</span>
        <span class="token key atrule">cors-configurations</span><span class="token punctuation">:</span>
          <span class="token key atrule">&#39;[/**]&#39;</span><span class="token punctuation">:</span>
            <span class="token key atrule">allowedOrigins</span><span class="token punctuation">:</span> <span class="token string">&quot;https://docs.spring.io&quot;</span>
            <span class="token key atrule">allowedMethods</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> GET
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å°ä½œä¸šï¼š</strong></p>`,66),Ns={href:"https://spring.io/projects/spring-cloud-gateway/##samples",target:"_blank",rel:"noopener noreferrer"},zs=p('<h2 id="åäºŒã€é¡¹ç›®æ•´åˆç½‘å…³" tabindex="-1"><a class="header-anchor" href="#åäºŒã€é¡¹ç›®æ•´åˆç½‘å…³" aria-hidden="true">#</a> åäºŒã€é¡¹ç›®æ•´åˆç½‘å…³</h2><hr><ol><li>å®ç°ç»Ÿä¸€çš„ç”¨æˆ·é‰´æƒ ï¼Œç»Ÿä¸€çš„æ¥å£è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡ï¼ˆæŠŠAPIç½‘å…³ç”¨åˆ°é¡¹ç›®ä¸­ï¼‰</li><li>å®Œå–„åŠŸèƒ½</li></ol><p><strong>ä¼šç”¨åˆ°çš„ç‰¹æ€§</strong></p><ol><li>è·¯ç”±ï¼ˆè½¬å‘è¯·æ±‚åˆ°æ¨¡æ‹Ÿæ¥å£é¡¹ç›®ï¼‰</li><li><s>è´Ÿè½½å‡è¡¡ï¼ˆéœ€è¦ç”¨åˆ°æ³¨å†Œä¸­å¿ƒï¼‰</s></li><li>ç»Ÿä¸€é‰´æƒ(accessKeyï¼ŒsecretKey)</li><li>ç»Ÿä¸€å¤„ç†è·¨åŸŸ</li><li>ç»Ÿä¸€ä¸šåŠ¡å¤„ç†ï¼ˆæ¯æ¬¡è¯·æ±‚æ¥å£åï¼Œæ¥å£è°ƒç”¨æ¬¡æ•°+1ï¼‰</li><li>è®¿é—®æ§åˆ¶ï¼ˆé»‘ç™½åå•ï¼‰</li><li><s>å‘å¸ƒæ§åˆ¶</s></li><li>æµé‡æŸ“è‰²(è®°å½•è¯·æ±‚æ˜¯å¦ä¸ºç½‘å…³æ¥çš„)</li><li><s>ç»Ÿä¸€æ¥å£ä¿æŠ¤</s><ol><li>é™åˆ¶è¯·æ±‚</li><li>ä¿¡æ¯è„±æ•</li><li>é™çº§ï¼ˆç†”æ–­ï¼‰</li><li>é™æµ å­¦ä¹ ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œå­¦ä¹ éœ²æ¡¶ç®—æ³•ï¼Œå­¦ä¹ ä¸€ä¸‹RedislimitHandler</li><li>è¶…æ—¶æ—¶é—´</li><li>é‡è¯•ï¼ˆä¸šåŠ¡ä¿æŠ¤ï¼‰</li></ol></li><li>ç»Ÿä¸€æ—¥å¿—(è®°å½•æ¯æ¬¡çš„è¯·æ±‚å’Œå“åº”)</li><li><s>ç»Ÿä¸€æ–‡æ¡£</s></li></ol><p><strong>ä¸šåŠ¡é€»è¾‘</strong></p><ol><li>ç”¨æˆ·å‘é€è¯·æ±‚åˆ°APIç½‘å…³</li><li>è¯·æ±‚æ—¥å¿—</li><li>é»‘ç™½åå•</li><li>ç”¨æˆ·é‰´æƒï¼ˆåˆ¤æ–­akï¼Œskæ˜¯å¦åˆæ³•ï¼‰</li><li>è¯·æ±‚çš„æ¨¡æ‹Ÿæ¥å£æ˜¯å¦å­˜åœ¨ï¼Ÿ</li><li><strong>è¯·æ±‚è½¬å‘ï¼Œè°ƒç”¨æ¨¡æ‹Ÿæ¥å£</strong></li><li>å“åº”æ—¥å¿—</li><li>è°ƒç”¨æˆåŠŸï¼Œæ¥å£è°ƒç”¨æ¬¡æ•°+1</li><li>è°ƒç”¨å¤±è´¥ï¼Œè¿”å›è§„èŒƒé”™è¯¯ç </li></ol><hr><h3 id="_1ã€è¯·æ±‚è½¬å‘" tabindex="-1"><a class="header-anchor" href="#_1ã€è¯·æ±‚è½¬å‘" aria-hidden="true">#</a> 1ã€è¯·æ±‚è½¬å‘</h3><hr><p>ä½¿ç”¨PathåŒ¹é…æ–­è¨€</p>',11),Gs={href:"http://localhost:8123/api",target:"_blank",rel:"noopener noreferrer"},Ks={href:"http://localhost:8090/api/name/?name=archer%E8%BD%AC%E5%8F%91%E5%88%B0",target:"_blank",rel:"noopener noreferrer"},Ws={href:"http://localhost:8123/api/name/?name=archer",target:"_blank",rel:"noopener noreferrer"},Vs=p(`<div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>  
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8090</span>  
  
<span class="token key atrule">spring</span><span class="token punctuation">:</span>  
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>  
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>  
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>  
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> api_route  
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8123</span>  
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  
            <span class="token punctuation">-</span> Path=/api/<span class="token important">**</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•æ²¡æœ‰é—®é¢˜</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247663.png" alt="image-20230201201022011" loading="lazy"></p><h3 id="_2ã€global-filter" tabindex="-1"><a class="header-anchor" href="#_2ã€global-filter" aria-hidden="true">#</a> 2ã€Global Filter</h3><p>ä½¿ç”¨äº†Global Filtersï¼Œå…¨å±€è¯·æ±‚æ‹¦æˆªå¤„ç†ï¼ˆç±»ä¼¼aopï¼‰</p>`,5),Qs={href:"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##global-filters",target:"_blank",rel:"noopener noreferrer"},Xs=p(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¨å±€è¿‡æ»¤å™¨
 *
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/2/1
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;custom global filter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1ã€è¯·æ±‚æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_1ã€è¯·æ±‚æ—¥å¿—" aria-hidden="true">#</a> 1ã€è¯·æ±‚æ—¥å¿—</h4><p>æˆ‘ä»¬å‚è€ƒä¹‹å‰çš„AOPçš„å†™æ³•ï¼Œä»exchangeè¿™ä¸ªè·¯ç”±äº¤æ¢æœºé‡Œé¢æ‹¿åˆ°æˆ‘ä»¬æ‰€æœ‰çš„è¯·æ±‚çš„ä¿¡æ¯</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 1. è¯·æ±‚æ—¥å¿—</span>
		<span class="token class-name">ServerHttpRequest</span> request <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚id: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚è·¯å¾„: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚æ–¹æ³•: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚å‚æ•°: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚å¤´: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚åœ°å€: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247757.png" alt="image-20230201204627949" loading="lazy"></p><h4 id="_2ã€æ·»åŠ é»‘ç™½åå•" tabindex="-1"><a class="header-anchor" href="#_2ã€æ·»åŠ é»‘ç™½åå•" aria-hidden="true">#</a> 2ã€æ·»åŠ é»‘ç™½åå•</h4><p>å»ºè®®ç”¨ç™½åå•ï¼Œæ›´å®‰å…¨äº›</p><p>å¦‚æœè¿™ä¸ªæ¥æºåœ°å€ä¸æ˜¯ç™½åå•é‡Œé¢çš„ï¼Œæˆ‘ä»¬å°±ç›´æ¥è®¾ä¸ªçŠ¶æ€ç ï¼ˆè¿™é‡Œè®¾ç½®403ï¼‰ï¼Œç„¶åæ‹¦æˆªæ‰Â <strong>response.setComplete()</strong> å¯ä»¥ç†è§£ä¸ºè®¾ç½®å“åº”å®Œæˆ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token constant">IP_WHITE_LIST</span> <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;127.0.0.2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	

<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 1. è¯·æ±‚æ—¥å¿—</span>
		<span class="token class-name">ServerHttpRequest</span> request <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> remoteAddress <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHostString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚åœ°å€: {}&quot;</span><span class="token punctuation">,</span> remoteAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 2. è®¿é—®æ§åˆ¶ - é»‘ç™½åå•</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">IP_WHITE_LIST</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>remoteAddress<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token class-name">ServerHttpResponse</span> response <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†IP_WHITE_LISTè®¾ç½®ä¸ºé»‘åå• æµ‹è¯•è¢«æ‹’</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247812.png" alt="image-20230201205411510" loading="lazy"></p><h4 id="_3ã€ç”¨æˆ·é‰´æƒ" tabindex="-1"><a class="header-anchor" href="#_3ã€ç”¨æˆ·é‰´æƒ" aria-hidden="true">#</a> 3ã€ç”¨æˆ·é‰´æƒ</h4><p>æ‰¾åˆ°ä¹‹å‰ç”¨æˆ·é‰´æƒçš„ä»£ç  å¤åˆ¶è¿‡æ¥Â ä¿®æ”¹ä¸€ä¸‹Â éœ€è¦å€’å…¥æˆ‘ä¹‹å‰åšçš„starter</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.xuan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>xuanapi-client-sdk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 1. è¯·æ±‚æ—¥å¿—</span>
		<span class="token class-name">ServerHttpRequest</span> request <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚id: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚è·¯å¾„: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚æ–¹æ³•: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚å‚æ•°: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚å¤´: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> remoteAddress <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHostString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚åœ°å€: {}&quot;</span><span class="token punctuation">,</span> remoteAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 2. è®¿é—®æ§åˆ¶ - é»‘ç™½åå•</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">IP_WHITE_LIST</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>remoteAddress<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleNoAuth</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 3. ç”¨æˆ·é‰´æƒ</span>
		<span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> accessKey <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;accessKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// é˜²æ­¢ä¸­æ–‡ä¹±ç </span>
		<span class="token class-name">String</span> body <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			body <span class="token operator">=</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnsupportedEncodingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">String</span> sign <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;sign&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> nonce <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;nonce&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> timestamp <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;timestamp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">boolean</span> hasBlank <span class="token operator">=</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">hasBlank</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">,</span> body<span class="token punctuation">,</span> sign<span class="token punctuation">,</span> nonce<span class="token punctuation">,</span> timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰ç©º</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hasBlank<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// TODO ä½¿ç”¨accessKeyå»æ•°æ®åº“æŸ¥è¯¢secretKey</span>
		<span class="token comment">// å‡è®¾æŸ¥åˆ°çš„secretæ˜¯abc è¿›è¡ŒåŠ å¯†å¾—åˆ°sign</span>
		<span class="token class-name">String</span> secretKey <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> sign1 <span class="token operator">=</span> <span class="token class-name">SignUtil</span><span class="token punctuation">.</span><span class="token function">getSign</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>sign<span class="token punctuation">,</span> sign1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// TODO åˆ¤æ–­éšæœºæ•°nonce</span>
		<span class="token comment">// æ—¶é—´æˆ³æ˜¯å¦ä¸ºæ•°å­—</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">isNumber</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// äº”åˆ†é’Ÿå†…çš„è¯·æ±‚æœ‰æ•ˆ</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">parseLong</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token constant">FIVE_MINUTES</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 4. è¯·æ±‚çš„æ¨¡æ‹Ÿæ¥å£æ˜¯å¦å­˜åœ¨ï¼Ÿ</span>
		<span class="token comment">// 5. è¯·æ±‚è½¬å‘ï¼Œè°ƒç”¨æ¨¡æ‹Ÿæ¥å£</span>
		<span class="token comment">// 6. å“åº”æ—¥å¿—</span>
		<span class="token comment">// 7. è°ƒç”¨æˆåŠŸï¼Œæ¥å£è°ƒç”¨æ¬¡æ•°+1</span>
		<span class="token comment">// 8. è°ƒç”¨å¤±è´¥ï¼Œè¿”å›è§„èŒƒé”™è¯¯ç </span>
		<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleNoAuth</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4ã€åˆ¤è¯»è¯·æ±‚çš„æ¥å£æ˜¯å¦å­˜åœ¨" tabindex="-1"><a class="header-anchor" href="#_4ã€åˆ¤è¯»è¯·æ±‚çš„æ¥å£æ˜¯å¦å­˜åœ¨" aria-hidden="true">#</a> 4ã€åˆ¤è¯»è¯·æ±‚çš„æ¥å£æ˜¯å¦å­˜åœ¨</h4><p>æˆ‘ä»¬å¯ä»¥ä»<strong>æ•°æ®åº“</strong>ä¸­æŸ¥è¯¢æ¨¡æ‹Ÿæ¥å£æ˜¯å¦å­˜åœ¨ï¼Œä»¥åŠè¯·æ±‚æ–¹æ³•æ˜¯å¦åŒ¹é…ï¼ˆè¿˜å¯ä»¥æ ¡éªŒè¯·æ±‚å‚æ•°ï¼‰ å› ä¸ºç½‘å…³é¡¹ç›®æ²¡å¼•å…¥MyBatisç­‰æ“ä½œæ•°æ®åº“çš„ç±»åº“ï¼Œå¦‚æœè¯¥å­©æ“ä½œè¾ƒä¸ºå¤æ‚ï¼Œå¯ä»¥ç”±backendå¢åˆ æ”¹æŸ¥é¡¹ç›®æä¾›æ¥å£ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨å†é‡å¤å†™é€»è¾‘äº†ã€‚</p><ul><li>HTTPè¯·æ±‚ï¼ˆç”¨HTTPClientã€.ç”¨RestTemplateã€Feign)</li><li>RPC(Dubbo)</li></ul><h4 id="_5ã€è¯·æ±‚è½¬å‘-è°ƒç”¨æ¨¡æ‹Ÿæ¥å£" tabindex="-1"><a class="header-anchor" href="#_5ã€è¯·æ±‚è½¬å‘-è°ƒç”¨æ¨¡æ‹Ÿæ¥å£" aria-hidden="true">#</a> 5ã€è¯·æ±‚è½¬å‘ è°ƒç”¨æ¨¡æ‹Ÿæ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>		<span class="token comment">// 5. è¯·æ±‚è½¬å‘ï¼Œè°ƒç”¨æ¨¡æ‹Ÿæ¥å£</span>
		<span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> filter <span class="token operator">=</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 6. å“åº”æ—¥å¿—</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å“åº”çŠ¶æ€ç ï¼š{}&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 7. è°ƒç”¨æˆåŠŸï¼Œæ¥å£è°ƒç”¨æ¬¡æ•°+1</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// 8. è°ƒç”¨å¤±è´¥ï¼Œè¿”å›è§„èŒƒé”™è¯¯ç </span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> filter<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥éœ€è¦ä¿®æ”¹å®¢æˆ·ç«¯çš„åœ°å€ï¼Œè®©å®ƒç»è¿‡ç½‘å…³</p><p>æ‰¾åˆ°SDKä¿®æ”¹åœ°å€</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247002.png" alt="image-20230202162858649" loading="lazy"></p><h4 id="_6ã€å¼‚æ­¥è¿”å›é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_6ã€å¼‚æ­¥è¿”å›é—®é¢˜" aria-hidden="true">#</a> 6ã€å¼‚æ­¥è¿”å›é—®é¢˜</h4><p>åˆå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„æ¥å£è°ƒç”¨ï¼Œæ˜¯åœ¨è¿‡æ»¤å™¨å®Œæˆä¹‹åè¿›è¡Œçš„ï¼Œæ˜¯ä¸ª<strong>å¼‚æ­¥æ“ä½œ</strong></p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247148.png" alt="image-20230202163045626" loading="lazy"></p><p>é¢„æœŸæ˜¯ç­‰æ¨¡æ‹Ÿæ¥å£è°ƒç”¨å®Œæˆï¼Œæ‰è®°å½•å“åº”æ—¥å¿—ã€ç»Ÿè®¡è°ƒç”¨æ¬¡æ•°ã€‚ ä½†ç°å®æ˜¯ chain.fitter æ–¹æ³•ç«‹åˆ»è¿”å›äº†ï¼Œç›´åˆ° filter è¿‡æ»¤å™¨ return åæ‰è°ƒç”¨äº†æ¨¡æ‹Ÿæ¥å£ã€‚ åŸå› æ˜¯ï¼šchain.filter æ˜¯ä¸ªå¼‚æ­¥æ“ä½œï¼Œç†è§£ä¸ºå‰ç«¯çš„ promise</p>`,27),Js={href:"https://blog.csdn.net/qq_19636353/article/details/126759522%EF%BC%88%E4%BB%A5%E8%BF%99%E4%B8%AA%E4%B8%BA%E4%B8%BB%EF%BC%89",target:"_blank",rel:"noopener noreferrer"},Ys={href:"https://blog.csdn.net/mo_67595943/article/details/124667975",target:"_blank",rel:"noopener noreferrer"},$s={href:"https://blog.csdn.net/weixin_43933728/article/details/121359727",target:"_blank",rel:"noopener noreferrer"},Zs={href:"https://blog.csdn.net/zx156955/article/details/121670681",target:"_blank",rel:"noopener noreferrer"},na={href:"https://blog.csdn.net/qq_39529562/article/details/108911983",target:"_blank",rel:"noopener noreferrer"},sa=n("p",null,"è¿™äº›ä»£ç ä¸ç”¨è®°å¿† æœã€ŒSpring Cloud Gateway å“åº”æ—¥å¿—ã€å°±æœ‰äº†",-1),aa={href:"https://blog.csdn.net/qq_19636353/article/details/126759522",target:"_blank",rel:"noopener noreferrer"},ta=p(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
	 * å¤„ç†å“åº”
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">exchange</span>
	 * <span class="token keyword">@param</span> <span class="token parameter">chain</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResponse</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// ä»äº¤æ¢æœºæ‹¿åˆ°åŸå§‹response</span>
			<span class="token class-name">ServerHttpResponse</span> originalResponse <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// ç¼“å†²åŒºå·¥å‚ æ‹¿åˆ°ç¼“å­˜æ•°æ®</span>
			<span class="token class-name">DataBufferFactory</span> bufferFactory <span class="token operator">=</span> originalResponse<span class="token punctuation">.</span><span class="token function">bufferFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// æ‹¿åˆ°çŠ¶æ€ç </span>
			<span class="token class-name">HttpStatus</span> statusCode <span class="token operator">=</span> originalResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>statusCode <span class="token operator">==</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// è£…é¥°ï¼Œå¢å¼ºèƒ½åŠ›</span>
				<span class="token class-name">ServerHttpResponseDecorator</span> decoratedResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerHttpResponseDecorator</span><span class="token punctuation">(</span>originalResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// ç­‰è°ƒç”¨å®Œè½¬å‘çš„æ¥å£åæ‰ä¼šæ‰§è¡Œ</span>
					<span class="token annotation punctuation">@Override</span>
					<span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">writeWith</span><span class="token punctuation">(</span><span class="token class-name">Publisher</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">DataBuffer</span><span class="token punctuation">&gt;</span></span> body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;body instanceof Flux: {}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>body <span class="token keyword">instanceof</span> <span class="token class-name">Flux</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">// å¯¹è±¡æ˜¯å“åº”å¼çš„</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token keyword">instanceof</span> <span class="token class-name">Flux</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// æˆ‘ä»¬æ‹¿åˆ°çœŸæ­£çš„body</span>
							<span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">DataBuffer</span><span class="token punctuation">&gt;</span></span> fluxBody <span class="token operator">=</span> <span class="token class-name">Flux</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token comment">// å¾€è¿”å›å€¼é‡Œé¢å†™æ•°æ®</span>
							<span class="token comment">// æ‹¼æ¥å­—ç¬¦ä¸²</span>
							<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">writeWith</span><span class="token punctuation">(</span>fluxBody<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>dataBuffer <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
								<span class="token comment">// TODO 7. è°ƒç”¨æˆåŠŸï¼Œæ¥å£è°ƒç”¨æ¬¡æ•°+1</span>
								<span class="token comment">// dataä»è¿™ä¸ªcontentä¸­è¯»å–</span>
								<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>dataBuffer<span class="token punctuation">.</span><span class="token function">readableByteCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
								dataBuffer<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token class-name">DataBufferUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>dataBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// é‡Šæ”¾æ‰å†…å­˜</span>
								<span class="token comment">// 6.æ„å»ºæ—¥å¿—</span>
								<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> rspArgs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								rspArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>originalResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// data</span>
								rspArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
								log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;--- status:{} data:{}&quot;</span><span class="token comment">// data</span>
										<span class="token punctuation">,</span> rspArgs<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// log.info(&quot;&lt;-- {} {}&quot;, originalResponse.getStatusCode(), data);</span>
								<span class="token keyword">return</span> bufferFactory<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							<span class="token comment">// 8.è°ƒç”¨å¤±è´¥è¿”å›é”™è¯¯çŠ¶æ€ç </span>
							log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;--- {} å“åº”codeå¼‚å¸¸&quot;</span><span class="token punctuation">,</span> <span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">writeWith</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token comment">// è®¾ç½® response å¯¹è±¡ä¸ºè£…é¥°è¿‡çš„</span>
				<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">mutate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">response</span><span class="token punctuation">(</span>decoratedResponse<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// é™çº§å¤„ç†è¿”å›æ•°æ®</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;gateway log exception.\\n&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åäºŒã€rpc" tabindex="-1"><a class="header-anchor" href="#åäºŒã€rpc" aria-hidden="true">#</a> åäºŒã€RPC</h2><hr><p>RPCï¼ˆRemote Procedure Callï¼‰è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</p><p><strong>ç½‘å…³ä¸šåŠ¡é€»è¾‘</strong></p><p>é—®é¢˜ï¼š ç½‘å…³é¡¹ç›®æ¯”è¾ƒå­˜ç²¹ï¼Œæ²¡æœ‰æ“ä½œæ•°æ®åº“çš„åŒ…ï¼Œå¹¶ä¸”è¿˜è¦è°ƒç”¨æˆ‘ä»¬ä¹‹å‰å†™è¿‡çš„ä»£ç ï¼Ÿå¤åˆ¶ç²˜è´´ç»´æŠ¤éº»çƒ¦ ç†æƒ³ï¼šç›´æ¥è¯·æ±‚åˆ°å…¶ä»–é¡¹ç›®çš„æ–¹æ³•</p><p><strong>æ€ä¹ˆè°ƒç”¨å…¶ä»–é¡¹ç›®çš„æ–¹æ³•ï¼Ÿ</strong></p><ol><li>å¤åˆ¶ä»£ç å’Œä¾èµ–ï¼Œç¯å¢ƒ</li><li>HTTPè¯·æ±‚ï¼ˆæä¾›æ¥å£ï¼Œä¾›å…¶ä»–é¡¹ç›®è°ƒç”¨ï¼‰</li><li>RPC</li><li>æŠŠå…¬å…±çš„ä»£ç æ‰“ä¸ªjaråŒ…ï¼Œå…¶ä»–é¡¹ç›®å»å¼•ç”¨</li></ol><p><strong>HTTPè¯·æ±‚æ€ä¹ˆè°ƒç”¨</strong></p><ol><li>æä¾›æ–¹æä¾›ä¸€ä¸ªæ¥å£ï¼ˆåœ°å€ï¼Œè¯·æ±‚æ–¹æ³•ï¼Œå‚æ•°ï¼Œè¿”å›å€¼ï¼‰</li><li>è°ƒç”¨æ–¹ä½¿ç”¨HTTP Clientä¹‹ç±»çš„ä»£ç åŒ…å»å‘é€HTTPè¯·æ±‚</li></ol><p><strong>RPCä½œç”¨</strong></p><p>åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·å»è°ƒç”¨è¿œç¨‹æ–¹æ³•</p><p><strong>RPCä¼˜ç‚¹</strong></p><ol><li>å¯¹å¼€å‘è€…æ›´é€æ˜,å‡å°‘å¾ˆå¤šçš„æ²Ÿé€šæˆæœ¬</li><li>RPCå‘è¿œç¨‹æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œæœªå¿…ä½¿ç”¨HTTPåè®®ï¼Œæ¯”å¦‚è¿˜å¯ä»¥ä½¿ç”¨TCP/IPï¼Œæ€§èƒ½æ›´é«˜ã€‚ï¼ˆå†…éƒ¨æœåŠ¡æ›´å®é€‚ç”¨ï¼‰</li></ol><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247353.png" alt="image-20230203144005014" loading="lazy"></p><p>æ³¨æ„ï¼š è¿™é‡Œæ³¨å†Œä¸­å¿ƒåªæä¾›ä¿¡æ¯ï¼Œå¹¶ä¸ä¼šå¸®åŠ©è°ƒç”¨</p><h3 id="_1ã€dubboæ¡†æ¶-rpcå®ç°" tabindex="-1"><a class="header-anchor" href="#_1ã€dubboæ¡†æ¶-rpcå®ç°" aria-hidden="true">#</a> 1ã€Dubboæ¡†æ¶ï¼ˆRPCå®ç°ï¼‰</h3><hr>`,18),pa={href:"https://cn.dubbo.apache.org/zh/",target:"_blank",rel:"noopener noreferrer"},ea=n("p",null,"å¸¸è§æ¡†æ¶è¿˜æœ‰GRPCã€TRPC",-1),oa={href:"https://dubbo.incubator.apache.org/zh/docs3-v2/java-sdk/quick-start/spring-boot/",target:"_blank",rel:"noopener noreferrer"},ca=n("h4",{id:"_1ã€ä¸¤ç§ä½¿ç”¨æ–¹å¼",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1ã€ä¸¤ç§ä½¿ç”¨æ–¹å¼","aria-hidden":"true"},"#"),s(" 1ã€ä¸¤ç§ä½¿ç”¨æ–¹å¼")],-1),la=n("ol",null,[n("li",null,"Spring Bootä»£ç ï¼ˆæ³¨è§£+ç¼–ç¨‹å¼ï¼‰ï¼šå†™Javaæ¥å£ï¼ŒæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…éƒ½å»å¼•ç”¨è¿™ä¸ªæ¥å£ åç¨‹å¯¼"),n("li",null,"DL(æ¥å£è°ƒç”¨è¯­è¨€)ï¼šåˆ›å»ºä¸€ä¸ªå…¬å…±çš„æ¥å£å®šä¹‰æ–‡ä»¶ï¼ŒæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…è¯»å–è¿™ä¸ªæ–‡ä»¶ã€‚ä¼˜ç‚¹æ˜¯è·¨è¯­è¨€ï¼Œæ‰€æœ‰çš„æ¡†æ¶éƒ½è®¤è¯†")],-1),ia={href:"https://dubbo.incubator.apache.org/zh/docs3-v2/java-sdk/concepts-and-architecture/triple/",target:"_blank",rel:"noopener noreferrer"},ua=p(`<h4 id="_2ã€å¿«é€Ÿä½¿ç”¨-spring-boot" tabindex="-1"><a class="header-anchor" href="#_2ã€å¿«é€Ÿä½¿ç”¨-spring-boot" aria-hidden="true">#</a> 2ã€å¿«é€Ÿä½¿ç”¨ ï¼ˆSpring Bootï¼‰</h4><p>æŒ‰ç…§å®˜ç½‘æ­¥éª¤æ¥</p><p><strong>ä¸‹è½½æºç </strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone <span class="token parameter variable">-b</span> master https://github.com/apache/dubbo-samples.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>åœ¨IDEAä¸­æ‰“å¼€</strong></p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247395.png" alt="image-20230203160423574" loading="lazy"></p><p>çœ‹ä¸€ä¸‹ç»“æ„</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247447.png" alt="image-20230203165252141" loading="lazy"></p><p>consumerå’Œproviderçš„é…ç½®éƒ½å¦‚ä¸‹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">dubbo</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo<span class="token punctuation">-</span>springboot<span class="token punctuation">-</span>demo<span class="token punctuation">-</span>provider
  <span class="token key atrule">protocol</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">-1</span>
  <span class="token key atrule">registry</span><span class="token punctuation">:</span> <span class="token comment">## æ³¨å†Œä¸­å¿ƒ</span>
    <span class="token key atrule">id</span><span class="token punctuation">:</span> zk<span class="token punctuation">-</span>registry
    <span class="token key atrule">address</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span><span class="token number">2181</span>
  <span class="token key atrule">config-center</span><span class="token punctuation">:</span>
    <span class="token key atrule">address</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span><span class="token number">2181</span>
  <span class="token key atrule">metadata-report</span><span class="token punctuation">:</span>
    <span class="token key atrule">address</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span><span class="token number">2181</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>EmbeddedZooKeeper æä¸ªä¸€ä¸ªå†…ç½®çš„ZooKeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒ</p><p><strong>å¯åŠ¨é¡¹ç›®</strong></p><p>å…ˆåå¯åŠ¨ æ³¨å†Œä¸­å¿ƒ(providerå†…ç½®)ã€providerã€consumer æµ‹è¯•è·‘é€šã€‚</p><h2 id="åä¸‰ã€é¡¹ç›®æ•´åˆdubboã€nacos" tabindex="-1"><a class="header-anchor" href="#åä¸‰ã€é¡¹ç›®æ•´åˆdubboã€nacos" aria-hidden="true">#</a> åä¸‰ã€é¡¹ç›®æ•´åˆDubboã€Nacos</h2><hr><ol><li>backendé¡¹ç›®ä½œä¸º<strong>æœåŠ¡æä¾›è€…</strong>ï¼Œæä¾›3ä¸ªæ–¹æ³•ï¼š <ol><li>å®é™…æƒ…å†µåº”è¯¥æ˜¯å»æ•°æ®åº“ä¸­æŸ¥æ˜¯å¦å·²åˆ†é…ç»™ç”¨æˆ·</li><li>ä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ¨¡æ‹Ÿæ¥å£æ˜¯å¦å­˜åœ¨ï¼Œä»¥åŠè¯·æ±‚æ–¹æ³•æ˜¯å¦åŒ¹é…ï¼ˆè¿˜å¯ä»¥æ ¡éªŒè¯·æ±‚å‚æ•°ï¼‰</li><li>è°ƒç”¨æˆåŠŸï¼Œæ¥å£è°ƒç”¨æ¬¡æ•°+1 invokeCount</li></ol></li><li>gatewayé¡¹æ—¥ä½œä¸º<strong>æœåŠ¡è°ƒç”¨è€…</strong>ï¼Œè°ƒç”¨è¿™3ä¸ªæ–¹æ³•</li></ol><h3 id="_1ã€å®‰è£…å¯åŠ¨nacos" tabindex="-1"><a class="header-anchor" href="#_1ã€å®‰è£…å¯åŠ¨nacos" aria-hidden="true">#</a> 1ã€å®‰è£…å¯åŠ¨Nacos</h3>`,17),ka={href:"https://cn.dubbo.apache.org/zh/docs3-v2/java-sdk/reference-manual/registry/nacos/",target:"_blank",rel:"noopener noreferrer"},ra={href:"https://nacos.io/zh-cn/docs/v2/quickstart/quick-start.html",target:"_blank",rel:"noopener noreferrer"},da=p(`<p>å¯åŠ¨å‘½ä»¤(standaloneä»£è¡¨ç€å•æœºæ¨¡å¼è¿è¡Œï¼Œéé›†ç¾¤æ¨¡å¼)</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sh</span> startup.sh <span class="token parameter variable">-m</span> standalone
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247529.png" alt="image-20230206110644915" loading="lazy"></p><p>ç”¨æˆ·åã€å¯†ç éƒ½æ˜¯nacos</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247616.png" alt="image-20230206110747933" loading="lazy"></p><h3 id="_2ã€é¡¹ç›®è·‘é€š" tabindex="-1"><a class="header-anchor" href="#_2ã€é¡¹ç›®è·‘é€š" aria-hidden="true">#</a> 2ã€é¡¹ç›®è·‘é€š</h3><hr><p><strong>æ·»åŠ ä¾èµ–</strong></p><p>åœ¨api-platform-backendã€api-platform-gatewayä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>nacos-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„nacosæ˜¯æˆ‘ä¸‹è½½çš„ç‰ˆæœ¬</p><p><strong>æ·»åŠ é…ç½®</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">dubbo</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo<span class="token punctuation">-</span>api<span class="token punctuation">-</span>platform<span class="token punctuation">-</span>backend<span class="token punctuation">-</span>provider
  <span class="token key atrule">protocol</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">-1</span>
  <span class="token key atrule">registry</span><span class="token punctuation">:</span>
    <span class="token key atrule">id</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>registry
    <span class="token key atrule">address</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8848</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„ï¼š</strong></p><ol><li><p>æœåŠ¡æ¥å£ç±»å¿…é¡»è¦åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼Œå»ºè®®æ˜¯æŠ½è±¡å‡ºä¸€ä¸ªå…¬å…±é¡¹æ—¥ï¼ˆæ”¾æ¥å£ã€å®ä½“ç±»ç­‰ï¼‰</p></li><li><p>ç½®æ³¨è§£ï¼ˆæ¯”å¦‚å¯åŠ¨ç±»çš„EnableDubboã€æ¥å£å®ç°ç±»å’ŒBeanå¼•ç”¨çš„æ³¨è§£ï¼š@DubboServiceã€@DubboReferenceï¼‰</p></li><li><p>æ·»åŠ é…ç½®</p></li><li><p>æœåŠ¡è°ƒç”¨é¡¹ç›®å’Œæä¾›è€…é¡¹ç›®å°½é‡å¼•å…¥ç›¸åŒçš„ä¾èµ–å’Œé…ç½®</p></li></ol><h4 id="_1ã€api-platform-backend" tabindex="-1"><a class="header-anchor" href="#_1ã€api-platform-backend" aria-hidden="true">#</a> 1ã€api-platform-backend</h4><p>åœ¨ä¸»åŒ…ä¸‹æ·»åŠ rpcåŒ…ï¼ˆcom.xuan.project.rpcï¼‰</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247666.png" alt="image-20230206120727992" loading="lazy"></p><p>RpcDemoServer.java</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RpcDemoService</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>RpcDemoServerImpl.java</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@DubboService</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RpcDemoServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">RpcDemoService</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;, request from consumer: &quot;</span> <span class="token operator">+</span> <span class="token class-name">RpcContext</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Applicationä¸»ç±»æ–°å¢@EnableDubboæ³¨è§£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDubbo</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.xuan.project.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       	<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨ä¸»ç±»æŸ¥çœ‹Nacos æ³¨å†ŒæˆåŠŸ</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247052.png" alt="image-20230206121543673" loading="lazy"></p><h4 id="_2ã€api-platform-gateway" tabindex="-1"><a class="header-anchor" href="#_2ã€api-platform-gateway" aria-hidden="true">#</a> 2ã€api-platform-gateway</h4><p>åœ¨å’Œbackendä¸€æ ·çš„è·¯å¾„ä¸‹æ–°å»ºrpcåŒ… ï¼ˆcom.xuan.project.rpcï¼‰ æ–°å¢æ¥å£ç±» ä»£ç å¤åˆ¶è¿‡æ¥å³å¯</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247139.png" alt="image-20230206121742038" loading="lazy"></p><p>å‰å¾€æµ‹è¯•ç±»åšæµ‹è¯•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">ApiPlatformGatewayApplicationTests</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@DubboReference</span>
	<span class="token keyword">private</span> <span class="token class-name">RpcDemoService</span> rpcDemoService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">void</span> <span class="token function">testRpc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rpcDemoService<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•æˆåŠŸ~</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247178.png" alt="image-20230206121833955" loading="lazy"></p><h3 id="_3ã€æŠ½è±¡å…¬å…±æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_3ã€æŠ½è±¡å…¬å…±æœåŠ¡" aria-hidden="true">#</a> 3ã€æŠ½è±¡å…¬å…±æœåŠ¡</h3><hr><p>é¡¹ç›®åï¼šapi-platform-common ç›®çš„æ˜¯è®©æ–¹æ³•ã€å®ä½“ç±»åœ¨å¤šä¸ªé¡¹ç›®é—´å¤ç”¨ï¼Œå‡å°‘é‡å¤ç¼–å†™</p><h4 id="_1ã€æŠ½å–çš„æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_1ã€æŠ½å–çš„æœåŠ¡" aria-hidden="true">#</a> 1ã€æŠ½å–çš„æœåŠ¡</h4><ol><li>æ•°æ®åº“ä¸­æŸ¥æ˜¯å¦å·²åˆ†é…ç»™ç”¨æˆ·ç§˜é’¥(æ ¹æ® accessKey æ‹¿åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œè¿”å›ç”¨æˆ·ä¿¡æ¯ï¼Œä¸ºç©ºè¡¨ç¤ºä¸å­˜åœ¨ï¼‰</li><li>ä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ¨¡æ‹Ÿæ¥å£æ˜¯å¦å­˜åœ¨ï¼ˆè¯·æ±‚è·¯å¾„ã€è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å‚æ•°ï¼Œè¿”å›æ¥å£ä¿¡æ¯ï¼Œä¸ºç©ºè¡¨ç¤ºä¸å­˜åœ¨ï¼‰</li><li>æ¥å£è°ƒç”¨æ¬¡æ•°+ 1 invokeCount (accessKeyã€secretKey(æ ‡è¯†ç”¨æˆ·ï¼‰ï¼Œè¯·æ±‚æ¥å£è·¯å¾„)</li></ol><h4 id="_2ã€å…·ä½“æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_2ã€å…·ä½“æ“ä½œ" aria-hidden="true">#</a> 2ã€å…·ä½“æ“ä½œ</h4><ol><li><p>æ–°å»ºmavené¡¹ç›®</p><p>å–åä¸ºapi-platform-common</p><p>ä¾èµ–æ‰api-platform-backendé‡Œå¤åˆ¶åæ‘˜å‡ºæˆ‘éœ€è¦çš„</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.xuan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>api-platform-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.google.code.gson/gson --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.google.code.gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-lang3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.12.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.13.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å¤åˆ¶ä¹‹å‰çš„modelåŒ…ä¸‹çš„å®ä½“ç±»</p></li><li><p>åœ¨commonåŒ…ä¸‹æ–°å»ºserviceå±‚</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247231.png" alt="image-20230207113847350" loading="lazy"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">InnerInterfaceInfoService</span> <span class="token punctuation">{</span>

	<span class="token doc-comment comment">/**
	 * æ ¹æ®pathã€methodæŸ¥è¯¢æ¥å£ä¿¡æ¯
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">path</span>   è¯·æ±‚è·¯å¾„
	 * <span class="token keyword">@param</span> <span class="token parameter">method</span> è¯·æ±‚æ–¹æ³•
	 * <span class="token keyword">@return</span> InterfaceInfo
	 */</span>
	<span class="token class-name">InterfaceInfo</span> <span class="token function">getInvokeInterfaceInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">,</span> <span class="token class-name">String</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">InnerUserService</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ ¹æ®accessKeyæŸ¥è¯¢ç”¨æˆ·
     *
     * <span class="token keyword">@param</span> <span class="token parameter">accessKey</span> accessKey
     * <span class="token keyword">@return</span> User
     */</span>
    <span class="token class-name">User</span> <span class="token function">getInvokeUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> accessKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">InnerUserInterfaceInfoService</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
	 * æ˜¯å¦è¿˜æœ‰è°ƒç”¨æ¬¡æ•°
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">userId</span>          ç”¨æˆ·id
	 * <span class="token keyword">@param</span> <span class="token parameter">interfaceInfoId</span> æ¥å£id
	 * <span class="token keyword">@return</span> boolean
	 */</span>
	<span class="token keyword">boolean</span> <span class="token function">hasInvokeNum</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> interfaceInfoId<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token doc-comment comment">/**
	 * æ ¹æ®userIdã€interfaceInfoIdè®¡æ•°
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">userId</span>          ç”¨æˆ·id
	 * <span class="token keyword">@param</span> <span class="token parameter">interfaceInfoId</span> æ¥å£id
	 * <span class="token keyword">@return</span> boolean
	 */</span>
	<span class="token keyword">boolean</span> <span class="token function">invokeInterfaceCount</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> interfaceInfoId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ‰“åŒ…</p><p>ä½¿ç”¨maven installæ‰“åŒ…</p><p>api-platform-backendå¼•å…¥ä¾èµ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.xuan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>api-platform-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ç¼–å†™implè¿›è¡Œæµ‹è¯•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/2/6
 */</span>

<span class="token annotation punctuation">@DubboService</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InnerUserInterfaceInfoServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">InnerUserInterfaceInfoService</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">UserInterfaceInfoMapper</span> userInterfaceInfoMapper<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasInvokeNum</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> interfaceInfoId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> interfaceInfoId <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		queryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getUserId</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getInterfaceInfoId</span><span class="token punctuation">,</span> interfaceInfoId<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getLeftNum</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">UserInterfaceInfo</span> userInterfaceInfo <span class="token operator">=</span> userInterfaceInfoMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> userInterfaceInfo <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">invokeInterfaceCount</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> interfaceInfoId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> interfaceInfoId <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">LambdaUpdateWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> updateWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaUpdateWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		updateWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getUserId</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getInterfaceInfoId</span><span class="token punctuation">,</span> interfaceInfoId<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">UserInterfaceInfo</span><span class="token operator">::</span><span class="token function">getLeftNum</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">setSql</span><span class="token punctuation">(</span><span class="token string">&quot;left_num = left_num -1, total_num = total_num + 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">int</span> updateCount <span class="token operator">=</span> userInterfaceInfoMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> updateWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> updateCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>gatewayå¯åŠ¨æŠ¥é”™</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Description</span><span class="token operator">:</span>

<span class="token class-name">Failed</span> <span class="token keyword">to</span> <span class="token namespace">configure</span> a <span class="token class-name">DataSource</span><span class="token operator">:</span> <span class="token char">&#39;url&#39;</span> attribute is not specified and no embedded datasource could be <span class="token class-name"><span class="token namespace">configured<span class="token punctuation">.</span></span>

Reason</span><span class="token operator">:</span> <span class="token class-name">Failed</span> <span class="token keyword">to</span> <span class="token namespace">determine</span> a suitable driver <span class="token keyword">class</span>


<span class="token class-name">Action</span><span class="token operator">:</span>

<span class="token class-name">Consider</span> the following<span class="token operator">:</span>
	<span class="token class-name">If</span> you want an embedded database <span class="token punctuation">(</span><span class="token constant">H2</span><span class="token punctuation">,</span> <span class="token constant">HSQL</span> or <span class="token class-name">Derby</span><span class="token punctuation">)</span><span class="token punctuation">,</span> please put it on the <span class="token class-name"><span class="token namespace">classpath<span class="token punctuation">.</span></span>
	If</span> you have database settings <span class="token keyword">to</span> <span class="token namespace">be</span> loaded from a particular profile you may need <span class="token keyword">to</span> <span class="token namespace">activate</span> it <span class="token punctuation">(</span>no profiles are currently active<span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247270.png" alt="image-20230207151142622" loading="lazy"></p><p>ç»åˆ†ææˆ‘ä»¬éœ€è¦åœ¨ä¸»ç±»ä¸Šæ’é™¤æ•°æ®åº“çš„ç±»åŠ è½½ï¼ˆgoogle springbootå¿½ç•¥æ•°æ®åº“å¯åŠ¨å¾—åˆ°ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xuan<span class="token punctuation">.</span>project</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableDubbo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span><span class="token class-name">DataSourceAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span><span class="token class-name">DataSourceTransactionManagerAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>orm<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span></span><span class="token class-name">HibernateJpaAutoConfiguration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@EnableDubbo</span>
<span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>exclude <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">DataSourceTransactionManagerAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">HibernateJpaAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApiPlatformGatewayApplication</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ApiPlatformGatewayApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡å¯åŠ¨ç½‘å…³æˆåŠŸ~</p></li><li><p>æµ‹è¯•è·‘é€š</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247362.png" alt="image-20230206180958642" loading="lazy"></p></li></ol><h4 id="_3ã€implå…·ä½“å®ç°" tabindex="-1"><a class="header-anchor" href="#_3ã€implå…·ä½“å®ç°" aria-hidden="true">#</a> 3ã€implå…·ä½“å®ç°</h4><p>åœ¨backendæ–°å»º service/impl/inneråŒ…</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247433.png" alt="image-20230207114407493" loading="lazy"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/2/6
 */</span>

<span class="token annotation punctuation">@DubboService</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InnerInterfaceInfoServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">InnerInterfaceInfoService</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">InterfaceInfoMapper</span> interfaceInfoMapper<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">InterfaceInfo</span> <span class="token function">getInvokeInterfaceInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span> <span class="token class-name">String</span> method<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">hasBlank</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">InterfaceInfo</span><span class="token punctuation">&gt;</span></span> lambdaQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		lambdaQueryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">InterfaceInfo</span><span class="token operator">::</span><span class="token function">getUrl</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">InterfaceInfo</span><span class="token operator">::</span><span class="token function">getMethod</span><span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> interfaceInfoMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>lambdaQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/2/6
 */</span>

<span class="token annotation punctuation">@DubboService</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InnerUserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">InnerUserService</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getInvokeUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> accessKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">PARAMS_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> lambdaQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		lambdaQueryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getAccessKey</span><span class="token punctuation">,</span> accessKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> userMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>lambdaQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4ã€ä¼˜åŒ–ç½‘å…³global-filter" tabindex="-1"><a class="header-anchor" href="#_4ã€ä¼˜åŒ–ç½‘å…³global-filter" aria-hidden="true">#</a> 4ã€ä¼˜åŒ–ç½‘å…³Global Filter</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å…¨å±€è¿‡æ»¤å™¨
 *
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/2/1
 */</span>

<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@DubboReference</span>
	<span class="token keyword">private</span> <span class="token class-name">InnerUserService</span> innerUserService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@DubboReference</span>
	<span class="token keyword">private</span> <span class="token class-name">InnerInterfaceInfoService</span> innerInterfaceInfoService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@DubboReference</span>
	<span class="token keyword">private</span> <span class="token class-name">InnerUserInterfaceInfoService</span> innerUserInterfaceInfoService<span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token constant">IP_WHITE_LIST</span> <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;127.0.0.2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> <span class="token constant">FIVE_MINUTES</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000L</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">INTERFACE_HOST</span> <span class="token operator">=</span> <span class="token string">&quot;http://localhost:8090&quot;</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 1. è¯·æ±‚æ—¥å¿—</span>
		<span class="token class-name">ServerHttpRequest</span> request <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token constant">INTERFACE_HOST</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> method <span class="token operator">=</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚id: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚è·¯å¾„: {}&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚æ–¹æ³•: {}&quot;</span><span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚å‚æ•°: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚å¤´: {}&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> remoteAddress <span class="token operator">=</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHostString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚åœ°å€: {}&quot;</span><span class="token punctuation">,</span> remoteAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 2. è®¿é—®æ§åˆ¶ - é»‘ç™½åå•</span>
		<span class="token class-name">ServerHttpResponse</span> response <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">IP_WHITE_LIST</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>remoteAddress<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleNoAuth</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 3. ç”¨æˆ·é‰´æƒ</span>
		<span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> accessKey <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;accessKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// é˜²æ­¢ä¸­æ–‡ä¹±ç </span>
		<span class="token class-name">String</span> body <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			body <span class="token operator">=</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnsupportedEncodingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">String</span> sign <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;sign&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> nonce <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;nonce&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> timestamp <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;timestamp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">boolean</span> hasBlank <span class="token operator">=</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">hasBlank</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">,</span> body<span class="token punctuation">,</span> sign<span class="token punctuation">,</span> nonce<span class="token punctuation">,</span> timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰ç©º</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hasBlank<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// ä½¿ç”¨accessKeyå»æ•°æ®åº“æŸ¥è¯¢secretKey</span>
		<span class="token class-name">User</span> invokeUser <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			invokeUser <span class="token operator">=</span> innerUserService<span class="token punctuation">.</span><span class="token function">getInvokeUser</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;getInvokeUser error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>invokeUser <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">String</span> secretKey <span class="token operator">=</span> invokeUser<span class="token punctuation">.</span><span class="token function">getSecretKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> sign1 <span class="token operator">=</span> <span class="token class-name">SignUtil</span><span class="token punctuation">.</span><span class="token function">getSign</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>sign<span class="token punctuation">,</span> sign1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// TODO åˆ¤æ–­éšæœºæ•°nonce</span>
		<span class="token comment">// æ—¶é—´æˆ³æ˜¯å¦ä¸ºæ•°å­—</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">isNumber</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// äº”åˆ†é’Ÿå†…çš„è¯·æ±‚æœ‰æ•ˆ</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">parseLong</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token constant">FIVE_MINUTES</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 4. è¯·æ±‚çš„æ¨¡æ‹Ÿæ¥å£æ˜¯å¦å­˜åœ¨</span>
		<span class="token class-name">InterfaceInfo</span> invokeInterfaceInfo <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			invokeInterfaceInfo <span class="token operator">=</span> innerInterfaceInfoService<span class="token punctuation">.</span><span class="token function">getInvokeInterfaceInfo</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;getInvokeInterfaceInfo error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>invokeInterfaceInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//  æ˜¯å¦æœ‰è°ƒç”¨æ¬¡æ•°</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>innerUserInterfaceInfoService<span class="token punctuation">.</span><span class="token function">hasInvokeNum</span><span class="token punctuation">(</span>invokeUser<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> invokeInterfaceInfo<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 5. è¯·æ±‚è½¬å‘ï¼Œè°ƒç”¨æ¨¡æ‹Ÿæ¥å£</span>
		<span class="token keyword">return</span> <span class="token function">handleResponse</span><span class="token punctuation">(</span>exchange<span class="token punctuation">,</span> chain<span class="token punctuation">,</span> invokeUser<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> invokeInterfaceInfo<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * å¤„ç†å“åº”
	 *
	 * <span class="token keyword">@param</span> <span class="token parameter">exchange</span>
	 * <span class="token keyword">@param</span> <span class="token parameter">chain</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResponse</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">,</span> <span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> interfaceInfoId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// ä»äº¤æ¢æœºæ‹¿åˆ°åŸå§‹response</span>
			<span class="token class-name">ServerHttpResponse</span> originalResponse <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// ç¼“å†²åŒºå·¥å‚ æ‹¿åˆ°ç¼“å­˜æ•°æ®</span>
			<span class="token class-name">DataBufferFactory</span> bufferFactory <span class="token operator">=</span> originalResponse<span class="token punctuation">.</span><span class="token function">bufferFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// æ‹¿åˆ°çŠ¶æ€ç </span>
			<span class="token class-name">HttpStatus</span> statusCode <span class="token operator">=</span> originalResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>statusCode <span class="token operator">==</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// è£…é¥°ï¼Œå¢å¼ºèƒ½åŠ›</span>
				<span class="token class-name">ServerHttpResponseDecorator</span> decoratedResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerHttpResponseDecorator</span><span class="token punctuation">(</span>originalResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// ç­‰è°ƒç”¨å®Œè½¬å‘çš„æ¥å£åæ‰ä¼šæ‰§è¡Œ</span>
					<span class="token annotation punctuation">@Override</span>
					<span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">writeWith</span><span class="token punctuation">(</span><span class="token class-name">Publisher</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">DataBuffer</span><span class="token punctuation">&gt;</span></span> body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;body instanceof Flux: {}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>body <span class="token keyword">instanceof</span> <span class="token class-name">Flux</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">// å¯¹è±¡æ˜¯å“åº”å¼çš„</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token keyword">instanceof</span> <span class="token class-name">Flux</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// æˆ‘ä»¬æ‹¿åˆ°çœŸæ­£çš„body</span>
							<span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">DataBuffer</span><span class="token punctuation">&gt;</span></span> fluxBody <span class="token operator">=</span> <span class="token class-name">Flux</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token comment">// å¾€è¿”å›å€¼é‡Œé¢å†™æ•°æ®</span>
							<span class="token comment">// æ‹¼æ¥å­—ç¬¦ä¸²</span>
							<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">writeWith</span><span class="token punctuation">(</span>fluxBody<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>dataBuffer <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
								<span class="token comment">// 7. è°ƒç”¨æˆåŠŸï¼Œæ¥å£è°ƒç”¨æ¬¡æ•°+1</span>
								<span class="token keyword">try</span> <span class="token punctuation">{</span>
									innerUserInterfaceInfoService<span class="token punctuation">.</span><span class="token function">invokeInterfaceCount</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> interfaceInfoId<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;invokeInterfaceCount error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
								<span class="token comment">// dataä»è¿™ä¸ªcontentä¸­è¯»å–</span>
								<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>dataBuffer<span class="token punctuation">.</span><span class="token function">readableByteCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
								dataBuffer<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token class-name">DataBufferUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>dataBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// é‡Šæ”¾æ‰å†…å­˜</span>
								<span class="token comment">// 6.æ„å»ºæ—¥å¿—</span>
								<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> rspArgs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								rspArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>originalResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// data</span>
								rspArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
								log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;--- status:{} data:{}&quot;</span><span class="token comment">// data</span>
										<span class="token punctuation">,</span> rspArgs<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// log.info(&quot;&lt;-- {} {}&quot;, originalResponse.getStatusCode(), data);</span>
								<span class="token keyword">return</span> bufferFactory<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							<span class="token comment">// 8.è°ƒç”¨å¤±è´¥è¿”å›é”™è¯¯çŠ¶æ€ç </span>
							log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;--- {} å“åº”codeå¼‚å¸¸&quot;</span><span class="token punctuation">,</span> <span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">writeWith</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token comment">// è®¾ç½® response å¯¹è±¡ä¸ºè£…é¥°è¿‡çš„</span>
				<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">mutate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">response</span><span class="token punctuation">(</span>decoratedResponse<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// é™çº§å¤„ç†è¿”å›æ•°æ®</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;gateway log exception.\\n&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleNoAuth</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleInvokeError</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åå››ã€ç»Ÿè®¡åˆ†æ" tabindex="-1"><a class="header-anchor" href="#åå››ã€ç»Ÿè®¡åˆ†æ" aria-hidden="true">#</a> åå››ã€ç»Ÿè®¡åˆ†æ</h2><hr><p><strong>éœ€æ±‚</strong></p><p>â€‹ å„æ¥å£çš„æ€»è°ƒç”¨æ¬¡æ•°å æ¯”ï¼ˆé¥¼å›¾ï¼‰å–è°ƒç”¨æœ€å¤šçš„å‰ 3ä¸ªæ¥å£ï¼Œä»è€Œåˆ†æå‡ºå“ªäº›æ¥å£æ²¡æœ‰äººç”¨ï¼ˆé™ä½èµ„æºã€æˆ–è€…ä¸‹çº¿ï¼‰ï¼Œé«˜é¢‘æ¥å£ï¼ˆå¢åŠ èµ„æºã€æé«˜æ”¶è´¹ï¼‰ã€‚ç”¨é¥¼å›¾å±•ç¤ºã€‚</p><h3 id="_1ã€åç«¯-1" tabindex="-1"><a class="header-anchor" href="#_1ã€åç«¯-1" aria-hidden="true">#</a> 1ã€åç«¯</h3><hr><h4 id="_1ã€ç¼–å†™sql" tabindex="-1"><a class="header-anchor" href="#_1ã€ç¼–å†™sql" aria-hidden="true">#</a> 1ã€ç¼–å†™SQL</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	interface_info_id<span class="token punctuation">,</span>
	<span class="token function">SUM</span><span class="token punctuation">(</span> total_num <span class="token punctuation">)</span> <span class="token keyword">AS</span> invoke_num 
<span class="token keyword">FROM</span>
	user_interface_info 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	interface_info_id 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	invoke_num <span class="token keyword">DESC</span> 
	<span class="token keyword">LIMIT</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247706.png" alt="image-20230207154946647" loading="lazy"></p><p>SQLè¯­å¥ç¡®è®¤æ²¡é—®é¢˜å å†åœ¨ä»£ç é‡Œç¼–å†™</p><h4 id="_2ã€ç¼–å†™æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2ã€ç¼–å†™æ¥å£" aria-hidden="true">#</a> 2ã€ç¼–å†™æ¥å£</h4><p>æ–°å¢VOã€Mapperã€Serviceã€Controller</p><p><strong>VO</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@EqualsAndHashCode</span><span class="token punctuation">(</span>callSuper <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InvokeInterfaceInfoVO</span> <span class="token keyword">extends</span> <span class="token class-name">InterfaceInfo</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ¥å£è°ƒç”¨æ¬¡æ•°
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> invokeNum<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Mapper</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserInterfaceInfoMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInterfaceInfo</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">InvokeInterfaceInfoVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">listTopInvokeInterfaceInfo</span><span class="token punctuation">(</span><span class="token keyword">int</span> limit<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xuan.project.mapper.UserInterfaceInfoMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>listTopInvokeInterfaceInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xuan.project.model.vo.InvokeInterfaceInfoVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        SELECT interface_info_id AS id,
               SUM(total_num)    AS invoke_num
        FROM user_interface_info
        GROUP BY interface_info_id
        ORDER BY invoke_num DESC LIMIT ##{limit}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,64),va=p(`<p><strong>Service</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/2/7
 */</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChartServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ChartService</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">UserInterfaceInfoMapper</span> userInterfaceInfoMapper<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">InterfaceInfoService</span> interfaceInfoService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">InvokeInterfaceInfoVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">listTopInvokeInterfaceInfo</span><span class="token punctuation">(</span><span class="token keyword">int</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">InvokeInterfaceInfoVO</span><span class="token punctuation">&gt;</span></span> vos <span class="token operator">=</span> userInterfaceInfoMapper<span class="token punctuation">.</span><span class="token function">listTopInvokeInterfaceInfo</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>vos <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> vos<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">ErrorCode</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// æ ¹æ®idæŸ¥è¯¢æ¥å£åç§°</span>
		<span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">InvokeInterfaceInfoVO</span><span class="token punctuation">&gt;</span></span> voHashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>vos<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">InvokeInterfaceInfoVO</span> vo <span class="token operator">:</span> vos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			voHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>vo<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vo<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">InterfaceInfo</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		queryWrapper<span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token class-name">InterfaceInfo</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">,</span> voHashMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">InterfaceInfo</span><span class="token punctuation">&gt;</span></span> infoList <span class="token operator">=</span> interfaceInfoService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">InterfaceInfo</span> interfaceInfo <span class="token operator">:</span> infoList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			voHashMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>interfaceInfo<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>interfaceInfo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>voHashMap<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨streamæµæ¥å®ç°</p><p><strong>Controller</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å›¾è¡¨
 *
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@author</span>: ç„
 * <span class="token keyword">@date</span>: 2023/2/7
 */</span>

<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/chart&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChartController</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Resource</span>
	<span class="token keyword">private</span> <span class="token class-name">ChartService</span> chartService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/top/interface/invoke&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">BaseResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">InvokeInterfaceInfoVO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listTopInvokeInterfaceInfo <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">InvokeInterfaceInfoVO</span><span class="token punctuation">&gt;</span></span> listTopInvokeInterfaceInfo <span class="token operator">=</span> chartService<span class="token punctuation">.</span><span class="token function">listTopInvokeInterfaceInfo</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>listTopInvokeInterfaceInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€å‰ç«¯-1" tabindex="-1"><a class="header-anchor" href="#_2ã€å‰ç«¯-1" aria-hidden="true">#</a> 2ã€å‰ç«¯</h3><hr><p>å›¾è¡¨å¼ºçƒˆæ¨èç”¨ç°æˆçš„åº“ï¼ï¼ï¼ æ¯”å¦‚ï¼š</p>`,8),ma={href:"https://echarts.apache.org/zh/index.html",target:"_blank",rel:"noopener noreferrer"},ga={href:"https://antv.vision/zh",target:"_blank",rel:"noopener noreferrer"},ba=n("li",null,"BizCharts",-1),fa=n("p",null,"ä½¿ç”¨æ­¥éª¤éƒ½å¤§åŒå°å¼‚",-1),ya=n("ol",null,[n("li",null,"çœ‹å®˜ç½‘"),n("li",null,"æ‰¾åˆ°å¿«é€Ÿå…¥é—¨ã€æŒ‰æ–‡æ¡£å»å¼•å…¥åº“"),n("li",null,"è¿›å…¥ç¤ºä¾‹é¡µé¢"),n("li",null,"æ‰¾åˆ°ä½ è¦çš„å›¾"),n("li",null,"åœ¨çº¿è°ƒè¯•"),n("li",null,"å¤åˆ¶ä»£ç "),n("li",null,"æ”¹ä¸ºçœŸå®æ•°æ®")],-1),ha={href:"https://github.com/hustcc/echarts-for-react",target:"_blank",rel:"noopener noreferrer"},wa=p(`<p>config/routes.tsä¸‹æ–°å¢è·¯ç”±</p><p>src/pages/Adminä¸­ä½¿ç”¨ä¸Šé¢æ­¥éª¤å†™äº†ä¸€ä¸ªç®€å•é¡µé¢</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PageContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactECharts <span class="token keyword">from</span> <span class="token string">&#39;echarts-for-react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> listTopInvokeInterfaceInfoUsingGET <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/services/api-platform-backend/chartController&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">InterfaceChart</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>InvokeInterfaceInfoVO<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">listTopInvokeInterfaceInfoUsingGET</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setData</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> chartInterface <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> item<span class="token punctuation">.</span>invokeNum<span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> item<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">tooltip</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;item&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token string">&#39;5%&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">series</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Access From&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;pie&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">radius</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;40%&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;70%&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">avoidLabelOverlap</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">itemStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">borderColor</span><span class="token operator">:</span> <span class="token string">&#39;##fff&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">borderWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">emphasis</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
            <span class="token literal-property property">fontWeight</span><span class="token operator">:</span> <span class="token string">&#39;bold&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">labelLine</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> chartInterface<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>PageContainer title<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;æ¥å£è°ƒç”¨æƒ…å†µ&#39;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ReactECharts showLoading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span> option<span class="token operator">=</span><span class="token punctuation">{</span>option<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>PageContainer<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> InterfaceChart<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308101247854.png" alt="image-20230207184004186" loading="lazy"></p><h2 id="åäº”ã€æ‹“å±•ç‚¹" tabindex="-1"><a class="header-anchor" href="#åäº”ã€æ‹“å±•ç‚¹" aria-hidden="true">#</a> åäº”ã€æ‹“å±•ç‚¹</h2><ol><li>ç”¨æˆ·å¯ä»¥ç”³è¯·æ›´æ¢ç­¾å</li><li>æ€ä¹ˆè®©å…¶ä»–ç”¨æˆ·ä¹Ÿä¸Šä¼ æ¥å£ï¼Ÿ éœ€è¦æä¾›ä¸€ä¸ªæœºåˆ¶ (ç•Œé¢ï¼‰ï¼Œè®©ç”¨æˆ·è¾“å…¥è‡ªå·±çš„æ¥å£host ï¼ˆæœåŠ¡å™¨åœ°å€ï¼‰ã€æ¥å£ä¿¡æ¯ï¼Œå°†æ¥å£ä¿¡æ¯å†™å…¥æ•°æ®åº“ã€‚ å¯ä»¥åœ¨ interfacelnto è¡¨é‡ŒåŠ ä¸ª host å­—æ®µï¼ŒåŒºåˆ†æœåŠ¡å™¨åœ°å€ï¼Œè®©æ¥å£æä¾›è€…æ›´çµæ´»åœ°æ¥å…¥ç³»ç»Ÿã€‚ å°†æ¥å£ä¿¡æ¯å†™å…¥æ•°æ®åº“ä¹‹å‰ï¼Œè¦å¯¹æ¥å£è¿›è¡Œæ ¡éªŒï¼ˆæ¯”å¦‚æ£€æŸ¥ä»–çš„åœ°å€æ˜¯å¦éµå¾ªè§„åˆ™ï¼Œæµ‹è¯•è°ƒç”¨ï¼‰ï¼Œä¿è¯ä»–æ˜¯æ­£å¸¸çš„ã€‚ å°†æ¥å£ä¿¡æ¯å†™å…¥æ•°æ®åº“ä¹‹å‰éµå¾ªå’±ä»¬çš„è¦æ±‚ï¼ˆäº•ä¸”ä½¿ç”¨å’±ä»¬çš„ sdkï¼‰ï¼Œåœ¨æ¥å…¥æ—¶ï¼Œå¹³å°éœ€è¦æµ‹è¯•è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œä¿è¯ä»–æ˜¯æ­£å¸¸çš„ã€‚</li><li>ç½‘å…³æ ¡éªŒæ˜¯å¦è¿˜æœ‰è°ƒç”¨æ¬¡æ•° éœ€è¦è€ƒè™‘äº•å‘é—®é¢˜ï¼Œé˜²æ­¢ç¬é—´è°ƒç”¨è¶…é¢ã€‚</li><li>ç½‘å…³ä¼˜åŒ– æ¯”å¦‚å¢åŠ é™æµ /é™çº§ä¿æŠ¤ï¼Œæé«˜æ€§èƒ½ç­‰ã€‚è¿˜å¯ä»¥è€ƒè™‘æ­é… Nginx ç½‘å…³ä½¿ç”¨ã€‚</li><li>åŠŸèƒ½å¢å¼º å¯ä»¥é’ˆå¯¹ä¸åŒçš„è¯·æ±‚å¤´æˆ–è€…æ¥å£ç±»å‹æ¥è®¾è®¡å‰ç«¯ç•Œé¢å’Œè¡¨å•ï¼Œä¾¿äºç”¨æˆ·è°ƒç”¨ï¼Œè·å¾—æ›´å¥½çš„ä½“éªŒã€‚ å¯ä»¥å‚è€ƒ swaggerã€postmanã€knife4j çš„é¡µé¢ã€‚</li></ol>`,7);function Ia(qa,_a){const t=c("ExternalLinkIcon"),e=c("font"),l=c("build");return u(),k("div",null,[d,v,m,n("p",null,[s("1ï¼å‰ç«¯å¼€å‘éœ€è¦ç”¨åˆ°åå°æ¥å£ 2ï¼ä½¿ç”¨ç°æˆçš„ç³»ç»Ÿçš„åŠŸèƒ½("),n("a",g,[s("http://api.btstu.cn/"),a(t)]),s(")")]),b,n("p",null,[s("å¿«é€Ÿå¼€å§‹ä½¿ç”¨ï¼Œå¯ä»¥æŸ¥çœ‹"),n("a",f,[s("å®˜æ–¹æ•™ç¨‹"),a(t)])]),y,n("p",null,[s("åœ¨GitHub issueé‡Œæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼š"),n("a",h,[s("https://github.com/ant-design/ant-design-pro/issues/10446"),a(t)])]),w,I,n("ol",null,[n("li",null,[q,a(e,{color:"red"},{default:o(()=>[s("å…ˆè·³è¿‡ æœ‰BUG")]),_:1}),_,x,R,S]),j]),U,n("p",null,[s("å¯ä»¥ç”¨é±¼çš®å†™çš„sqlç”Ÿæˆå·¥å…·ç”Ÿæˆä¸€ä¸‹ä»£ç  "),n("a",C,[s("SQLä¹‹çˆ¶"),a(t)])]),E,n("p",null,[s("åœ¨åœ°å€æ è¾“å…¥"),n("a",A,[s("http://localhost:7529/api/v3/api-docs"),a(t)])]),T,P,O,n("p",null,[s("è¿™é‡Œä½¿ç”¨çš„useRefã€formRefå‚è€ƒäº†"),n("a",B,[s("å®˜æ–¹æ–‡æ¡£"),a(t)])]),M,n("p",null,[s("è¿™é‡Œæˆ‘ä½¿ç”¨äº†"),D,s("è°ƒç”¨ "),n("a",F,[s("hutoolæ–‡æ¡£"),a(t)])]),L,n("p",null,[s("ç„¶åå¤„ç†pom.xml "),a(l),s("è¿™ä¸ª"),a(e,{color:"red"},{default:o(()=>[s("ä¸€å®šéœ€è¦åˆ é™¤")]),_:1}),s("å› ä¸ºè¿™ä¸ªæ˜¯mavençš„æ„å»ºé¡¹ç›®æˆå¯è¿è¡ŒjaråŒ…ã€‚ç°åœ¨æ˜¯åˆ¶ä½œstarterä¾èµ–åŒ…")]),H,a(e,{color:"red"},{default:o(()=>[s("æ³¨æ„ï¼š")]),_:1}),s("è¿™é‡Œèƒ½ç›´æ¥å¼•å…¥ï¼Œæ˜¯å› ä¸ºåˆšåˆšæˆ‘ä»¬installçš„stateråœ¨æˆ‘ä»¬çš„æœ¬åœ°ï¼Œå¯ä»¥å‘å¸ƒåˆ°Mavenä»“åº“æˆ–è€…æä¾›jaråŒ…ä¾›å¤§å®¶ä½¿ç”¨ã€‚"),N,n("ol",null,[z,n("li",null,[G,a(e,{color:"red"},{default:o(()=>[s("è¿™é‡Œæœ‰ä¸ªTODO")]),_:1}),s(" åˆ¤æ–­è¯¥æ¥å£æ˜¯å¦å¯ä»¥è°ƒç”¨æ—¶ï¼Œç”±XuanApiClientå›ºå®šæ–¹æ³•åæ”¹ä¸ºæ ¹æ®æµ‹è¯•åœ°å€æ¥è°ƒç”¨"),K]),W]),V,Q,X,n("p",null,[s("æŸ¥çœ‹äº†Ant Design "),n("a",J,[s("Buttonçš„å®˜æ–¹æ–‡æ¡£"),a(t)])]),Y,a(e,{color:"red"},{default:o(()=>[s("å› ä¸ºåç«¯æ–°å¢äº†ä»£ç ï¼Œæ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨openapiè‡ªåŠ¨ç”Ÿæˆå‰ç«¯æ–¹æ³•")]),_:1}),n("p",null,[s("è·Ÿä¹‹å‰æ“ä½œä¸€æ ·ï¼Œå»"),n("a",$,[s("http://localhost:7529/api/v3/api-docså¤åˆ¶jsonåˆ°config/oneapi.json"),a(t)]),s(" ç„¶åè¿è¡Œopenapi")]),Z,n("p",null,[s("è¿™é‡Œå‚è€ƒäº† "),n("a",nn,[s("Ant Design Listç»„ä»¶"),a(t)])]),sn,n("ol",null,[an,n("li",null,[tn,n("p",null,[s("è¿™é‡Œéœ€è¦æŸ¥çœ‹ "),n("a",pn,[s("umiæ–‡æ¡£"),a(t)])]),en]),on]),cn,n("p",null,[s("å‰å¾€"),n("a",ln,[s("http://localhost:7529/api/doc.htmlæ³¨å†Œã€‚"),a(t)]),s(" åˆ†é…æˆåŠŸ~")]),un,kn,rn,dn,vn,mn,gn,a(e,{color:"red"},{default:o(()=>[s("è¿™é‡Œè®¾è®¡çš„å…¶å®ä¸å¤ªå®Œç¾ï¼Œåªæ˜¯è·‘é€šäº†ã€‚åç»­åšä¼˜åŒ–")]),_:1}),bn,n("p",null,[s("åœ¨isDeleteä¸Š"),a(e,{color:"red"},{default:o(()=>[s("å¢åŠ @TableLogic")]),_:1}),s("æ³¨é‡Š ä»£è¡¨é€»è¾‘åˆ é™¤")]),fn,a(e,{color:"red"},{default:o(()=>[s("æ³¨æ„ï¼šå…¶å®è¿™é‡Œåº”è¯¥æ·»åŠ äº‹åŠ¡ï¼Œæ·»åŠ é”")]),_:1}),yn,n("p",null,[n("a",hn,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##gateway-request-predicates-factories"),a(t)])]),wn,In,qn,_n,xn,Rn,Sn,jn,n("p",null,[n("a",Un,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##cors-configuration"),a(t)])]),Cn,En,An,Tn,Pn,On,n("p",null,[n("a",Bn,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-weight-route-predicate-factory"),a(t)])]),Mn,Dn,n("p",null,[s("ç»™è¯·æ±‚ï¼ˆæµé‡ï¼‰æ·»åŠ ä¸€äº›æ ‡è¯†ï¼Œä¸€èˆ¬æ˜¯è®¾ç½®è¯·æ±‚å¤´ä¸­ï¼Œæ·»åŠ æ–°çš„è¯·æ±‚å¤´ "),n("a",Fn,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-addrequestheader-gatewayfilter-factory"),a(t)])]),n("p",null,[Ln,s("ï¼š"),n("a",Hn,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##default-filters"),a(t)])]),Nn,n("ol",null,[n("li",null,[zn,n("p",null,[n("a",Gn,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##requestheadersiz-gatewayfilter-factory"),a(t)])])]),n("li",null,[Kn,n("p",null,[n("a",Wn,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-removerequestheader-gatewayfilter-factory"),a(t)])])]),n("li",null,[Vn,n("p",null,[n("a",Qn,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##fallback-headers"),a(t)])])]),n("li",null,[Xn,n("p",null,[n("a",Jn,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-requestratelimiter-gatewayfilter-factory"),a(t)])])]),n("li",null,[Yn,n("p",null,[n("a",$n,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##http-timeouts-configuration"),a(t)])])]),n("li",null,[Zn,n("p",null,[n("a",ns,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##the-retry-gatewayfilter-factory"),a(t)])])])]),ss,as,ts,ps,n("p",null,[s("å»ºè®®ç”¨ï¼š"),n("a",es,[s("https://doc.xiaominfo.com/docs/middleware-sources/aggregation-introduction"),a(t)])]),os,cs,n("p",null,[s("å‚è€ƒæ–‡ç« ï¼š"),n("a",ls,[s("https://blog.csdn.net/qq_21040559/article/details/122961395"),a(t)])]),is,us,n("p",null,[s("ç½‘å…³æŠ€æœ¯é€‰å‹ï¼š"),n("a",ks,[s("https://zhuanlan.zhihu.com/p/500587132"),a(t)])]),rs,ds,vs,n("p",null,[s("å®˜ç½‘ï¼š"),n("a",ms,[s("https://spring.io/projects/spring-cloud-gateway"),a(t)])]),n("p",null,[s("å®˜æ–¹æ–‡æ¡£ï¼š"),n("a",gs,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference//html/"),a(t)])]),bs,n("h4",fs,[ys,s(" 1ã€"),n("a",hs,[s("Glossary"),a(t)])]),ws,n("ul",null,[Is,n("li",null,[qs,s(": This is a "),n("a",_s,[s("Java 8 Function Predicate"),a(t)]),s(". The input type is a "),n("a",xs,[s("Spring Framework "),Rs,a(t)]),s(". This lets you match on anything from the HTTP request, such as headers or parameters.")]),n("li",null,[Ss,s(": These are instances of "),n("a",js,[Us,a(t)]),s(" that have been constructed with a specific factory. Here, you can modify requests and responses before or after sending the downstream request.")])]),Cs,n("p",null,[s("å®˜ç½‘åœ°å€:"),n("a",Es,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##gateway-request-predicates-factories"),a(t)])]),As,n("p",null,[s("å¦‚æœä½ çš„"),Ts,s("çš„æ˜¯è¿™ä¸ª**.somehost.org,**."),n("strong",null,[n("a",Ps,[s("anotherhost.org"),a(t)])]),s("ï¼Œ"),Os,s("ï¼Œå°±ä¼šè®¿é—®å½“å‰è¿™ä¸ªè·¯ç”±")]),Bs,n("p",null,[Ms,s("ï¼š"),n("a",Ds,[s("https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/##gatewayfilter-factories"),a(t)])]),Fs,n("p",null,[s("åœ¨åœ°å€æ è®¿é—®ï¼š"),n("a",Ls,[s("http://localhost:8090/api/name/xuan"),a(t)])]),Hs,n("p",null,[s("é€šè¿‡é˜…è¯»æºç ï¼š"),n("a",Ns,[s("https://spring.io/projects/spring-cloud-gateway/##samples"),a(t)]),s(" æ¥äº†è§£gatewayç¼–ç¨‹å¼å¼€å‘")]),zs,n("p",null,[s("æ‰€æœ‰å‰ç¼€ä¸ºï¼š/api/Â çš„è¯·æ±‚è¿›è¡Œè½¬å‘ï¼Œè½¬å‘åˆ°"),n("a",Gs,[s("http://localhost:8123/api"),a(t)])]),n("p",null,[s("æ¯”å¦‚è¯·æ±‚ç½‘å…³ï¼š"),n("a",Ks,[s("http://localhost:8090/api/name/?name=archerè½¬å‘åˆ°"),a(t)]),s(),n("a",Ws,[s("http://localhost:8123/api/name/?name=archer"),a(t)])]),Vs,n("p",null,[s("æŸ¥çœ‹"),n("a",Qs,[s("å®˜ç½‘"),a(t)]),s("ï¼Œä½¿ç”¨æ¨¡æ¿ä»£ç ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ç¨‹åº")]),Xs,n("p",null,[s("è§£æ±ºæ–¹æ¡ˆï¼šåˆ©ç”¨response è£…é¥°è€…ï¼Œå¢å¼ºåŸæœ‰ response çš„å¤„ç†èƒ½åŠ› å‚è€ƒåšå®¢ï¼š"),n("a",Js,[s("https://blog.csdn.net/qq_19636353/article/details/126759522ï¼ˆä»¥è¿™ä¸ªä¸ºä¸»ï¼‰"),a(t)]),s(" å…¶ä»–å‚è€ƒï¼š â€¢ "),n("a",Ys,[s("https://blog.csdn.net/mo_67595943/article/details/124667975"),a(t)]),s(" â€¢ "),n("a",$s,[s("https://blog.csdn.net/weixin_43933728/article/details/121359727"),a(t)]),s(" â€¢ "),n("a",Zs,[s("https://blog.csdn.net/zx156955/article/details/121670681"),a(t)]),s(" â€¢ "),n("a",na,[s("https://blog.csdn.net/qq_39529562/article/details/108911983"),a(t)])]),sa,n("p",null,[s("å¤åˆ¶"),n("a",aa,[s("https://blog.csdn.net/qq_19636353/article/details/126759522"),a(t)]),s(" ä¸­çš„Response logä»£ç ã€‚å¹¶æ”¹å†™")]),ta,n("p",null,[s("å®˜ç½‘ï¼š"),n("a",pa,[s("https://cn.dubbo.apache.org/zh/"),a(t)])]),ea,n("p",null,[s("æœ€å¥½çš„å­¦ä¹ æ–¹å¼ï¼š"),n("a",oa,[s("é˜…è¯»å®˜æ–¹æ–‡æ¡£"),a(t)])]),ca,la,n("p",null,[s("åº•å±‚æ˜¯Tripleåè®®ï¼š "),n("a",ia,[s("https://dubbo.incubator.apache.org/zh/docs3-v2/java-sdk/concepts-and-architecture/triple/"),a(t)])]),ua,n("p",null,[s("æ•´åˆNacosæ³¨å†Œä¸­ï¼š"),n("a",ka,[s("Nacos | Apache Dubbo"),a(t)]),s(" Nacosä¸‹è½½åœ°å€ï¼š"),n("a",ra,[s("Nacos å¿«é€Ÿå¼€å§‹"),a(t)])]),da,a(e,{color:"red"},{default:o(()=>[s("æ³¨æ„")]),_:1}),s(" ï¼šSELECT interface_info_id AS id, è¿™é‡Œä¸€å®šè¦AS id å› ä¸ºVOç±»ç»§æ‰¿çš„InterfaceInfoç±»ã€‚è¿™é‡Œé¢åªæœ‰idå­—æ®µ"),va,n("ul",null,[n("li",null,[n("a",ma,[s("ECharts"),a(t)]),s("ï¼ˆæ¨èï¼‰")]),n("li",null,[n("a",ga,[s("AntV"),a(t)]),s("ï¼ˆæ¨èï¼‰")]),ba]),fa,ya,n("p",null,[s("è¿™é‡Œé€‰æ‹©ä½¿ç”¨äº†Echarså†åŠ ä¸Šä½¿ç”¨çš„æ˜¯react æ‰€ä»¥ç”¨è¿™ä¸ªåº“ï¼š"),n("a",ha,[s("https://github.com/hustcc/echarts-for-react"),a(t)])]),wa])}const Sa=i(r,[["render",Ia],["__file","1.html.vue"]]);export{Sa as default};
