<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mydocs.guoyaxue.top/codenotes/other/Nginx.html"><meta property="og:site_name" content="å°uã®å­¦ä¹ ç¬”è®°"><meta property="og:title" content="Nginx"><meta property="og:description" content="é«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç”µå­é‚®ä»¶ï¼ˆIMAP/POP3/SMTPï¼‰ä»£ç†æœåŠ¡å™¨; Nginx åˆ†ä¸ºä¸»è¿›ç¨‹ï¼ˆmaster processï¼‰å’Œå·¥ä½œè¿›ç¨‹ï¼ˆworker processï¼‰ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆä¹Ÿå¯ä»¥é…ç½®çº¿ç¨‹æ± ï¼‰ï¼Œé€šè¿‡ IO å¤šè·¯å¤ç”¨ï¼ˆåº•å±‚ä½¿ç”¨ epoll/kqueue ç­‰æŠ€æœ¯ï¼‰å’Œäº‹ä»¶å¾ªç¯è¾¾åˆ°é«˜å¹¶å‘ã€‚ä¸»è¿›ç¨‹è´Ÿè´£æ€»ä½“åè°ƒå·¥ä½œ..."><meta property="og:type" content="article"><meta property="og:updated_time" content="2023-07-24T09:58:41.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="Nginx"><meta property="article:modified_time" content="2023-07-24T09:58:41.000Z"><link rel="icon" href="/favicon.svg"><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ef5d300e271d63833a52446f97a78f7d";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
     </script><title>Nginx | å°uã®å­¦ä¹ ç¬”è®°</title><meta name="description" content="é«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç”µå­é‚®ä»¶ï¼ˆIMAP/POP3/SMTPï¼‰ä»£ç†æœåŠ¡å™¨; Nginx åˆ†ä¸ºä¸»è¿›ç¨‹ï¼ˆmaster processï¼‰å’Œå·¥ä½œè¿›ç¨‹ï¼ˆworker processï¼‰ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆä¹Ÿå¯ä»¥é…ç½®çº¿ç¨‹æ± ï¼‰ï¼Œé€šè¿‡ IO å¤šè·¯å¤ç”¨ï¼ˆåº•å±‚ä½¿ç”¨ epoll/kqueue ç­‰æŠ€æœ¯ï¼‰å’Œäº‹ä»¶å¾ªç¯è¾¾åˆ°é«˜å¹¶å‘ã€‚ä¸»è¿›ç¨‹è´Ÿè´£æ€»ä½“åè°ƒå·¥ä½œ...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.e2ddb5bf.css" as="style" /><link rel="stylesheet" href="/assets/style.e2ddb5bf.css" />
    <link rel="modulepreload" href="/assets/app.c5b3201b.js"><link rel="modulepreload" href="/assets/Nginx.html.df2693d0.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/Nginx.html.545f037f.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/site_logo.png" alt="å°uã®å­¦ä¹ ç¬”è®°"><!----><span class="site-name hide-in-pad">å°uã®å­¦ä¹ ç¬”è®°</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/quicknav/" class="nav-link" aria-label="å¿«é€Ÿå¯¼èˆª"><span class="icon iconfont icon-navigation"></span>å¿«é€Ÿå¯¼èˆª<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="icon iconfont icon-blog"></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/codenotes/" class="nav-link active" aria-label="ä»£ç ç¬”è®°"><span class="icon iconfont icon-code"></span>ä»£ç ç¬”è®°<!----></a></div><div class="nav-item hide-in-mobile"><a href="/projects/" class="nav-link" aria-label="æŠ€æœ¯æ‚è°ˆ"><span class="icon iconfont icon-code"></span>æŠ€æœ¯æ‚è°ˆ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/interview/" class="nav-link" aria-label="é¢è¯•"><span class="icon iconfont icon-code"></span>é¢è¯•<!----></a></div><div class="nav-item hide-in-mobile"><a href="/practice/" class="nav-link" aria-label="é¡¹ç›®å®æˆ˜"><span class="icon iconfont icon-code"></span>é¡¹ç›®å®æˆ˜<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://gitee.com/lizifan233/mydocs" target="_blank" rel="noopener noreferrer" aria-label="Gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢æœ¬ç«™" autocomplete="off" spellcheck="false" value><!----></form><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-java"></span><span class="title">Java</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-html"></span><span class="title">å‰ç«¯</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-ability"></span><span class="title">ç®—æ³•</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-python"></span><span class="title">python</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-workingDirectory"></span><span class="title">å…¶ä»–æŠ€æœ¯</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/codenotes/other/Git.html" class="nav-link sidebar-link sidebar-page" aria-label="Git"><span class="icon iconfont icon-git"></span>Git<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/codenotes/other/how-to-use-git-efficiently.html" class="nav-link sidebar-link sidebar-page" aria-label="å¦‚ä½•ä½¿ç”¨å¥½Git"><span class="icon iconfont icon-git"></span>å¦‚ä½•ä½¿ç”¨å¥½Git<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/codenotes/other/Nginx.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Nginx"><span class="icon iconfont icon-nginx"></span>Nginx<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„å¯åŠ¨å’Œåœæ­¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nginx çš„å¯åŠ¨å’Œåœæ­¢"><!---->Nginx çš„å¯åŠ¨å’Œåœæ­¢<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nginx çš„é…ç½®æ–‡ä»¶"><!---->Nginx çš„é…ç½®æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#location" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="location"><!---->location<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#https-sdky-gitee-io-5-devops-04-nginx-html-try-files-try-files" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="[#](https://sdky.gitee.io/5 DevOps/04 Nginx.html#try-files)try_files"><!---->[#](https://sdky.gitee.io/5 DevOps/04 Nginx.html#try-files)try_files<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#å¸¸è§å†…ç½®é¢„å®šä¹‰å˜é‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¸¸è§å†…ç½®é¢„å®šä¹‰å˜é‡"><!---->å¸¸è§å†…ç½®é¢„å®šä¹‰å˜é‡<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„è™šæ‹Ÿä¸»æœº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nginx çš„è™šæ‹Ÿä¸»æœº"><!---->Nginx çš„è™šæ‹Ÿä¸»æœº<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#æœåŠ¡å™¨åç§°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡å™¨åç§°"><!---->æœåŠ¡å™¨åç§°<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#åŠ¨é™åˆ†ç¦»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åŠ¨é™åˆ†ç¦»"><!---->åŠ¨é™åˆ†ç¦»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„åå‘ä»£ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nginx çš„åå‘ä»£ç†"><!---->Nginx çš„åå‘ä»£ç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nginx çš„è´Ÿè½½å‡è¡¡"><!---->Nginx çš„è´Ÿè½½å‡è¡¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„-websocket-ä»£ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nginx çš„ WebSocket ä»£ç†"><!---->Nginx çš„ WebSocket ä»£ç†<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/codenotes/other/effective-coding.html" class="nav-link sidebar-link sidebar-page" aria-label="ã€ŠEffective Codingâ€”â€”é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹"><span class="icon iconfont icon-code"></span>ã€ŠEffective Codingâ€”â€”é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/codenotes/other/clean-code.html" class="nav-link sidebar-link sidebar-page" aria-label="ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹"><span class="icon iconfont icon-code"></span>ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-linter"></span><span class="title">é€†å‘</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-linter"></span><span class="title">æ¨èä¹¦ç±</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-nginx"></span>Nginx</h1><div class="page-info"><span class="category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li><span class="category category4 clickable" role="navigation">Nginx</span></li></ul><meta property="articleSection" content="Nginx"></span><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag4 clickable" role="navigation">Nginx</span></li></ul><meta property="keywords" content="Nginx"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 12 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT12M"></span><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-07-24T09:58:41.000Z"></span><span class="words-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 3688 å­—</span><meta property="wordCount" content="3688"></span><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://gitee.com/lizifan233/mydocs" target="_blank" rel="noopener noreferrer">Xiaou</a></span><span property="author" content="Xiaou"></span></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„å¯åŠ¨å’Œåœæ­¢" class="router-link-active router-link-exact-active toc-link level2">Nginx çš„å¯åŠ¨å’Œåœæ­¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level2">Nginx çš„é…ç½®æ–‡ä»¶</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#location" class="router-link-active router-link-exact-active toc-link level3">location</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#https-sdky-gitee-io-5-devops-04-nginx-html-try-files-try-files" class="router-link-active router-link-exact-active toc-link level3">[#](https://sdky.gitee.io/5 DevOps/04 Nginx.html#try-files)try_files</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#å¸¸è§å†…ç½®é¢„å®šä¹‰å˜é‡" class="router-link-active router-link-exact-active toc-link level3">å¸¸è§å†…ç½®é¢„å®šä¹‰å˜é‡</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„è™šæ‹Ÿä¸»æœº" class="router-link-active router-link-exact-active toc-link level2">Nginx çš„è™šæ‹Ÿä¸»æœº</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#æœåŠ¡å™¨åç§°" class="router-link-active router-link-exact-active toc-link level3">æœåŠ¡å™¨åç§°</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#åŠ¨é™åˆ†ç¦»" class="router-link-active router-link-exact-active toc-link level2">åŠ¨é™åˆ†ç¦»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„åå‘ä»£ç†" class="router-link-active router-link-exact-active toc-link level2">Nginx çš„åå‘ä»£ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active toc-link level2">Nginx çš„è´Ÿè½½å‡è¡¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/codenotes/other/Nginx.html#nginx-çš„-websocket-ä»£ç†" class="router-link-active router-link-exact-active toc-link level2">Nginx çš„ WebSocket ä»£ç†</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><ul><li>é«˜æ€§èƒ½çš„ HTTP å’Œ<strong>åå‘ä»£ç†</strong>æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç”µå­é‚®ä»¶ï¼ˆIMAP/POP3/SMTPï¼‰ä»£ç†æœåŠ¡å™¨</li><li>Nginx åˆ†ä¸ºä¸»è¿›ç¨‹ï¼ˆmaster processï¼‰å’Œå·¥ä½œè¿›ç¨‹ï¼ˆworker processï¼‰ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆä¹Ÿå¯ä»¥é…ç½®çº¿ç¨‹æ± ï¼‰ï¼Œé€šè¿‡ IO å¤šè·¯å¤ç”¨ï¼ˆåº•å±‚ä½¿ç”¨ epoll/kqueue ç­‰æŠ€æœ¯ï¼‰å’Œäº‹ä»¶å¾ªç¯è¾¾åˆ°é«˜å¹¶å‘ã€‚ä¸»è¿›ç¨‹è´Ÿè´£æ€»ä½“åè°ƒå·¥ä½œï¼Œæ¯”å¦‚åœ¨é…ç½®æ–‡ä»¶æ›´æ–°åé‡æ–°åº”ç”¨é…ç½®ã€åè°ƒå“ªä¸ª worker process åº”è¯¥é€€å½¹ç­‰ç­‰ã€‚å·¥ä½œè¿›ç¨‹çš„ä¸ªæ•°ä¸€èˆ¬è®¾ç½®ä¸º CPU çš„ä¸ªæ•°ã€‚</li></ul><h2 id="nginx-çš„å¯åŠ¨å’Œåœæ­¢" tabindex="-1"><a class="header-anchor" href="#nginx-çš„å¯åŠ¨å’Œåœæ­¢" aria-hidden="true">#</a> Nginx çš„å¯åŠ¨å’Œåœæ­¢</h2><ul><li>start nginx.exeï¼šå¯åŠ¨</li><li>nginx [-c /etc/nginx/nginx.conf]ï¼šå¯åŠ¨ï¼Œå¯åŒæ—¶æŒ‡å®šä¸»é…ç½®æ–‡ä»¶</li><li>nginx -h</li><li>nginx -s ä¿¡å·ï¼šå‘æ­£åœ¨è¿è¡Œçš„ nginx è¿›ç¨‹å‘é€ä¿¡å·ï¼Œä¿¡å·åŒ…æ‹¬ï¼š <ul><li>stopï¼šç«‹å³å…³é—­</li><li>quitï¼šæ­£å¸¸å…³é—­ï¼ˆç­‰å¾…å·¥ä½œè¿›ç¨‹å¤„ç†å®Œå½“å‰çš„è¯·æ±‚æ‰åœæ­¢ nginx è¿›ç¨‹ï¼‰</li><li>reloadï¼šé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</li><li>reopenï¼šé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ï¼Œå®ç°æ—¥å¿—åˆ†éš”çš„æ•ˆæœ</li></ul></li><li>nginx -tï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯</li><li>nginx -vï¼šæŸ¥çœ‹å½“å‰ nginx çš„ç‰ˆæœ¬ä¿¡æ¯</li><li>nginx -Vï¼šæŸ¥çœ‹å½“å‰ nginx çš„ç¼–è¯‘ä¿¡æ¯ï¼Œå¦‚å®‰è£…çš„æ¨¡å—ã€å®‰è£…ç›®å½•ã€å„ç§æ–‡ä»¶çš„ç›®å½•ã€ç¼–è¯‘å™¨é€‰é¡¹ç­‰</li></ul><h2 id="nginx-çš„é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#nginx-çš„é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> Nginx çš„é…ç½®æ–‡ä»¶</h2><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œé…ç½®æ–‡ä»¶åä¸º nginx.confï¼Œå¹¶æ”¾åœ¨ç›®å½• <code>/usr/local/nginx/conf</code>ï¼Œ<code>/etc/nginx</code> æˆ– <code>/usr/local/etc/nginx</code> ä¸­</li><li><a href="https://github.com/digitalocean/nginxconfig.io" target="_blank" rel="noopener noreferrer">Nginx é…ç½®ç”Ÿæˆå™¨(opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">user</span>  nginx</span><span class="token punctuation">;</span> <span class="token comment"># æŒ‡å®šå·¥ä½œè¿›ç¨‹ä½¿ç”¨çš„ç”¨æˆ·å’Œç»„</span>
<span class="token directive"><span class="token keyword">worker_processes</span>  auto</span><span class="token punctuation">;</span> <span class="token comment"># å·¥ä½œè¿›ç¨‹çš„æ•°é‡ï¼Œé€šå¸¸è®¾ç½®æˆå’Œ CPU çš„æ•°é‡ç›¸ç­‰ï¼ˆauto è¡¨ç¤ºè‡ªåŠ¨ç»‘å®šå·¥ä½œè¿›ç¨‹åˆ°å¯ç”¨çš„ CPUï¼‰ï¼Œé»˜è®¤ 1</span>

<span class="token directive"><span class="token keyword">error_log</span>  logs/error.log warn</span><span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token comment"># å…¨å±€é”™è¯¯æ—¥å¿—</span>
<span class="token directive"><span class="token keyword">pid</span>        run/nginx.pid</span><span class="token punctuation">;</span> <span class="token comment"># PID æ–‡ä»¶--å­˜æ”¾è¿›ç¨‹å·çš„æ–‡ä»¶</span>

<span class="token comment">#å·¥ä½œæ¨¡å¼åŠè¿æ¥æ•°ä¸Šé™</span>
<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">1024</span></span><span class="token punctuation">;</span> <span class="token comment"># æ¯ä¸ªå·¥ä½œè¿›ç¨‹å¯ä»¥åŒæ—¶æ‰“å¼€çš„æœ€å¤§è¿æ¥æ•°ï¼ˆåŒ…æ‹¬ä¸å®¢æˆ·ç«¯ã€ä»£ç†æœåŠ¡å™¨çš„è¿æ¥ç­‰ï¼‰</span>
    <span class="token comment"># å¹¶å‘æ€»æ•°æ˜¯ worker_processes å’Œ worker_connections çš„ä¹˜ç§¯</span>
<span class="token punctuation">}</span>

<span class="token comment"># Nginx åŸºäº TCP/UDP ç«¯å£çš„å››å±‚è´Ÿè½½å‡è¡¡</span>
<span class="token comment">#server {</span>
<span class="token comment">#    listen 12345;</span>
<span class="token comment">#    proxy_connect_timeout 1s;</span>
<span class="token comment">#    proxy_timeout 1m;</span>
<span class="token comment">#    proxy_pass example.com:12345;</span>
<span class="token comment">#}</span>

<span class="token comment"># Nginx å¯¹ HTTP æœåŠ¡å™¨ç›¸å…³å±æ€§çš„é…ç½®</span>
<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">include</span>       mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span>  application/octet-stream</span><span class="token punctuation">;</span> <span class="token comment"># è®¾å®šé»˜è®¤ç±»å‹ä¸ºäºŒè¿›åˆ¶æµ</span>

    <span class="token directive"><span class="token keyword">log_format</span>  main  <span class="token string">&#39;<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> &quot;<span class="token variable">$request</span>&quot; &#39;</span>
                      <span class="token string">&#39;<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> &quot;<span class="token variable">$http_referer</span>&quot; &#39;</span>
                      <span class="token string">&#39;&quot;<span class="token variable">$http_user_agent</span>&quot; &quot;<span class="token variable">$http_x_forwarded_for</span>&quot;&#39;</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">access_log</span>  logs/access.log  main</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">sendfile</span>        <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token comment">#tcp_nopush     on;</span>

    <span class="token directive"><span class="token keyword">keepalive_timeout</span>  <span class="token number">75s</span></span><span class="token punctuation">;</span> <span class="token comment"># è®¾ç½® keep-alive å®¢æˆ·ç«¯è¿æ¥åœ¨æœåŠ¡å™¨ç«¯ä¿æŒå¼€å¯çš„è¶…æ—¶å€¼ï¼ˆé»˜è®¤ 75sï¼‰ï¼›å€¼ä¸º 0 ä¼šç¦ç”¨ keep-alive å®¢æˆ·ç«¯è¿æ¥</span>
    <span class="token directive"><span class="token keyword">keepalive_requests</span> <span class="token number">100</span></span><span class="token punctuation">;</span> <span class="token comment"># è®¾ç½®ä¸€ä¸ª keep-alive è¿æ¥ä¸Šå¯ä»¥æœåŠ¡çš„è¯·æ±‚çš„æœ€å¤§æ•°é‡ï¼Œå½“æœ€å¤§è¯·æ±‚æ•°é‡è¾¾åˆ°æ—¶ï¼Œè¿æ¥è¢«å…³é—­ï¼ˆé»˜è®¤ 100ï¼‰</span>
    
    <span class="token directive"><span class="token keyword">underscores_in_headers</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span> <span class="token comment"># ç¦ç”¨åœ¨å®¢æˆ·ç«¯è¯·æ±‚å¤´å­—æ®µä¸­ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆåç§°ä¸­åŒ…å«ä¸‹åˆ’çº¿çš„è¯·æ±‚å¤´å­—æ®µå°†è¢«æ ‡è®°ä¸ºæ— æ•ˆï¼‰ï¼Œé»˜è®¤ offã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼åœ°è®¾ç½® `underscores_in_headers on;`ï¼ŒNginx å°†åˆ é™¤åŒ…å«ä¸‹åˆ’çº¿çš„è¯·æ±‚å¤´å­—æ®µã€‚This is done in order to prevent ambiguities when mapping headers to CGI variables as both dashes and underscores are mapped to underscores during that process.</span>
    <span class="token directive"><span class="token keyword">ignore_invalid_headers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment"># å¿½ç•¥å…·æœ‰æ— æ•ˆåç§°çš„å¤´å­—æ®µã€‚æœ‰æ•ˆåç§°ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦æˆ–ä¸‹åˆ’çº¿ç»„æˆï¼ˆç”± underscores_in_headers æŒ‡ä»¤æ§åˆ¶ï¼‰</span>

    <span class="token comment">#gzip  on;</span>

    <span class="token directive"><span class="token keyword">include</span> vhost/*.conf</span><span class="token punctuation">;</span>

    <span class="token comment"># è®¾å®š localhost å¯¹åº”çš„è™šæ‹Ÿä¸»æœº</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span> <span class="token comment"># ç›‘å¬ 80 ç«¯å£</span>
        <span class="token directive"><span class="token keyword">server_name</span>  example.org  www.example.org  *.example.org</span><span class="token punctuation">;</span> <span class="token comment"># å®šä¹‰è™šæ‹Ÿä¸»æœºåç§°</span>
        
        <span class="token comment">#root D:\code; # å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½®</span>

        <span class="token comment">#charset koi8-r; # è®¾ç½®ç¼–ç </span>

        <span class="token comment">#access_log  logs/host.access.log  main; # è®¾å®šæœ¬è™šæ‹Ÿä¸»æœºçš„è®¿é—®æ—¥å¿—</span>

        <span class="token comment"># ä¸»è¦ç”¨äºåŒ¹é…ç½‘é¡µä½ç½®ï¼Œè®¾ç½®ä¸åŒçš„åŠŸèƒ½ç‰¹å¾</span>
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span> <span class="token comment"># å®šä¹‰å½“å‰ location çš„æ–‡æ¡£æ ¹ç›®å½•ä¸º html ç›®å½•</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span> <span class="token comment"># å®šä¹‰é¦–é¡µç´¢å¼•æ–‡ä»¶çš„åç§°</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#error_page  404  /404.html;</span>

        <span class="token comment"># redirect server error pages to the static page /50x.html</span>
        <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> = /50x.html</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># stream æ¨¡å—é…ç½®å’Œ http æ¨¡å—åœ¨ç›¸åŒçº§åˆ«</span>
<span class="token directive"><span class="token keyword">stream</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">16379</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">1s</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_timeout</span> <span class="token number">1m</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> 127.0.0.1:6379</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œnginx å·²ç»è‡ªåŠ¨å¼€å¯äº†å¯¹ client è¿æ¥çš„ keep alive æ”¯æŒï¼ˆåŒæ—¶ client å‘é€çš„ HTTP è¯·æ±‚è¦æ±‚ keep aliveï¼‰ é»˜è®¤ nginx è®¿é—®åç«¯ serverï¼ˆnginx ç§°ä¸º upstreamï¼‰éƒ½æ˜¯ç”¨çš„<strong>çŸ­è¿æ¥</strong>ï¼ˆHTTP/1.0ï¼‰ï¼Œä¸€ä¸ªè¯·æ±‚æ¥äº†ï¼Œnginx <strong>æ–°å¼€ä¸€ä¸ªç«¯å£å’Œåç«¯å»ºç«‹è¿æ¥</strong>ï¼Œåç«¯å¤„ç†å®Œæˆåä¸»åŠ¨å…³é—­è¯¥è¿æ¥</p></blockquote><h3 id="location" tabindex="-1"><a class="header-anchor" href="#location" aria-hidden="true">#</a> location</h3><ul><li>location è¯­æ³•ï¼š<code>location [ = | ~ | ~* | ^~ ] uri { ... };</code> æˆ– <code>location @name { ... };</code></li><li>location çš„å®šä¹‰æ–¹å¼ <ul><li><code>= uri</code>ï¼šä½¿ URI å’Œ location åŒ¹é…ç²¾ç¡®</li><li><code>^~ uri</code>ï¼šç”±å‰ç¼€å­—ç¬¦ä¸²å®šä¹‰</li><li><code>~ uri</code>ï¼šç”±æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰ï¼ˆåŒ¹é…æ—¶åŒºåˆ†å¤§å°å†™ï¼‰</li><li><code>~* uri</code>ï¼šç”±æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰ï¼ˆåŒ¹é…æ—¶ä¸åŒºåˆ†å¤§å°å†™ï¼‰</li><li><code>@name</code>ï¼šå®šä¹‰ä¸€ä¸ªå‘½åçš„ locationï¼Œåœ¨å†…éƒ¨å®šå‘æ—¶ä½¿ç”¨ï¼Œä¾‹å¦‚ error_page, try_files</li></ul></li><li>å¦‚æœæœ‰å‡ ä¸ªåŒ¹é…ä¸Šçš„ location å—æŒ‡ä»¤ï¼Œnginx å°†é€‰æ‹©å…·æœ‰æœ€é•¿å‰ç¼€çš„ location å—</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> = /</span> <span class="token punctuation">{</span>
    <span class="token comment"># ä»…å…è®¸ IPv4 ç½‘ç»œ 10.1.1.0/16 å’Œ 192.168.1.0/24 ä¸ IPv6 ç½‘ç»œ 2001:0db8::/ 32 è®¿é—®ï¼Œä¸åŒ…æ‹¬åœ°å€ 192.168.1.1</span>
    <span class="token directive"><span class="token keyword">deny</span>  192.168.1.1</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">allow</span> 192.168.1.0/24</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">allow</span> 10.1.1.0/16</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">allow</span> 2001:0db8::/32</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">deny</span>  all</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> /documents/</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ^~ /images/</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment"># é˜²ç›—é“¾</span>
<span class="token directive"><span class="token keyword">location</span> ~* \.(gif|jpg|jpeg)$</span> <span class="token punctuation">{</span>
    <span class="token comment"># åªå…è®¸ 192.168.0.1 è¯·æ±‚èµ„æº</span>
    <span class="token directive"><span class="token keyword">valid_referers</span> none blocked 192.168.0.1</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$invalid_referer</span>)</span> <span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">rewrite</span> ^/ http://<span class="token variable">$host</span>/logo.png</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> = /XDFyle6tNA.txt</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">default_type</span> text/plain</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">return</span> <span class="token number">200</span> <span class="token string">&#39;d6296a84657eb275c05c31b10924f6ea&#39;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># root ä¸åšæ›¿æ¢ï¼ŒåŒ¹é…ç»“æœä¸ºï¼š/var/www/app/static/static</span>
<span class="token directive"><span class="token keyword">location</span> /static/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /var/www/app/static/</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">autoindex</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># alias ä¼šåšæ›¿æ¢ï¼ŒåŒ¹é…ç»“æœä¸ºï¼š/var/www/app/static</span>
<span class="token directive"><span class="token keyword">location</span> /static/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">alias</span> /var/www/app/static/</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">autoindex</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="https-sdky-gitee-io-5-devops-04-nginx-html-try-files-try-files" tabindex="-1"><a class="header-anchor" href="#https-sdky-gitee-io-5-devops-04-nginx-html-try-files-try-files" aria-hidden="true">#</a> [#](<a href="https://sdky.gitee.io/5" target="_blank" rel="noopener noreferrer">https://sdky.gitee.io/5<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> DevOps/04 Nginx.html#try-files)try_files</h3><ul><li>è¯­æ³•ï¼š<code>try_files file ... uri;</code> æˆ– <code>try_files file ... =code;</code></li><li>æŒ‰æŒ‡å®šçš„ file é¡ºåºæŸ¥æ‰¾å­˜åœ¨çš„æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„æ–‡ä»¶è¿›è¡Œè¯·æ±‚å¤„ç†</li><li>æŸ¥æ‰¾è·¯å¾„æ˜¯æŒ‰ç…§ç»™å®šçš„ rootï¼ˆä¸åšæ›¿æ¢ï¼‰ æˆ– <strong>alias</strong>ï¼ˆä¼šåšæ›¿æ¢ï¼‰ ä¸ºæ ¹è·¯å¾„æ¥æŸ¥æ‰¾çš„</li><li>å¦‚æœæœ€åä¸€ä¸ªå‚æ•°æ˜¯ <code>uri</code>ï¼Œè‹¥ç»™å‡ºçš„ file éƒ½æ²¡æœ‰åŒ¹é…åˆ°ï¼Œåˆ™é‡æ–°è¯·æ±‚æœ€åä¸€ä¸ªå‚æ•°ç»™å®šçš„ uriï¼Œå°±æ˜¯æ–°çš„ location åŒ¹é…ï¼ˆå¦‚æœ uri ä¸æ˜¯å‘½åçš„ locationï¼Œé‚£ä¹ˆ <code>$args</code> ä¸ä¼šè‡ªåŠ¨ä¼ é€’ï¼Œå¦‚æœè¦ä¿ç•™ <code>$args</code>ï¼Œå¿…é¡»æ˜ç¡®å£°æ˜å‚æ•°ï¼›å¦‚æœè¿™ä¸ªè·¯å¾„ä¸å­˜åœ¨ï¼Œå°†ä¼šè¿”å› 500 é”™è¯¯ï¼‰</li><li>å¦‚æœæœ€åä¸€ä¸ªå‚æ•°æ˜¯ <code>= 404</code>ï¼Œè‹¥ç»™å‡ºçš„ file éƒ½æ²¡æœ‰åŒ¹é…åˆ°ï¼Œåˆ™æœ€åè¿”å› 404 å“åº”ç </li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># æ¯”å¦‚è¯·æ±‚ 127.0.0.1/images/test.gif ä¼šä¾æ¬¡æŸ¥æ‰¾ï¼š</span>
<span class="token comment"># 1. æ–‡ä»¶ /opt/html/images/test.gifï¼›</span>
<span class="token comment"># 2. æ–‡ä»¶å¤¹ /opt/html/images/test.gif/ ä¸‹çš„ index æ–‡ä»¶ï¼›</span>
<span class="token comment"># 3. è¯·æ±‚ 127.0.0.1/images/default.gif</span>
<span class="token directive"><span class="token keyword">location</span> /images/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /opt/html/</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /images/default.gif?<span class="token variable">$args</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1 2 3 4 5 6 7 8</p><blockquote><p>try-files å¦‚æœä¸å†™ä¸Š <code>$uri/</code>ï¼Œå½“ç›´æ¥è®¿é—®ä¸€ä¸ªç›®å½•è·¯å¾„æ—¶ï¼Œå¹¶ä¸ä¼šå»åŒ¹é…ç›®å½•ä¸‹çš„ç´¢å¼•é¡µï¼Œå³è®¿é—® 127.0.0.1/images/ ä¸ä¼šå»è®¿é—® 127.0.0.1/images/index.html</p></blockquote><h3 id="å¸¸è§å†…ç½®é¢„å®šä¹‰å˜é‡" tabindex="-1"><a class="header-anchor" href="#å¸¸è§å†…ç½®é¢„å®šä¹‰å˜é‡" aria-hidden="true">#</a> å¸¸è§å†…ç½®é¢„å®šä¹‰å˜é‡</h3><ul><li>ngx_http_core_module <code>$host</code>ï¼šæŒ‰ç…§ä»¥ä¸‹ä¼˜å…ˆé¡ºåºï¼šæ¥è‡ªè¯·æ±‚è¡Œçš„ä¸»æœºåï¼Œæ¥è‡ª Host è¯·æ±‚å¤´å­—æ®µçš„ä¸»æœºåï¼Œæˆ–ä¸è¯·æ±‚åŒ¹é…çš„æœåŠ¡å™¨å <code>$hostname</code>ï¼šä¸»æœºå <code>$arg_name</code>ï¼šè¯·æ±‚è¡Œä¸­çš„ name å‚æ•° <code>$args</code>ã€<code>$query_string</code>ï¼šè¯·æ±‚è¡Œä¸­çš„å‚æ•° <code>$cookie_name</code>ï¼šåç§°ä¸º name çš„ cookie <code>$http_name</code>ï¼šä»»æ„è¯·æ±‚å¤´å­—æ®µï¼Œå˜é‡åç§°çš„æœ€åä¸€éƒ¨åˆ†æ˜¯å°†å­—æ®µåç§°è½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ç ´æŠ˜å·æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ï¼Œå¦‚ <code>$http_host</code><code>$msec</code>ï¼šå½“å‰æ—¶é—´ä»¥æ¯«ç§’ä¸ºå•ä½ <code>$remote_addr</code>ï¼šå®¢æˆ·ç«¯åœ°å€ <code>$remote_port</code>ï¼šå®¢æˆ·ç«¯ç«¯å£ <code>$remote_user</code>ï¼šåŸºæœ¬èº«ä»½éªŒè¯æä¾›çš„ç”¨æˆ·å <code>$request</code>ï¼šå®Œæ•´çš„åŸå§‹è¯·æ±‚è¡Œ <code>$request_body</code>ï¼šè¯·æ±‚æ­£æ–‡ <code>$request_id</code>ï¼šç”± 16 ä¸ªéšæœºå­—èŠ‚ç”Ÿæˆçš„å”¯ä¸€è¯·æ±‚æ ‡è¯†ç¬¦ï¼Œä»¥åå…­è¿›åˆ¶è¡¨ç¤º <code>$request_method</code>ï¼šè¯·æ±‚æ–¹æ³• <code>$request_time</code>ï¼šè¯·æ±‚å¤„ç†æ—¶é—´ä»¥æ¯«ç§’ä¸ºå•ä½ <code>$request_uri</code>ï¼šå®Œæ•´çš„åŸå§‹è¯·æ±‚ URI <code>$scheme</code>ï¼šè¯·æ±‚æ¨¡å¼ï¼Œhttp æˆ– https <code>$sent_http_name</code>ï¼šä»»æ„å“åº”å¤´å­—æ®µã€‚å˜é‡åç§°çš„æœ€åä¸€éƒ¨åˆ†æ˜¯å°†å­—æ®µåç§°è½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ç ´æŠ˜å·æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ <code>$status</code>ï¼šå“åº”çŠ¶æ€</li><li>ngx_http_proxy_module <code>$proxy_host</code>ï¼šproxy_pass æŒ‡ä»¤ä¸­æŒ‡å®šçš„ä»£ç†æœåŠ¡å™¨çš„åç§°å’Œç«¯å£ <code>$proxy_port</code>ï¼šproxy_pass æŒ‡ä»¤ä¸­æŒ‡å®šçš„ä»£ç†æœåŠ¡å™¨çš„ç«¯å£æˆ–åè®®çš„é»˜è®¤ç«¯å£ <code>$proxy_add_x_forwarded_for</code>ï¼šX-Forwarded-For å®¢æˆ·ç«¯è¯·æ±‚å¤´å­—æ®µï¼Œå…¶ä¸­é™„åŠ äº† <code>$remote_addr</code> å˜é‡ï¼Œä»¥é€—å·åˆ†å‰²ã€‚å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚å¤´ä¸­ä¸å­˜åœ¨ X-Forwarded-For å­—æ®µï¼Œåˆ™ <code>$proxy_add_x_forwarded_for</code> å˜é‡ç­‰äº <code>$remote_addr</code> å˜é‡</li></ul><h2 id="nginx-çš„è™šæ‹Ÿä¸»æœº" tabindex="-1"><a class="header-anchor" href="#nginx-çš„è™šæ‹Ÿä¸»æœº" aria-hidden="true">#</a> Nginx çš„è™šæ‹Ÿä¸»æœº</h2><ul><li>è™šæ‹Ÿä¸»æœºæ˜¯ç”¨æ¥<strong>æ˜ å°„</strong>ç½‘ç«™ç›®å½•å’Œç½‘ç«™ä»£ç æ–‡ä»¶å¤¹çš„å…³ç³»</li><li>å¯ä»¥é€šè¿‡ server é…ç½®ï¼Œæ¯ä¸ª server è¡¨ç¤ºä¸€ä¸ªè™šæ‹Ÿæœºä¸»æœº</li><li>nginx é¦–å…ˆæ ¹æ® server å—çš„ listen æŒ‡ä»¤æ£€éªŒè¯·æ±‚çš„ IP å’Œç«¯å£ï¼Œä¹‹åæ ¹æ®ä¸ IP å’Œç«¯å£ç›¸åŒ¹é…çš„ <code>server</code> å—çš„ <code>server_name</code> é¡¹å¯¹è¯·æ±‚çš„â€œHostâ€ header åŸŸè¿›è¡Œæ£€éªŒ</li><li>å¦‚æœæ‰¾ä¸åˆ°æœåŠ¡å™¨çš„åç§°ï¼ˆserver_nameï¼‰ï¼Œè¯·æ±‚å°†ç”± <code>default_server</code> å¤„ç†</li></ul><h3 id="æœåŠ¡å™¨åç§°" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å™¨åç§°" aria-hidden="true">#</a> æœåŠ¡å™¨åç§°</h3><ul><li>å½“é€šè¿‡åç§°æœç´¢è™šæ‹ŸæœåŠ¡å™¨æ—¶ï¼Œå¦‚æœåç§°ä¸å¤šä¸ªæŒ‡å®šçš„å˜ä½“åŒ¹é…ï¼Œä¾‹å¦‚é€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™å°†æŒ‰ç…§ä¼˜å…ˆé¡ºåºé€‰æ‹©ç¬¬ä¸€ä¸ªåŒ¹é…çš„å˜ä½“ï¼š <ol><li>ç²¾ç¡®çš„åç§°</li><li>ä»¥ <code>*</code> å¼€å¤´çš„æœ€é•¿çš„é€šé…ç¬¦åç§°ï¼Œä¾‹å¦‚ <code>*.example.org</code></li><li>ä»¥ <code>*</code> ç»“å°¾çš„æœ€é•¿çš„é€šé…ç¬¦åç§°ï¼Œä¾‹å¦‚ <code>mail.*</code></li><li>ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆæŒ‰ç…§åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºï¼‰</li></ol></li><li>é€šé…ç¬¦åç§°ï¼š <ul><li>é€šé…ç¬¦åç§°åªèƒ½åœ¨åç§°çš„å¼€å¤´æˆ–è€…ç»“å°¾åŒ…å«ä¸€ä¸ª <code>*</code>ï¼Œä¸”åªèƒ½åœ¨ç‚¹çš„è¾¹ç•Œä¸ŠåŒ…å« <code>*</code></li><li><code>*</code> å¯ä»¥åŒ¹é…å¤šä¸ªåç§°éƒ¨åˆ†ï¼Œä¾‹å¦‚ <code>*.example.org</code> å¯ä»¥åŒ¹é… <a href="http://www.example.org" target="_blank" rel="noopener noreferrer">www.example.org<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€<a href="http://www.sub.example.org" target="_blank" rel="noopener noreferrer">www.sub.example.org<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>å¯ä»¥ä½¿ç”¨ <code>.example.org</code> å½¢å¼çš„ç‰¹æ®Šé€šé…ç¬¦åç§°æ¥åŒ¹é…ç¡®åˆ‡çš„åç§° <code>example.org</code> å’Œé€šé…ç¬¦ <code>*.example.org</code></li></ul></li><li>æ­£åˆ™è¡¨è¾¾å¼åç§°ï¼šnginx ä½¿ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ä¸ Perl ç¼–ç¨‹è¯­è¨€ï¼ˆPCREï¼‰ä½¿ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å…¼å®¹ï¼Œè¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒæœåŠ¡å™¨åç§°å¿…é¡»ä»¥ <code>~</code> å¼€å¤´</li></ul><blockquote><p>æœç´¢é€šé…ç¬¦å“ˆå¸Œè¡¨æ¯”æœç´¢ç¡®åˆ‡åç§°çš„å“ˆå¸Œè¡¨è¦æ…¢ ç”±äºæ­£åˆ™è¡¨è¾¾å¼æ˜¯æŒ‰é¡ºåºéªŒè¯çš„ï¼Œå› æ­¤æ˜¯æœ€æ…¢çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ˜¯ä¸å¯æ‰©å±•çš„ ç”±äºè¿™äº›åŸå› ï¼Œæœ€å¥½æ˜¯<strong>å°½å¯èƒ½ä½¿ç”¨ç¡®åˆ‡çš„åç§°</strong></p></blockquote><h2 id="åŠ¨é™åˆ†ç¦»" tabindex="-1"><a class="header-anchor" href="#åŠ¨é™åˆ†ç¦»" aria-hidden="true">#</a> åŠ¨é™åˆ†ç¦»</h2><ul><li>å½“ç”¨æˆ·è¯·æ±‚ jsã€css ç­‰é™æ€èµ„æºæ—¶æœ‰å½“å‰ Nginx æœåŠ¡å™¨å¤„ç†ï¼Œè¯·æ±‚ php åŠ¨æ€è„šæœ¬ä»£ç æ—¶ç”±å…¶ä»–çš„æœåŠ¡å™¨å¤„ç†ï¼ˆåå‘ä»£ç†ï¼‰</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># é…ç½® Nginx åŠ¨é™åˆ†ç¦»ï¼Œå®šä¹‰çš„é™æ€é¡µé¢ç›´æ¥ä» Nginx å‘å¸ƒç›®å½•è¯»å–</span>
<span class="token directive"><span class="token keyword">location</span> ~ .*\.(gif|jpg|jpeg|bmp|png|ico|txt|js|css)$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /data/www/wugk</span><span class="token punctuation">;</span>
    <span class="token comment">#expires å®šä¹‰ç”¨æˆ·æµè§ˆå™¨ç¼“å­˜çš„æ—¶é—´ä¸º 3 å¤©</span>
    <span class="token directive"><span class="token keyword">expires</span>      <span class="token number">3d</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment"># åŠ¨æ€é¡µé¢äº¤ç»™å…¶ä»–æœåŠ¡å™¨å¤„ç†</span>
<span class="token directive"><span class="token keyword">location</span> ~ .*\.(php|jsp|cgi)?$</span> <span class="token punctuation">{</span>
   <span class="token comment"># å‘é€ç»™å…¶ä»–æœåŠ¡å™¨å¤„ç†</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nginx-çš„åå‘ä»£ç†" tabindex="-1"><a class="header-anchor" href="#nginx-çš„åå‘ä»£ç†" aria-hidden="true">#</a> Nginx çš„åå‘ä»£ç†</h2><ul><li>åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å— internet ä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶å°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™ internet ä¸Šè¯·æ±‚è¿çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªæœåŠ¡å™¨</li><li>ä»£ç†æœåŠ¡å™¨å¯ä»¥ä½œä¸ºå‰ç«¯æœåŠ¡å™¨å¤„ç†é™æ€èµ„æº</li><li>proxy_pass <ul><li>è¯­æ³•ï¼š<code>proxy_pass URL;</code></li><li>è®¾ç½®ä»£ç†æœåŠ¡å™¨çš„åè®®ï¼ˆhttp æˆ– httpsï¼‰ã€åœ°å€ï¼ˆåŸŸåæˆ– IPï¼Œä»¥åŠä¸€ä¸ªå¯é€‰ç«¯å£å·ï¼‰ã€åº”æ˜ å°„ä½ç½®çš„ URIï¼ˆå¯é€‰ï¼‰</li></ul></li><li>proxy_set_header <ul><li>è¯­æ³•ï¼š<code>proxy_set_header filed value;</code></li><li>ç”¨äºå°†å­—æ®µé‡æ–°å®šä¹‰æˆ–é™„åŠ åˆ°ä¼ é€’ç»™ä»£ç†æœåŠ¡å™¨çš„è¯·æ±‚ headerã€‚è¯¥å€¼å¯ä»¥åŒ…å«æ–‡æœ¬ã€å˜é‡åŠå…¶ç»„åˆ</li><li>å½“ä¸”ä»…å½“<strong>åœ¨å½“å‰çº§åˆ«ä¸Šæ²¡æœ‰å®šä¹‰</strong> <code>proxy_set_header</code> æŒ‡ä»¤æ—¶ï¼Œè¿™äº›æŒ‡ä»¤æ‰<strong>ä»ä¸Šå±‚çº§åˆ«ç»§æ‰¿</strong></li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªé‡æ–°å®šä¹‰äº†ä¸¤ä¸ªå­—æ®µï¼š<code>proxy_set_header Host $proxy_host;</code> <code>proxy_set_header Connection close;</code></li></ul></li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token comment"># ä¾¦å¬ 192.168.8.x çš„ 80 ç«¯å£</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>    www.example.org</span><span class="token punctuation">;</span>

    <span class="token comment"># åå‘ä»£ç†æ—¶è·å–å®¢æˆ·ç«¯çœŸå® IPã€åŸŸåã€åè®®ã€ç«¯å£</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-Proto <span class="token variable">$scheme</span></span><span class="token punctuation">;</span>

    <span class="token comment"># å¯¹ php åç¼€çš„è¿›è¡Œè¯·æ±‚ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰åº”è¯¥æ˜¯ ~ï¼‰</span>
    <span class="token directive"><span class="token keyword">location</span> ~ .*\.php$</span> <span class="token punctuation">{</span>
        <span class="token comment"># å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½®</span>
        <span class="token directive"><span class="token keyword">root</span>     /root</span><span class="token punctuation">;</span>
        <span class="token comment"># å®šä¹‰é¦–é¡µç´¢å¼•æ–‡ä»¶çš„åç§°</span>
        <span class="token directive"><span class="token keyword">index</span> index.php index.html index.htm</span><span class="token punctuation">;</span>

        <span class="token comment"># è¯·æ±‚è½¬å‘åˆ°æŒ‡å®šçš„ä»£ç†æœåŠ¡å™¨</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span>    http://localhost:81</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token directive"><span class="token keyword">location</span> /api1/</span> <span class="token punctuation">{</span>
        <span class="token comment"># proxy_pass ä¸­ä¸å¸¦ URI æ—¶ï¼Œnginx å°†ä¼šä¿ç•™ location ä¸­è·¯å¾„éƒ¨åˆ†</span>
        <span class="token comment"># http://localhost/api1/xxx -&gt; http://localhost:8080/api1/xxx</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span>    http://localhost:8080</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token directive"><span class="token keyword">location</span> /api2/</span> <span class="token punctuation">{</span>
        <span class="token comment"># proxy_pass ä¸­å¸¦ URI æ—¶ï¼Œnginx å°†ä½¿ç”¨ä¾‹å¦‚ alias çš„æ›¿æ¢æ–¹å¼å¯¹ URL è¿›è¡Œæ›¿æ¢</span>
        <span class="token comment"># http://localhost/api2/xxx -&gt; http://localhost:8080/xxx</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span>    http://localhost:8080/</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nginx-çš„è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#nginx-çš„è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> Nginx çš„è´Ÿè½½å‡è¡¡</h2><ul><li><p>ä¼˜ç‚¹ï¼šåˆ†æ•£åç«¯æœåŠ¡å™¨çš„å‹åŠ›ï¼›è‡ªåŠ¨å»æ‰ä¸å¯ç”¨çš„åç«¯æœåŠ¡å™¨ï¼›ç¼“å­˜åç«¯æœåŠ¡å™¨å“åº”å†…å®¹</p></li><li><p>è´Ÿè½½å‡è¡¡çš„åˆ†é…ç­–ç•¥ï¼š</p><ul><li>è½®è¯¢ï¼ˆé»˜è®¤ï¼‰</li><li>least_connï¼šæœ€å°‘è¿æ¥ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚è¢«åˆ†é…ç»™å…·æœ‰æœ€å°‘æ•°é‡æ´»åŠ¨è¿æ¥çš„æœåŠ¡å™¨</li><li>weight</li><li>ip_hash</li><li>fairï¼ˆç¬¬ä¸‰æ–¹ï¼ŒæŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ï¼‰ã€url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰</li></ul></li><li><p><a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html" target="_blank" rel="noopener noreferrer">è´Ÿè½½å‡è¡¡<strong>é…ç½®</strong>(opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token comment"># åœ¨ http èŠ‚ç‚¹ä¸­å®šä¹‰è´Ÿè½½å‡è¡¡è®¾å¤‡çš„ ip åŠè®¾å¤‡çŠ¶æ€ </span>
    <span class="token directive"><span class="token keyword">upstream</span> backend</span> <span class="token punctuation">{</span>
        <span class="token comment"># ip_hash;</span>
        <span class="token comment"># least_conn; # åŠ æƒæœ€å°‘è¿æ¥</span>
        <span class="token comment"># down è¡¨ç¤ºå°†å½“å‰çš„ server æ ‡è®°ä¸ºæ°¸ä¹…ä¸å¯ç”¨</span>
        <span class="token directive"><span class="token keyword">server</span> 127.0.0.1:9090 down</span><span class="token punctuation">;</span>
        <span class="token comment"># weight é»˜è®¤ä¸º 1ï¼Œweight è¶Šå¤§ï¼Œè´Ÿè½½çš„æƒé‡å°±è¶Šå¤§ï¼Œè¢«åˆ†é…åˆ°çš„å‡ ç‡å°±è¶Šå¤§</span>
        <span class="token directive"><span class="token keyword">server</span> 127.0.0.1:8080 weight=2</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server</span> 127.0.0.1:6060 max_fails=1 fail_timeout=10s</span><span class="token punctuation">;</span>
        <span class="token comment"># å…¶å®ƒæ‰€æœ‰çš„é backup æœºå™¨ down æˆ–è€…å¿™çš„æ—¶å€™ï¼Œè¯·æ±‚ backup æœºå™¨</span>
        <span class="token directive"><span class="token keyword">server</span> 127.0.0.1:7070 backup</span><span class="token punctuation">;</span>
        [ip_hash | fair | url_hash]
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token comment"># åœ¨éœ€è¦ä½¿ç”¨è´Ÿè½½çš„ server èŠ‚ç‚¹ä¸‹æ·»åŠ </span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å¥åº·æ£€æŸ¥</p><ul><li>Nginx æ˜¯åŸºäºè¿æ¥æ¢æµ‹çš„ï¼Œå¦‚æœåœ¨å•ä½å‘¨æœŸä¸º fail_timeout è®¾ç½®çš„æ—¶é—´å†…ä¸æœåŠ¡å™¨é€šä¿¡çš„å¤±è´¥æ¬¡æ•°è¾¾åˆ° max_fails æ¬¡ï¼Œé‚£ä¹ˆå°±å°†æŠŠè¯¥æœåŠ¡å™¨æ ‡è®°ä¸ºä¸å¯ç”¨ï¼Œå¹¶ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸï¼ˆåŒæ ·æ—¶é•¿ä¸º fail_timeoutï¼‰å†ä¸€æ¬¡å»è¯·æ±‚ï¼Œåˆ¤æ–­æ˜¯å¦è¿æ¥æ˜¯å¦æˆåŠŸï¼Œå¦‚æœæ¢æµ‹æˆåŠŸï¼Œåˆ™å°†æœåŠ¡å™¨æ ‡è®°ä¸ºæ´»åŠ¨</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>max_fails=1 fail_timeout=10s</code>ï¼Œå½“ max_fails è®¾ç½®ä¸º 0 æ—¶ï¼Œè¯¥æœåŠ¡å™¨çš„å¥åº·æ£€æŸ¥å°†è¢«ç¦ç”¨ï¼ˆå³è®¤ä¸ºè¯¥æœåŠ¡å™¨æ˜¯ä¸€ç›´å¯ç”¨çš„ï¼‰</li></ul></li></ul><h2 id="nginx-çš„-websocket-ä»£ç†" tabindex="-1"><a class="header-anchor" href="#nginx-çš„-websocket-ä»£ç†" aria-hidden="true">#</a> Nginx çš„ WebSocket ä»£ç†</h2><ul><li>ä½¿ç”¨ HTTP/1.1 ä¸­çš„<strong>åè®®åˆ‡æ¢</strong>æœºåˆ¶ï¼Œå°†å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä» HTTP/1.1 è½¬æ¢ä¸º WebSocket</li><li>å¦‚æœä»£ç†æœåŠ¡å™¨è¿”å›ä¸€ä¸ª 101 å“åº”ç ï¼ˆäº¤æ¢åè®®ï¼‰ï¼Œåˆ™å®¢æˆ·æœºå’Œä»£ç†æœåŠ¡å™¨ä¹‹é—´å°†å»ºç«‹éš§é“ï¼Œå®¢æˆ·ç«¯é€šè¿‡è¯·æ±‚ä¸­çš„ <code>Upgrade</code> å¤´æ¥è¯·æ±‚åè®®äº¤æ¢</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä»£ç†åŠ¡å™¨åœ¨ 60 ç§’å†…æ²¡æœ‰ä¼ è¾“ä»»ä½•æ•°æ®ï¼Œè¿æ¥å°†è¢«å…³é—­ï¼ˆè¿™ä¸ªè¶…æ—¶å¯ä»¥é€šè¿‡ proxy_read_timeoutæŒ‡ä»¤æ¥å¢åŠ ï¼Œ æˆ–è€…ä»£ç†æœåŠ¡å™¨å¯ä»¥é…ç½®ä¸ºå®šæœŸå‘é€ WebSocket ping å¸§ä»¥é‡ç½®è¶…æ—¶å¹¶æ£€æŸ¥è¿æ¥æ˜¯å¦ä»ç„¶æ´»è·ƒï¼‰</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /chat/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_http_version</span> 1.1</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Connection <span class="token string">&quot;upgrade&quot;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/lizifan233/mydocs/edit/master/src/codenotes/other/Nginx.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ã€Giteeã€‘ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ã€Giteeã€‘ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><!----></footer><nav class="page-nav"><a href="/codenotes/other/how-to-use-git-efficiently.html" class="nav-link prev" aria-label="å¦‚ä½•ä½¿ç”¨å¥½Git"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="icon iconfont icon-git"></span>å¦‚ä½•ä½¿ç”¨å¥½Git</div></a><a href="/codenotes/other/effective-coding.html" class="nav-link next" aria-label="ã€ŠEffective Codingâ€”â€”é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">ã€ŠEffective Codingâ€”â€”é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹<span class="icon iconfont icon-code"></span></div></a></nav><div class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><!-- eslint-disable-next-line vue/no-v-html --><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button class="wl-btn">ç™»å½•</button><button class="wl-btn primary" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><div class="wl-gallery" style="gap:6px;"><!--[--><!--]--></div><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><!-- Copyright Information --><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noreferrer"> Waline </a> v2.14.1</div></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">å°uã®å­¦ä¹ ç¬”è®°</div><div class="copyright">Copyright Â© 2023 Xiaou</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.c5b3201b.js" defer></script>
  </body>
</html>
